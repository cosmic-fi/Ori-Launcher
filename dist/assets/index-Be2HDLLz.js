var Em=Object.defineProperty;var Vu=n=>{throw TypeError(n)};var wm=(n,e,t)=>e in n?Em(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ms=(n,e,t)=>wm(n,typeof e!="symbol"?e+"":e,t),Fl=(n,e,t)=>e.has(n)||Vu("Cannot "+t);var St=(n,e,t)=>(Fl(n,e,"read from private field"),t?t.call(n):e.get(n)),$n=(n,e,t)=>e.has(n)?Vu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),ri=(n,e,t,i)=>(Fl(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),Ia=(n,e,t)=>(Fl(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();const ih=!1;var eo=Array.isArray,Am=Array.prototype.indexOf,nu=Array.from,Ko=Object.defineProperty,Aa=Object.getOwnPropertyDescriptor,ah=Object.getOwnPropertyDescriptors,Tm=Object.prototype,Rm=Array.prototype,iu=Object.getPrototypeOf,Wu=Object.isExtensible;function gs(n){return typeof n=="function"}const Ta=()=>{};function Cm(n){return n()}function Jo(n){for(var e=0;e<n.length;e++)n[e]()}function Pm(){var n,e,t=new Promise((i,a)=>{n=i,e=a});return{promise:t,resolve:n,reject:e}}const ai=2,au=4,dl=8,rs=16,da=32,sr=64,rh=128,hi=256,Zo=512,bn=1024,pi=2048,fa=4096,wi=8192,or=16384,ru=32768,su=65536,$u=1<<17,Lm=1<<18,ou=1<<19,sh=1<<20,Rc=1<<21,lu=1<<22,Ya=1<<23,Ra=Symbol("$state"),oh=Symbol("legacy props"),Dm=Symbol(""),cu=new class extends Error{constructor(){super(...arguments);ms(this,"name","StaleReactionError");ms(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function km(){throw new Error("https://svelte.dev/e/await_outside_boundary")}function uu(n){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Um(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Im(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Nm(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Om(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Fm(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Bm(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function zm(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Gm(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Hm(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}const fl=1,hl=2,lh=4,Vm=8,Wm=16,$m=1,jm=2,Xm=4,qm=8,Ym=16,Km=1,Jm=2,_n=Symbol(),Zm="http://www.w3.org/1999/xhtml";let Qm=!1;function ch(n){return n===this.v}function du(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function uh(n){return!du(n,this.v)}let ss=!1,eg=!1;function tg(){ss=!0}let Bt=null;function Qo(n){Bt=n}function Yt(n,e=!1,t){Bt={p:Bt,c:null,e:null,s:n,x:null,l:ss&&!e?{s:null,u:null,$:[]}:null}}function Kt(n){var e=Bt,t=e.e;if(t!==null){e.e=null;for(var i of t)Eh(i)}return Bt=e.p,{}}function os(){return!ss||Bt!==null&&Bt.l===null}const ng=new WeakMap;function ig(n){var e=pt;if(e===null)return ht.f|=Ya,n;if((e.f&ru)===0){if((e.f&rh)===0)throw!e.parent&&n instanceof Error&&dh(n),n;e.b.error(n)}else fu(n,e)}function fu(n,e){for(;e!==null;){if((e.f&rh)!==0)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n instanceof Error&&dh(n),n}function dh(n){const e=ng.get(n);e&&(Ko(n,"message",{value:e.message}),Ko(n,"stack",{value:e.stack}))}let el=[];function ag(){var n=el;el=[],Jo(n)}function hu(n){el.length===0&&queueMicrotask(ag),el.push(n)}function rg(){for(var n=pt.b;n!==null&&!n.has_pending_snippet();)n=n.parent;return n===null&&km(),n}function to(n){var e=ai|pi,t=ht!==null&&(ht.f&ai)!==0?ht:null;return pt===null||t!==null&&(t.f&hi)!==0?e|=hi:pt.f|=ou,{ctx:Bt,deps:null,effects:null,equals:ch,f:e,fn:n,reactions:null,rv:0,v:_n,wv:0,parent:t??pt,ac:null}}function sg(n,e){let t=pt;t===null&&Um();var i=t.b,a=void 0,r=Fs(_n),s=null,o=!ht;return xg(()=>{try{var l=n()}catch(g){l=Promise.reject(g)}var c=()=>l;a=(s==null?void 0:s.then(c,c))??Promise.resolve(l),s=a;var u=Gt,d=i.pending;o&&(i.update_pending_count(1),d||u.increment());const p=(g,f=void 0)=>{s=null,d||u.activate(),f?f!==cu&&(r.f|=Ya,Bs(r,f)):((r.f&Ya)!==0&&(r.f^=Ya),Bs(r,g)),o&&(i.update_pending_count(-1),d||u.decrement()),ph()};if(a.then(p,g=>p(null,g||"unknown")),u)return()=>{queueMicrotask(()=>u.neuter())}}),new Promise(l=>{function c(u){function d(){u===a?l(r):c(a)}u.then(d,d)}c(a)})}function og(n){const e=to(n);return Dh(e),e}function Ze(n){const e=to(n);return e.equals=uh,e}function fh(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)la(e[t])}}function lg(n){for(var e=n.parent;e!==null;){if((e.f&ai)===0)return e;e=e.parent}return null}function pu(n){var e,t=pt;ka(lg(n));try{fh(n),e=Nh(n)}finally{ka(t)}return e}function hh(n){var e=pu(n);if(n.equals(e)||(n.v=e,n.wv=Uh()),!lr)if(Sa!==null)Sa.set(n,n.v);else{var t=(Ea||(n.f&hi)!==0)&&n.deps!==null?fa:bn;Vn(n,t)}}function cg(n,e,t){const i=os()?to:Ze;if(e.length===0){t(n.map(i));return}var a=Gt,r=pt,s=ug(),o=rg();Promise.all(e.map(l=>sg(l))).then(l=>{a==null||a.activate(),s();try{t([...n.map(i),...l])}catch(c){(r.f&or)===0&&fu(c,r)}a==null||a.deactivate(),ph()}).catch(l=>{o.error(l)})}function ug(){var n=pt,e=ht,t=Bt;return function(){ka(n),zi(e),Qo(t)}}function ph(){ka(null),zi(null),Qo(null)}const vs=new Set;let Gt=null,Go=null,Sa=null,ju=new Set,tl=[];function mh(){const n=tl.shift();tl.length>0&&queueMicrotask(mh),n()}let Ns=[],mu=null,Cc=!1;var qr,Yr,xa,Ks,Js,Xa,Kr,qa,ya,Jr,Zs,Qs,Ti,gh,Ho,Pc;const ul=class ul{constructor(){$n(this,Ti);ms(this,"current",new Map);$n(this,qr,new Map);$n(this,Yr,new Set);$n(this,xa,0);$n(this,Ks,null);$n(this,Js,!1);$n(this,Xa,[]);$n(this,Kr,[]);$n(this,qa,[]);$n(this,ya,[]);$n(this,Jr,[]);$n(this,Zs,[]);$n(this,Qs,[]);ms(this,"skipped_effects",new Set)}process(e){var r;Ns=[],Go=null;var t=null;if(vs.size>1){t=new Map,Sa=new Map;for(const[s,o]of this.current)t.set(s,{v:s.v,wv:s.wv}),s.v=o;for(const s of vs)if(s!==this)for(const[o,l]of St(s,qr))t.has(o)||(t.set(o,{v:o.v,wv:o.wv}),o.v=l)}for(const s of e)Ia(this,Ti,gh).call(this,s);if(St(this,Xa).length===0&&St(this,xa)===0){Ia(this,Ti,Pc).call(this);var i=St(this,qa),a=St(this,ya);ri(this,qa,[]),ri(this,ya,[]),ri(this,Jr,[]),Go=Gt,Gt=null,Xu(i),Xu(a),Gt===null?Gt=this:vs.delete(this),(r=St(this,Ks))==null||r.resolve()}else Ia(this,Ti,Ho).call(this,St(this,qa)),Ia(this,Ti,Ho).call(this,St(this,ya)),Ia(this,Ti,Ho).call(this,St(this,Jr));if(t){for(const[s,{v:o,wv:l}]of t)s.wv<=l&&(s.v=o);Sa=null}for(const s of St(this,Xa))Ja(s);for(const s of St(this,Kr))Ja(s);ri(this,Xa,[]),ri(this,Kr,[])}capture(e,t){St(this,qr).has(e)||St(this,qr).set(e,t),this.current.set(e,e.v)}activate(){Gt=this}deactivate(){Gt=null,Go=null;for(const e of ju)if(ju.delete(e),e(),Gt!==null)break}neuter(){ri(this,Js,!0)}flush(){Ns.length>0?dg():Ia(this,Ti,Pc).call(this),Gt===this&&(St(this,xa)===0&&vs.delete(this),this.deactivate())}increment(){ri(this,xa,St(this,xa)+1)}decrement(){if(ri(this,xa,St(this,xa)-1),St(this,xa)===0){for(const e of St(this,Zs))Vn(e,pi),Zr(e);for(const e of St(this,Qs))Vn(e,fa),Zr(e);ri(this,qa,[]),ri(this,ya,[]),this.flush()}else this.deactivate()}add_callback(e){St(this,Yr).add(e)}settled(){return(St(this,Ks)??ri(this,Ks,Pm())).promise}static ensure(){if(Gt===null){const e=Gt=new ul;vs.add(Gt),ul.enqueue(()=>{Gt===e&&e.flush()})}return Gt}static enqueue(e){tl.length===0&&queueMicrotask(mh),tl.unshift(e)}};qr=new WeakMap,Yr=new WeakMap,xa=new WeakMap,Ks=new WeakMap,Js=new WeakMap,Xa=new WeakMap,Kr=new WeakMap,qa=new WeakMap,ya=new WeakMap,Jr=new WeakMap,Zs=new WeakMap,Qs=new WeakMap,Ti=new WeakSet,gh=function(e){var u;e.f^=bn;for(var t=e.first;t!==null;){var i=t.f,a=(i&(da|sr))!==0,r=a&&(i&bn)!==0,s=r||(i&wi)!==0||this.skipped_effects.has(t);if(!s&&t.fn!==null){if(a)t.f^=bn;else if((i&au)!==0)St(this,ya).push(t);else if((i&bn)===0)if((i&lu)!==0){var o=(u=t.b)!=null&&u.pending?St(this,Kr):St(this,Xa);o.push(t)}else io(t)&&((t.f&rs)!==0&&St(this,Jr).push(t),Ja(t));var l=t.first;if(l!==null){t=l;continue}}var c=t.parent;for(t=t.next;t===null&&c!==null;)t=c.next,c=c.parent}},Ho=function(e){for(const t of e)((t.f&pi)!==0?St(this,Zs):St(this,Qs)).push(t),Vn(t,bn);e.length=0},Pc=function(){if(!St(this,Js))for(const e of St(this,Yr))e();St(this,Yr).clear()};let Os=ul;function dg(){var n=Gr;Cc=!0;try{var e=0;for(Ku(!0);Ns.length>0;){var t=Os.ensure();if(e++>1e3){var i,a;fg()}t.process(Ns),Ca.clear()}}finally{Cc=!1,Ku(n),mu=null}}function fg(){try{Fm()}catch(n){fu(n,mu)}}let Ha=null;function Xu(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var i=n[t++];if((i.f&(or|wi))===0&&io(i)&&(Ha=[],Ja(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null&&i.ac===null?Ch(i):i.fn=null),Ha.length>0)){Ca.clear();for(const a of Ha)Ja(a);Ha=[]}}Ha=null}}function Zr(n){for(var e=mu=n;e.parent!==null;){e=e.parent;var t=e.f;if(Cc&&e===pt&&(t&rs)!==0)return;if((t&(sr|da))!==0){if((t&bn)===0)return;e.f^=bn}}Ns.push(e)}const Ca=new Map;function Fs(n,e){var t={f:0,v:n,reactions:null,equals:ch,rv:0,wv:0};return t}function pa(n,e){const t=Fs(n);return Dh(t),t}function Ve(n,e=!1,t=!0){var a;const i=Fs(n);return e||(i.equals=uh),ss&&t&&Bt!==null&&Bt.l!==null&&((a=Bt.l).s??(a.s=[])).push(i),i}function Rn(n,e){return Se(n,U(()=>_(n))),e}function Se(n,e,t=!1){ht!==null&&(!Oi||(ht.f&$u)!==0)&&os()&&(ht.f&(ai|rs|lu|$u))!==0&&!(Hn!=null&&Hn.includes(n))&&Hm();let i=t?Br(e):e;return Bs(n,i)}function Bs(n,e){if(!n.equals(e)){var t=n.v;lr?Ca.set(n,e):Ca.set(n,t),n.v=e;var i=Os.ensure();i.capture(n,t),(n.f&ai)!==0&&((n.f&pi)!==0&&pu(n),Vn(n,(n.f&hi)===0?bn:fa)),n.wv=Uh(),vh(n,pi),os()&&pt!==null&&(pt.f&bn)!==0&&(pt.f&(da|sr))===0&&(ci===null?Sg([n]):ci.push(n))}return e}function Bl(n){Se(n,n.v+1)}function vh(n,e){var t=n.reactions;if(t!==null)for(var i=os(),a=t.length,r=0;r<a;r++){var s=t[r],o=s.f;if(!(!i&&s===pt)){var l=(o&pi)===0;l&&Vn(s,e),(o&ai)!==0?vh(s,fa):l&&((o&rs)!==0&&Ha!==null&&Ha.push(s),Zr(s))}}}function Br(n){if(typeof n!="object"||n===null||Ra in n)return n;const e=iu(n);if(e!==Tm&&e!==Rm)return n;var t=new Map,i=eo(n),a=pa(0),r=Ka,s=o=>{if(Ka===r)return o();var l=ht,c=Ka;zi(null),Zu(r);var u=o();return zi(l),Zu(c),u};return i&&t.set("length",pa(n.length)),new Proxy(n,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&zm();var u=t.get(l);return u===void 0?u=s(()=>{var d=pa(c.value);return t.set(l,d),d}):Se(u,c.value,!0),!0},deleteProperty(o,l){var c=t.get(l);if(c===void 0){if(l in o){const u=s(()=>pa(_n));t.set(l,u),Bl(a)}}else Se(c,_n),Bl(a);return!0},get(o,l,c){var g;if(l===Ra)return n;var u=t.get(l),d=l in o;if(u===void 0&&(!d||(g=Aa(o,l))!=null&&g.writable)&&(u=s(()=>{var f=Br(d?o[l]:_n),v=pa(f);return v}),t.set(l,u)),u!==void 0){var p=_(u);return p===_n?void 0:p}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var u=t.get(l);u&&(c.value=_(u))}else if(c===void 0){var d=t.get(l),p=d==null?void 0:d.v;if(d!==void 0&&p!==_n)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(o,l){var p;if(l===Ra)return!0;var c=t.get(l),u=c!==void 0&&c.v!==_n||Reflect.has(o,l);if(c!==void 0||pt!==null&&(!u||(p=Aa(o,l))!=null&&p.writable)){c===void 0&&(c=s(()=>{var g=u?Br(o[l]):_n,f=pa(g);return f}),t.set(l,c));var d=_(c);if(d===_n)return!1}return u},set(o,l,c,u){var b;var d=t.get(l),p=l in o;if(i&&l==="length")for(var g=c;g<d.v;g+=1){var f=t.get(g+"");f!==void 0?Se(f,_n):g in o&&(f=s(()=>pa(_n)),t.set(g+"",f))}if(d===void 0)(!p||(b=Aa(o,l))!=null&&b.writable)&&(d=s(()=>pa(void 0)),Se(d,Br(c)),t.set(l,d));else{p=d.v!==_n;var v=s(()=>Br(c));Se(d,v)}var h=Reflect.getOwnPropertyDescriptor(o,l);if(h!=null&&h.set&&h.set.call(u,c),!p){if(i&&typeof l=="string"){var m=t.get("length"),M=Number(l);Number.isInteger(M)&&M>=m.v&&Se(m,M+1)}Bl(a)}return!0},ownKeys(o){_(a);var l=Reflect.ownKeys(o).filter(d=>{var p=t.get(d);return p===void 0||p.v!==_n});for(var[c,u]of t)u.v!==_n&&!(c in o)&&l.push(c);return l},setPrototypeOf(){Gm()}})}var qu,_h,bh,xh;function hg(){if(qu===void 0){qu=window,_h=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;bh=Aa(e,"firstChild").get,xh=Aa(e,"nextSibling").get,Wu(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Wu(t)&&(t.__t=void 0)}}function ls(n=""){return document.createTextNode(n)}function Ma(n){return bh.call(n)}function pl(n){return xh.call(n)}function S(n,e){return Ma(n)}function jt(n,e){{var t=Ma(n);return t instanceof Comment&&t.data===""?pl(t):t}}function N(n,e=1,t=!1){let i=n;for(;e--;)i=pl(i);return i}function pg(n){n.textContent=""}function yh(){return!1}let Yu=!1;function mg(){Yu||(Yu=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function ml(n){var e=ht,t=pt;zi(null),ka(null);try{return n()}finally{zi(e),ka(t)}}function gg(n,e,t,i=t){n.addEventListener(e,()=>ml(t));const a=n.__on_r;a?n.__on_r=()=>{a(),i(!0)}:n.__on_r=()=>i(!0),mg()}function Sh(n){pt===null&&ht===null&&Om(),ht!==null&&(ht.f&hi)!==0&&pt===null&&Nm(),lr&&Im()}function vg(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function Vi(n,e,t,i=!0){var a=pt;a!==null&&(a.f&wi)!==0&&(n|=wi);var r={ctx:Bt,deps:null,nodes_start:null,nodes_end:null,f:n|pi,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Ja(r),r.f|=ru}catch(l){throw la(r),l}else e!==null&&Zr(r);var s=t&&r.deps===null&&r.first===null&&r.nodes_start===null&&r.teardown===null&&(r.f&ou)===0;if(!s&&i&&(a!==null&&vg(r,a),ht!==null&&(ht.f&ai)!==0&&(n&sr)===0)){var o=ht;(o.effects??(o.effects=[])).push(r)}return r}function Mh(n){const e=Vi(dl,null,!1);return Vn(e,bn),e.teardown=n,e}function Lc(n){Sh();var e=pt.f,t=!ht&&(e&da)!==0&&(e&ru)===0;if(t){var i=Bt;(i.e??(i.e=[])).push(n)}else return Eh(n)}function Eh(n){return Vi(au|sh,n,!1)}function _g(n){return Sh(),Vi(dl|sh,n,!0)}function bg(n){Os.ensure();const e=Vi(sr,n,!0);return(t={})=>new Promise(i=>{t.outro?vu(e,()=>{la(e),i(void 0)}):(la(e),i(void 0))})}function gu(n){return Vi(au,n,!1)}function ft(n,e){var t=Bt,i={effect:null,ran:!1,deps:n};t.l.$.push(i),i.effect=no(()=>{n(),!i.ran&&(i.ran=!0,U(e))})}function Ci(){var n=Bt;no(()=>{for(var e of n.l.$){e.deps();var t=e.effect;(t.f&bn)!==0&&Vn(t,fa),io(t)&&Ja(t),e.ran=!1}})}function xg(n){return Vi(lu|ou,n,!0)}function no(n,e=0){return Vi(dl|e,n,!0)}function De(n,e=[],t=[]){cg(e,t,i=>{Vi(dl,()=>n(...i.map(_)),!0)})}function wh(n,e=0){var t=Vi(rs|e,n,!0);return t}function zs(n,e=!0){return Vi(da,n,!0,e)}function Ah(n){var e=n.teardown;if(e!==null){const t=lr,i=ht;Ju(!0),zi(null);try{e.call(null)}finally{Ju(t),zi(i)}}}function Th(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const a=t.ac;a!==null&&ml(()=>{a.abort(cu)});var i=t.next;(t.f&sr)!==0?t.parent=null:la(t,e),t=i}}function yg(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&da)===0&&la(e),e=t}}function la(n,e=!0){var t=!1;(e||(n.f&Lm)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(Rh(n.nodes_start,n.nodes_end),t=!0),Th(n,e&&!t),nl(n,0),Vn(n,or);var i=n.transitions;if(i!==null)for(const r of i)r.stop();Ah(n);var a=n.parent;a!==null&&a.first!==null&&Ch(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function Rh(n,e){for(;n!==null;){var t=n===e?null:pl(n);n.remove(),n=t}}function Ch(n){var e=n.parent,t=n.prev,i=n.next;t!==null&&(t.next=i),i!==null&&(i.prev=t),e!==null&&(e.first===n&&(e.first=i),e.last===n&&(e.last=t))}function vu(n,e){var t=[];_u(n,t,!0),Ph(t,()=>{la(n),e&&e()})}function Ph(n,e){var t=n.length;if(t>0){var i=()=>--t||e();for(var a of n)a.out(i)}else e()}function _u(n,e,t){if((n.f&wi)===0){if(n.f^=wi,n.transitions!==null)for(const s of n.transitions)(s.is_global||t)&&e.push(s);for(var i=n.first;i!==null;){var a=i.next,r=(i.f&su)!==0||(i.f&da)!==0;_u(i,e,r?t:!1),i=a}}}function bu(n){Lh(n,!0)}function Lh(n,e){if((n.f&wi)!==0){n.f^=wi,(n.f&bn)===0&&(Vn(n,pi),Zr(n));for(var t=n.first;t!==null;){var i=t.next,a=(t.f&su)!==0||(t.f&da)!==0;Lh(t,a?e:!1),t=i}if(n.transitions!==null)for(const r of n.transitions)(r.is_global||e)&&r.in()}}let Gr=!1;function Ku(n){Gr=n}let lr=!1;function Ju(n){lr=n}let ht=null,Oi=!1;function zi(n){ht=n}let pt=null;function ka(n){pt=n}let Hn=null;function Dh(n){ht!==null&&(Hn===null?Hn=[n]:Hn.push(n))}let Bn=null,Qn=0,ci=null;function Sg(n){ci=n}let kh=1,Gs=0,Ka=Gs;function Zu(n){Ka=n}let Ea=!1;function Uh(){return++kh}function io(n){var d;var e=n.f;if((e&pi)!==0)return!0;if((e&fa)!==0){var t=n.deps,i=(e&hi)!==0;if(t!==null){var a,r,s=(e&Zo)!==0,o=i&&pt!==null&&!Ea,l=t.length;if((s||o)&&(pt===null||(pt.f&or)===0)){var c=n,u=c.parent;for(a=0;a<l;a++)r=t[a],(s||!((d=r==null?void 0:r.reactions)!=null&&d.includes(c)))&&(r.reactions??(r.reactions=[])).push(c);s&&(c.f^=Zo),o&&u!==null&&(u.f&hi)===0&&(c.f^=hi)}for(a=0;a<l;a++)if(r=t[a],io(r)&&hh(r),r.wv>n.wv)return!0}(!i||pt!==null&&!Ea)&&Vn(n,bn)}return!1}function Ih(n,e,t=!0){var i=n.reactions;if(i!==null&&!(Hn!=null&&Hn.includes(n)))for(var a=0;a<i.length;a++){var r=i[a];(r.f&ai)!==0?Ih(r,e,!1):e===r&&(t?Vn(r,pi):(r.f&bn)!==0&&Vn(r,fa),Zr(r))}}function Nh(n){var v;var e=Bn,t=Qn,i=ci,a=ht,r=Ea,s=Hn,o=Bt,l=Oi,c=Ka,u=n.f;Bn=null,Qn=0,ci=null,Ea=(u&hi)!==0&&(Oi||!Gr||ht===null),ht=(u&(da|sr))===0?n:null,Hn=null,Qo(n.ctx),Oi=!1,Ka=++Gs,n.ac!==null&&(ml(()=>{n.ac.abort(cu)}),n.ac=null);try{n.f|=Rc;var d=n.fn,p=d(),g=n.deps;if(Bn!==null){var f;if(nl(n,Qn),g!==null&&Qn>0)for(g.length=Qn+Bn.length,f=0;f<Bn.length;f++)g[Qn+f]=Bn[f];else n.deps=g=Bn;if(!Ea||(u&ai)!==0&&n.reactions!==null)for(f=Qn;f<g.length;f++)((v=g[f]).reactions??(v.reactions=[])).push(n)}else g!==null&&Qn<g.length&&(nl(n,Qn),g.length=Qn);if(os()&&ci!==null&&!Oi&&g!==null&&(n.f&(ai|fa|pi))===0)for(f=0;f<ci.length;f++)Ih(ci[f],n);return a!==null&&a!==n&&(Gs++,ci!==null&&(i===null?i=ci:i.push(...ci))),(n.f&Ya)!==0&&(n.f^=Ya),p}catch(h){return ig(h)}finally{n.f^=Rc,Bn=e,Qn=t,ci=i,ht=a,Ea=r,Hn=s,Qo(o),Oi=l,Ka=c}}function Mg(n,e){let t=e.reactions;if(t!==null){var i=Am.call(t,n);if(i!==-1){var a=t.length-1;a===0?t=e.reactions=null:(t[i]=t[a],t.pop())}}t===null&&(e.f&ai)!==0&&(Bn===null||!Bn.includes(e))&&(Vn(e,fa),(e.f&(hi|Zo))===0&&(e.f^=Zo),fh(e),nl(e,0))}function nl(n,e){var t=n.deps;if(t!==null)for(var i=e;i<t.length;i++)Mg(n,t[i])}function Ja(n){var e=n.f;if((e&or)===0){Vn(n,bn);var t=pt,i=Gr;pt=n,Gr=!0;try{(e&rs)!==0?yg(n):Th(n),Ah(n);var a=Nh(n);n.teardown=typeof a=="function"?a:null,n.wv=kh;var r;ih&&eg&&(n.f&pi)!==0&&n.deps}finally{Gr=i,pt=t}}}function _(n){var e=n.f,t=(e&ai)!==0;if(ht!==null&&!Oi){var i=pt!==null&&(pt.f&or)!==0;if(!i&&!(Hn!=null&&Hn.includes(n))){var a=ht.deps;if((ht.f&Rc)!==0)n.rv<Gs&&(n.rv=Gs,Bn===null&&a!==null&&a[Qn]===n?Qn++:Bn===null?Bn=[n]:(!Ea||!Bn.includes(n))&&Bn.push(n));else{(ht.deps??(ht.deps=[])).push(n);var r=n.reactions;r===null?n.reactions=[ht]:r.includes(ht)||r.push(ht)}}}else if(t&&n.deps===null&&n.effects===null){var s=n,o=s.parent;o!==null&&(o.f&hi)===0&&(s.f^=hi)}if(lr){if(Ca.has(n))return Ca.get(n);if(t){s=n;var l=s.v;return((s.f&bn)===0&&s.reactions!==null||Oh(s))&&(l=pu(s)),Ca.set(s,l),l}}else if(t){if(s=n,Sa!=null&&Sa.has(s))return Sa.get(s);io(s)&&hh(s)}if((n.f&Ya)!==0)throw n.v;return n.v}function Oh(n){if(n.v===_n)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Ca.has(e)||(e.f&ai)!==0&&Oh(e))return!0;return!1}function U(n){var e=Oi;try{return Oi=!0,n()}finally{Oi=e}}const Eg=-7169;function Vn(n,e){n.f=n.f&Eg|e}function Gn(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Ra in n)Dc(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&Ra in t&&Dc(t)}}}function Dc(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let i in n)try{Dc(n[i],e)}catch{}const t=iu(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const i=ah(t);for(let a in i){const r=i[a].get;if(r)try{r.call(n)}catch{}}}}}const wg=["touchstart","touchmove"];function Ag(n){return wg.includes(n)}const Fh=new Set,kc=new Set;function Tg(n,e,t,i={}){function a(r){if(i.capture||Ps.call(e,r),!r.cancelBubble)return ml(()=>t==null?void 0:t.call(this,r))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?hu(()=>{e.addEventListener(n,a,i)}):e.addEventListener(n,a,i),a}function vt(n,e,t,i,a){var r={capture:i,passive:a},s=Tg(n,e,t,r);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Mh(()=>{e.removeEventListener(n,s,r)})}function gl(n){for(var e=0;e<n.length;e++)Fh.add(n[e]);for(var t of kc)t(n)}let Qu=null;function Ps(n){var M;var e=this,t=e.ownerDocument,i=n.type,a=((M=n.composedPath)==null?void 0:M.call(n))||[],r=a[0]||n.target;Qu=n;var s=0,o=Qu===n&&n.__root;if(o){var l=a.indexOf(o);if(l!==-1&&(e===document||e===window)){n.__root=e;return}var c=a.indexOf(e);if(c===-1)return;l<=c&&(s=l)}if(r=a[s]||n.target,r!==e){Ko(n,"currentTarget",{configurable:!0,get(){return r||t}});var u=ht,d=pt;zi(null),ka(null);try{for(var p,g=[];r!==null;){var f=r.assignedSlot||r.parentNode||r.host||null;try{var v=r["__"+i];if(v!=null&&(!r.disabled||n.target===r))if(eo(v)){var[h,...m]=v;h.apply(r,[n,...m])}else v.call(r,n)}catch(b){p?g.push(b):p=b}if(n.cancelBubble||f===e||f===null)break;r=f}if(p){for(let b of g)queueMicrotask(()=>{throw b});throw p}}finally{n.__root=e,delete n.currentTarget,zi(u),ka(d)}}}function Bh(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Hs(n,e){var t=pt;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function Me(n,e){var t=(e&Km)!==0,i=(e&Jm)!==0,a,r=!n.startsWith("<!>");return()=>{a===void 0&&(a=Bh(r?n:"<!>"+n),t||(a=Ma(a)));var s=i||_h?document.importNode(a,!0):a.cloneNode(!0);if(t){var o=Ma(s),l=s.lastChild;Hs(o,l)}else Hs(s,s);return s}}function $a(n=""){{var e=ls(n+"");return Hs(e,e),e}}function ii(){var n=document.createDocumentFragment(),e=document.createComment(""),t=ls();return n.append(e,t),Hs(e,t),n}function he(n,e){n!==null&&n.before(e)}function ae(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function Rg(n,e){return Cg(n,e)}const pr=new Map;function Cg(n,{target:e,anchor:t,props:i={},events:a,context:r,intro:s=!0}){hg();var o=new Set,l=d=>{for(var p=0;p<d.length;p++){var g=d[p];if(!o.has(g)){o.add(g);var f=Ag(g);e.addEventListener(g,Ps,{passive:f});var v=pr.get(g);v===void 0?(document.addEventListener(g,Ps,{passive:f}),pr.set(g,1)):pr.set(g,v+1)}}};l(nu(Fh)),kc.add(l);var c=void 0,u=bg(()=>{var d=t??e.appendChild(ls());return zs(()=>{if(r){Yt({});var p=Bt;p.c=r}a&&(i.$$events=a),c=n(d,i)||{},r&&Kt()}),()=>{var f;for(var p of o){e.removeEventListener(p,Ps);var g=pr.get(p);--g===0?(document.removeEventListener(p,Ps),pr.delete(p)):pr.set(p,g)}kc.delete(l),d!==t&&((f=d.parentNode)==null||f.removeChild(d))}});return Pg.set(c,u),c}let Pg=new WeakMap;function at(n,e,t=!1){var i=n,a=null,r=null,s=_n,o=t?su:0,l=!1;const c=(g,f=!0)=>{l=!0,p(f,g)};var u=null;function d(){u!==null&&(u.lastChild.remove(),i.before(u),u=null);var g=s?a:r,f=s?r:a;g&&bu(g),f&&vu(f,()=>{s?r=null:a=null})}const p=(g,f)=>{if(s!==(s=g)){var v=yh(),h=i;if(v&&(u=document.createDocumentFragment(),u.append(h=ls())),s?a??(a=f&&zs(()=>f(h))):r??(r=f&&zs(()=>f(h))),v){var m=Gt,M=s?a:r,b=s?r:a;M&&m.skipped_effects.delete(M),b&&m.skipped_effects.add(b),m.add_callback(d)}else d()}};wh(()=>{l=!1,e(c),l||p(null,null)},o)}function Ln(n,e){return e}function Lg(n,e,t){for(var i=n.items,a=[],r=e.length,s=0;s<r;s++)_u(e[s].e,a,!0);var o=r>0&&a.length===0&&t!==null;if(o){var l=t.parentNode;pg(l),l.append(t),i.clear(),Ii(n,e[0].prev,e[r-1].next)}Ph(a,()=>{for(var c=0;c<r;c++){var u=e[c];o||(i.delete(u.k),Ii(n,u.prev,u.next)),la(u.e,!o)}})}function vn(n,e,t,i,a,r=null){var s=n,o={flags:e,items:new Map,first:null},l=(e&lh)!==0;if(l){var c=n;s=c.appendChild(ls())}var u=null,d=!1,p=new Map,g=Ze(()=>{var m=t();return eo(m)?m:m==null?[]:nu(m)}),f,v;function h(){Dg(v,f,o,p,s,a,e,i,t),r!==null&&(f.length===0?u?bu(u):u=zs(()=>r(s)):u!==null&&vu(u,()=>{u=null}))}wh(()=>{v??(v=pt),f=_(g);var m=f.length;if(!(d&&m===0)){d=m===0;var M,b,w,R;if(yh()){var P=new Set,A=Gt;for(b=0;b<m;b+=1){w=f[b],R=i(w,b);var G=o.items.get(R)??p.get(R);G?(e&(fl|hl))!==0&&zh(G,w,b,e):(M=Gh(null,o,null,null,w,R,b,a,e,t,!0),p.set(R,M)),P.add(R)}for(const[x,E]of o.items)P.has(x)||A.skipped_effects.add(E.e);A.add_callback(h)}else h();_(g)}})}function Dg(n,e,t,i,a,r,s,o,l){var ne,re,B,Z;var c=(s&Vm)!==0,u=(s&(fl|hl))!==0,d=e.length,p=t.items,g=t.first,f=g,v,h=null,m,M=[],b=[],w,R,P,A;if(c)for(A=0;A<d;A+=1)w=e[A],R=o(w,A),P=p.get(R),P!==void 0&&((ne=P.a)==null||ne.measure(),(m??(m=new Set)).add(P));for(A=0;A<d;A+=1){if(w=e[A],R=o(w,A),P=p.get(R),P===void 0){var G=i.get(R);if(G!==void 0){i.delete(R),p.set(R,G);var x=h?h.next:f;Ii(t,h,G),Ii(t,G,x),zl(G,x,a),h=G}else{var E=f?f.e.nodes_start:a;h=Gh(E,t,h,h===null?t.first:h.next,w,R,A,r,s,l)}p.set(R,h),M=[],b=[],f=h.next;continue}if(u&&zh(P,w,A,s),(P.e.f&wi)!==0&&(bu(P.e),c&&((re=P.a)==null||re.unfix(),(m??(m=new Set)).delete(P))),P!==f){if(v!==void 0&&v.has(P)){if(M.length<b.length){var W=b[0],q;h=W.prev;var D=M[0],I=M[M.length-1];for(q=0;q<M.length;q+=1)zl(M[q],W,a);for(q=0;q<b.length;q+=1)v.delete(b[q]);Ii(t,D.prev,I.next),Ii(t,h,D),Ii(t,I,W),f=W,h=I,A-=1,M=[],b=[]}else v.delete(P),zl(P,f,a),Ii(t,P.prev,P.next),Ii(t,P,h===null?t.first:h.next),Ii(t,h,P),h=P;continue}for(M=[],b=[];f!==null&&f.k!==R;)(f.e.f&wi)===0&&(v??(v=new Set)).add(f),b.push(f),f=f.next;if(f===null)continue;P=f}M.push(P),h=P,f=P.next}if(f!==null||v!==void 0){for(var F=v===void 0?[]:nu(v);f!==null;)(f.e.f&wi)===0&&F.push(f),f=f.next;var J=F.length;if(J>0){var O=(s&lh)!==0&&d===0?a:null;if(c){for(A=0;A<J;A+=1)(B=F[A].a)==null||B.measure();for(A=0;A<J;A+=1)(Z=F[A].a)==null||Z.fix()}Lg(t,F,O)}}c&&hu(()=>{var de;if(m!==void 0)for(P of m)(de=P.a)==null||de.apply()}),n.first=t.first&&t.first.e,n.last=h&&h.e;for(var j of i.values())la(j.e);i.clear()}function zh(n,e,t,i){(i&fl)!==0&&Bs(n.v,e),(i&hl)!==0?Bs(n.i,t):n.i=t}function Gh(n,e,t,i,a,r,s,o,l,c,u){var d=(l&fl)!==0,p=(l&Wm)===0,g=d?p?Ve(a,!1,!1):Fs(a):a,f=(l&hl)===0?s:Fs(s),v={i:f,v:g,k:r,a:null,e:null,prev:t,next:i};try{if(n===null){var h=document.createDocumentFragment();h.append(n=ls())}return v.e=zs(()=>o(n,g,f,c),Qm),v.e.prev=t&&t.e,v.e.next=i&&i.e,t===null?u||(e.first=v):(t.next=v,t.e.next=v.e),i!==null&&(i.prev=v,i.e.prev=v.e),v}finally{}}function zl(n,e,t){for(var i=n.next?n.next.e.nodes_start:t,a=e?e.e.nodes_start:t,r=n.e.nodes_start;r!==null&&r!==i;){var s=pl(r);a.before(r),r=s}}function Ii(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Vs(n,e,t=!1,i=!1,a=!1){var r=n,s="";De(()=>{var o=pt;if(s!==(s=e()??"")&&(o.nodes_start!==null&&(Rh(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),s!=="")){var l=s+"";t?l=`<svg>${l}</svg>`:i&&(l=`<math>${l}</math>`);var c=Bh(l);if((t||i)&&(c=Ma(c)),Hs(Ma(c),c.lastChild),t||i)for(;Ma(c);)r.before(Ma(c));else r.before(c)}})}function kg(n,e,t,i,a){var o;var r=(o=e.$$slots)==null?void 0:o[t],s=!1;r===!0&&(r=e.children,s=!0),r===void 0||r(n,s?()=>i:i)}function il(n,e,t){gu(()=>{var i=U(()=>e(n,t==null?void 0:t())||{});if(t&&(i!=null&&i.update)){var a=!1,r={};no(()=>{var s=t();Gn(s),a&&du(r,s)&&(r=s,i.update(s))}),a=!0}if(i!=null&&i.destroy)return()=>i.destroy()})}const ed=[...` 	
\r\f¬†\v\uFEFF`];function Ug(n,e,t){var i=n==null?"":""+n;if(e&&(i=i?i+" "+e:e),t){for(var a in t)if(t[a])i=i?i+" "+a:a;else if(i.length)for(var r=a.length,s=0;(s=i.indexOf(a,s))>=0;){var o=s+r;(s===0||ed.includes(i[s-1]))&&(o===i.length||ed.includes(i[o]))?i=(s===0?"":i.substring(0,s))+i.substring(o+1):s=o}}return i===""?null:i}function Ig(n,e){return n==null?null:String(n)}function gt(n,e,t,i,a,r){var s=n.__className;if(s!==t||s===void 0){var o=Ug(t,i,r);o==null?n.removeAttribute("class"):n.className=o,n.__className=t}else if(r&&a!==r)for(var l in r){var c=!!r[l];(a==null||c!==!!a[l])&&n.classList.toggle(l,c)}return r}function ni(n,e,t,i){var a=n.__style;if(a!==e){var r=Ig(e);r==null?n.removeAttribute("style"):n.style.cssText=r,n.__style=e}return i}const Ng=Symbol("is custom element"),Og=Symbol("is html");function ks(n,e){var t=Hh(n);t.value===(t.value=e??void 0)||n.value===e&&(e!==0||n.nodeName!=="PROGRESS")||(n.value=e??"")}function un(n,e,t,i){var a=Hh(n);a[e]!==(a[e]=t)&&(e==="loading"&&(n[Dm]=t),t==null?n.removeAttribute(e):typeof t!="string"&&Fg(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Hh(n){return n.__attributes??(n.__attributes={[Ng]:n.nodeName.includes("-"),[Og]:n.namespaceURI===Zm})}var td=new Map;function Fg(n){var e=td.get(n.nodeName);if(e)return e;td.set(n.nodeName,e=[]);for(var t,i=n,a=Element.prototype;a!==i;){t=ah(i);for(var r in t)t[r].set&&e.push(r);i=iu(i)}return e}function Vh(n,e,t=e){var i=os(),a=new WeakSet;gg(n,"input",r=>{var s=r?n.defaultValue:n.value;if(s=Gl(n)?Hl(s):s,t(s),Gt!==null&&a.add(Gt),i&&s!==(s=e())){var o=n.selectionStart,l=n.selectionEnd;n.value=s??"",l!==null&&(n.selectionStart=o,n.selectionEnd=Math.min(l,n.value.length))}}),U(e)==null&&n.value&&(t(Gl(n)?Hl(n.value):n.value),Gt!==null&&a.add(Gt)),no(()=>{var r=e();if(n===document.activeElement){var s=Go??Gt;if(a.has(s))return}Gl(n)&&r===Hl(n.value)||n.type==="date"&&!r&&!n.value||r!==n.value&&(n.value=r??"")})}function Gl(n){var e=n.type;return e==="number"||e==="range"}function Hl(n){return n===""?null:+n}function nd(n,e){return n===e||(n==null?void 0:n[Ra])===e}function Za(n={},e,t,i){return gu(()=>{var a,r;return no(()=>{a=r,r=[],U(()=>{n!==t(...r)&&(e(n,...r),a&&nd(t(...a),n)&&e(null,...a))})}),()=>{hu(()=>{r&&nd(t(...r),n)&&e(null,...r)})}}),n}function Bg(n){return function(...e){var t=e[0];return t.stopPropagation(),n==null?void 0:n.apply(this,e)}}function nn(n=!1){const e=Bt,t=e.l.u;if(!t)return;let i=()=>Gn(e.s);if(n){let a=0,r={};const s=to(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==r[c]&&(r[c]=l[c],o=!0);return o&&a++,a});i=()=>_(s)}t.b.length&&_g(()=>{id(e,i),Jo(t.b)}),Lc(()=>{const a=U(()=>t.m.map(Cm));return()=>{for(const r of a)typeof r=="function"&&r()}}),t.a.length&&Lc(()=>{id(e,i),Jo(t.a)})}function id(n,e){if(n.l.s)for(const t of n.l.s)_(t);e()}function zg(n,e){var r;var t=(r=n.$$events)==null?void 0:r[e.type],i=eo(t)?t.slice():t==null?[]:[t];for(var a of i)a.call(this,e)}function xu(n,e,t){if(n==null)return e(void 0),t&&t(void 0),Ta;const i=U(()=>n.subscribe(e,t));return i.unsubscribe?()=>i.unsubscribe():i}const mr=[];function Gg(n,e){return{subscribe:Dt(n,e).subscribe}}function Dt(n,e=Ta){let t=null;const i=new Set;function a(o){if(du(n,o)&&(n=o,t)){const l=!mr.length;for(const c of i)c[1](),mr.push(c,n);if(l){for(let c=0;c<mr.length;c+=2)mr[c][0](mr[c+1]);mr.length=0}}}function r(o){a(o(n))}function s(o,l=Ta){const c=[o,l];return i.add(c),i.size===1&&(t=e(a,r)||Ta),o(n),()=>{i.delete(c),i.size===0&&t&&(t(),t=null)}}return{set:a,update:r,subscribe:s}}function Ri(n,e,t){const i=!Array.isArray(n),a=i?[n]:n;if(!a.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Gg(t,(s,o)=>{let l=!1;const c=[];let u=0,d=Ta;const p=()=>{if(u)return;d();const f=e(i?c[0]:c,s,o);r?s(f):d=typeof f=="function"?f:Ta},g=a.map((f,v)=>xu(f,h=>{c[v]=h,u&=~(1<<v),l&&p()},()=>{u|=1<<v}));return l=!0,p(),function(){Jo(g),d(),l=!1}})}function ei(n){let e;return xu(n,t=>e=t)(),e}let uo=!1,Uc=Symbol();function je(n,e,t){const i=t[e]??(t[e]={store:null,source:Ve(void 0),unsubscribe:Ta});if(i.store!==n&&!(Uc in t))if(i.unsubscribe(),i.store=n??null,n==null)i.source.v=void 0,i.unsubscribe=Ta;else{var a=!0;i.unsubscribe=xu(n,r=>{a?i.source.v=r:Se(i.source,r)}),a=!1}return n&&Uc in t?ei(n):_(i.source)}function Jt(){const n={};function e(){Mh(()=>{for(var t in n)n[t].unsubscribe();Ko(n,Uc,{enumerable:!1,value:!0})})}return[n,e]}function Hg(n){var e=uo;try{return uo=!1,[n(),uo]}finally{uo=e}}const Vg={get(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(gs(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i)return i[e]}},set(n,e,t){let i=n.props.length;for(;i--;){let a=n.props[i];gs(a)&&(a=a());const r=Aa(a,e);if(r&&r.set)return r.set(t),!0}return!1},getOwnPropertyDescriptor(n,e){let t=n.props.length;for(;t--;){let i=n.props[t];if(gs(i)&&(i=i()),typeof i=="object"&&i!==null&&e in i){const a=Aa(i,e);return a&&!a.configurable&&(a.configurable=!0),a}}},has(n,e){if(e===Ra||e===oh)return!1;for(let t of n.props)if(gs(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(n){const e=[];for(let t of n.props)if(gs(t)&&(t=t()),!!t){for(const i in t)e.includes(i)||e.push(i);for(const i of Object.getOwnPropertySymbols(t))e.includes(i)||e.push(i)}return e}};function Wg(...n){return new Proxy({props:n},Vg)}function _t(n,e,t,i){var b;var a=!ss||(t&jm)!==0,r=(t&qm)!==0,s=(t&Ym)!==0,o=i,l=!0,c=()=>(l&&(l=!1,o=s?U(i):i),o),u;if(r){var d=Ra in n||oh in n;u=((b=Aa(n,e))==null?void 0:b.set)??(d&&e in n?w=>n[e]=w:void 0)}var p,g=!1;r?[p,g]=Hg(()=>n[e]):p=n[e],p===void 0&&i!==void 0&&(p=c(),u&&(a&&Bm(),u(p)));var f;if(a?f=()=>{var w=n[e];return w===void 0?c():(l=!0,w)}:f=()=>{var w=n[e];return w!==void 0&&(o=void 0),w===void 0?o:w},a&&(t&Xm)===0)return f;if(u){var v=n.$$legacy;return(function(w,R){return arguments.length>0?((!a||!R||v||g)&&u(R?f():w),w):f()})}var h=!1,m=((t&$m)!==0?to:Ze)(()=>(h=!1,f()));r&&_(m);var M=pt;return(function(w,R){if(arguments.length>0){const P=R?_(m):a&&r?Br(w):w;return Se(m,P),h=!0,o!==void 0&&(o=P),w}return lr&&h||(M.f&or)!==0?m.v:_(m)})}function cr(n){Bt===null&&uu(),ss&&Bt.l!==null?jg(Bt).m.push(n):Lc(()=>{const e=U(n);if(typeof e=="function")return e})}function yu(n){Bt===null&&uu(),cr(()=>()=>U(n))}function $g(n,e,{bubbles:t=!1,cancelable:i=!1}={}){return new CustomEvent(n,{detail:e,bubbles:t,cancelable:i})}function ur(){const n=Bt;return n===null&&uu(),(e,t,i)=>{var r;const a=(r=n.s.$$events)==null?void 0:r[e];if(a){const s=eo(a)?a.slice():[a],o=$g(e,t,i);for(const l of s)l.call(n.x,o);return!o.defaultPrevented}return!0}}function jg(n){var e=n.l;return e.u??(e.u={a:[],b:[],m:[]})}const Xg="5";var th;typeof window<"u"&&((th=window.__svelte??(window.__svelte={})).v??(th.v=new Set)).add(Xg);tg();const Ot={activeTab:Dt("launch"),toggleModel:Dt("none"),isBootReady:Dt(!1),theme:Dt("dark")},Ic=Dt([]);function $t(n,e="normal",t=2500){const i=Date.now()+Math.random();Ic.update(a=>[...a,{id:i,message:n,type:e,duration:t}]),setTimeout(()=>{Ic.update(a=>a.filter(r=>r.id!==i))},t)}const Su=Dt({open:!1,title:"",message:"",buttons:[]});function Ws({title:n,message:e,buttons:t}){Su.set({open:!0,title:n,message:e,buttons:t})}function qg(){Su.update(n=>({...n,open:!1}))}const Yg={title:"Settings",tabs:{general:"General",game:"Game",mods:"Mods",launcher:"Launcher",storage:"Storage",developer:"Developer",about:"About"},general:{appearance:{label:"Appearance",theme:{label:"Theme",description:"Choose the theme of the launcher.",launcherStyle:{label:"Launcher Style",description:"Choose the style of the launcher. <br><strong>Standard style</strong> offers a modern look with multiple theme options, while <strong>Classic style</strong> provides a blocky Minecraft-inspired design.",standard:"Standard",minecraft:"Classic"},themes:{light:"Light",dark:"Dark",minimal:"Minimal","after-glow":"After Glow","retro-80s":"Retro 80s",oceanic:"Oceanic",pastel:"Pastel",classic:"Classic"}},language:{label:"Language",description:"Select the language for the launcher.",languages:{english:"English",bahasa:"Bahasa Indonesia",turkish:"T√ºrk√ße",french:"Fran√ßais",russian:"–†—É—Å—Å–∫–∏–π",spanish:"Espa√±ol"}}},startup:{label:"Startup",autoStart:"Auto Start",autoStartDescription:"Automatically launch the app when the system starts.",minimizeToTray:"Minimize to Tray on Close",minimizeToTrayDescription:"Start the app minimized to the system tray."}},game:{versions:"Versions",showSnapshots:"Show Snapshots versions of Minecraft",showSnapshotsDescription:"Show snapshot (beta/experimental) versions of Minecraft in the launcher.",performance:{label:"Performance",ramAllocation:"Ram allocation",ramAllocationDescription:"Set the amount of RAM allocated to the game. Minimum recommended Ram is at least 2GB for slow machines."},runtime:{label:"Runtime",javaPath:"Java path",javaPathDescription:"Specify the path to the Java executable.",gameArgs:"Game Arguments",gameArgsDescription:"Specify game arguments to launch the game (advanced users only).",gameArgsPlaceholder:"e.g. java -Xmx4G -jar minecraft.jar",jvmArguments:"JVM Arguments",jvmArgumentsDescription:"Set additional JVM arguments for advanced performance tuning.",jvmArgumentsPlaceholder:"e.g. -Xmx4G -XX:+UseG1GC",environmentVariables:"Environment Variables",environmentVariablesDescription:"Set environment variables for the runtime process.",environmentVariablesPlaceholder:"e.g. JAVA_HOME=/usr/lib/jvm/java-17",runDetached:"Run Detached",runDetachedDescription:"Run the game in detached mode, allowing the launcher to close while the game is still running.",verifyGameFiles:"Verify Game Files",verifyGameFilesDescription:"Verify game files integrity before launching.",verifyGameFilesWarning:"Warning: Enabling this option may increase launch time significantly and will delete all previous game progress.",intelEnabledMac:"Enable Intel Graphics on macOS",intelEnabledMacDescription:"Enable Intel graphics acceleration on macOS machines.",runAsAdmin:"Run as Administrator",runAsAdminDescription:"Launch the game with administrator privileges.",ignored:"Ignored Files",ignoredDescription:"Specify files or directories to ignore when verifying game files."},display:{label:"Display",resolution:"Resolution",fullscreen:"Fullscreen",resolutionDescription:"Set the resolution of the game window.",resolutions:{fullHD:"1920x1080 (Full HD)",quadHD:"2560x1440 (Quad HD)",ultraHD:"3840x2160 (4K UHD)",hd:"1366x768 (HD)",hdReady:"1280x720 (HD)",hdPlus:"1600x900 (HD+)",wxgaPlus:"1440x900 (WXGA+)",xga:"1024√ó768 (XGA)"}}},launcher:{updates:"Updates",checkForUpdates:"Check for updates",checkForUpdatesDescription:"Check for new launcher updates on startup.",integration:{label:"Integration",discordRPC:"Discord Rich Presence",discordRPCDescription:"Enable or disable Discord Rich Presence integration."},notification:{label:"Notifications",systemNotifications:"System Notifications",systemNotificationsDescription:"Show native system notifications.",showUpdateNotification:"Show Notification for Updates",showUpdateNotificationDescription:"Show update notifications.",playSound:"Play sound",playSoundDescription:"Play a sound when notifications appear.",categories:{label:"Notification Categories",description:"Choose which types of notifications to show.",updates:"Updates",launches:"Game Launches",downloads:"Downloads",errors:"Errors",general:"General"}}},storage:{folders:"Folders",launcherFolder:"Launcher folder",launcherFolderDescription:"The directory where launcher is installed.",minecraftFolder:"Minecraft folder",minecraftFolderDescription:"The directory where Minecraft is installed.",modFolder:"Mod folder",modFolderDescription:"The directory where mods are installed."},developer:{debug:"Debug",enableDevTools:"Enable DevTools",enableDevToolsDescription:"Enable developer tools for debugging.",experimental:"Experimental",allowBetaFeatures:"Allow Beta features",allowBetaFeaturesDescription:"Enable experimental launcher features."},about:{version:"Version",checkForUpdates:"Check for Updates",credits:"Credits",developedBy:'Developed and crafted with üíñ by <b class="credit-owner-text">Cosmic</b>&nbsp;&&nbsp;<b class="credit-owner-text">Olly</b>',specialThanks:"Special thanks to all contributors and testers.",openSourceLibraries:"Open Source Libraries",extraOpenSourceLibrariesDescription:"Other open source libraries used in this project.",apisUsed:"APIs Used",sourceCode:"Source Code",donate:"Like the project!",donateButton:"Buy me a coffee",donateDescription:"If you like this project, consider buying me a coffee to support development!",contributors:"Contributors",disclaimer:"Disclaimer",disclaimerDescription:"This launcher is an independent project and is not affiliated with Mojang, Microsoft, or any official Minecraft entity. All trademarks and copyrights belong to their respective owners.",devUnlockedMessage:"Developer mode activated! üòπ",alreadyADevMessage:"You are already a developer! üòπ"},buttons:{resetToDefault:"Reset to default",close:"Close",save:"Save",cancel:"Cancel",browse:"Browse",select:"Select"}},Kg={loading:"LOADING",description:"Please wait while the process completes.",closeNote:"You can close the active window to stop this process"},Jg={playersOnline:"Players online now",supportProject:"Support Project",console:"Console",minimize:"Minimize",closeApp:"Close App",manageAccounts:"Manage Accounts",addAccount:"Add Account",adCredit:"Powered by Beam-i",social:{github:"Github",discord:"Discord",twitter:"Twitter"},launch:{label:"Launch",launching:"Launching",cancel:"Cancel",closeGame:"Close Game",launchStatus:{preparing:"Preparing",downloading:"Downloading",launching:"Launching",patching:"Patching",libraries:"Libraries",assets:"Assets",waiting:"Waiting",retrying:"Retrying",extracting:"Extracting Files",verifying:"Verifying Files",ready:"Game ready",running:"Game Running",launchFailed:"Launch failed, please try again later!",error:"Launch Failed",cancelled:"Launch cancelled"},changeVersion:"Change Version",gameTypes:{vanilla:"Vanilla",forge:"Forge",fabric:"Fabric"},versionTypes:{release:"Release",stable:"Stable",mc:"MC"}}},Zg={buttons:{play:"Play",home:"Home",accountManager:"Account Manager",instanceManager:"Instance Manager",mods:"Mods (Coming soon)",quickServers:"Quick Servers (Coming soon)"},settings:"Settings"},Qg={selectAccountType:"Select Account Type",close:"Close",addMinecraftAccount:"Microsoft Account",addMinecraftAccountDescription:"Add your official Minecraft account to play online. (Requires a valid Mojang or Microsoft account.)",addOfflineAccount:"Offline Account",addOfflineAccountDescription:"Play on unofficial or cracked servers without a Minecraft account. (Progress and skins will not sync across devices.)",offlineAccountForm:{enterUsername:"Enter a username to create an offline Minecraft account. This account will only work on unofficial servers.",usernamePlaceholder:"Enter username (3-16 characters, a-z, 0-9, _)",usernameRequired:"Username is required",usernameTooShort:"Username must be at least 3 characters long",usernameTooLong:"Username must be 16 characters or less",usernameInvalidCharacters:"Username can only contain letters, numbers, and underscores",cancel:"Cancel",save:"Save",saving:"Saving..."},accountAdded:"Account added!",failedToAddAccount:"Failed to add account. Please try again."},ev={defaultTitle:"Dialog Title",defaultMessage:"Dialog message goes here.",ok:"OK",no:"No",nevermind:"Nevermind",yes:"Yes",cancel:"Cancel",continue:"Continue",confirm:"Confirm",retry:"Retry",titles:{deleteAccount:"Remove Account?",apiError:"API Error",apiUnreachable:"API Unreachable",selectFolder:"Select a Folder",gamePreparing:"Game is preparing to launch.",gameRunning:"A another instance is already running.",addMinecraftAccount:"Add Minecraft Account",saveSkin:"Save Skin"},messages:{deleteAccount:"Are you sure you want to remove this account?",apiError:"An error occurred while connecting to the API. Please try again later.",apiUnreachable:"The API server is unreachable. Please check your internet connection and try again.",gamePreparingCancelMessage:"An instance is currently being prepared for launch. You must cancel the current launch process before selecting a different instance. Would you like to cancel the launch?",gameRunningCancelMessage:"An instance is currently running. You must close the game before selecting a different instance. Would you like to close the game?"},fileTypes:{pngImages:"PNG Images",allFiles:"All Files"}},tv={loading:"Loading",description:"Please wait while the process completes.",closeNote:"You can close the active window to stop this process"},nv={defaultMessage:"Something just happened!",launchError:"Something went wrong while launching the game. Please try again later.",noSkinAvailable:"No skin available to download",skinSaved:"Skin saved successfully!",skinSaveFailed:"Failed to save skin"},iv={title:"Account Manager",description:"Manage your Minecraft accounts here. Switch between profiles and remove accounts to personalize your play experience.",deleteAccountTitle:"Remove Account?",deleteAccountMessage:"Are you sure you want to remove this account?",cancel:"Cancel",delete:"Delete",removeAccount:"Remove account",removeAccountAriaLabel:"Remove account",accountRefreshedSuccessfully:"Account refreshed successfully",accountRefreshFailed:"Failed to refresh account",refreshAccount:"Refresh account",minecraft:"Minecraft",cracked:"Cracked",playtime:"Playtime"},av={minecraftVersion:"Minecraft",versionSummary:"Select your preferred Minecraft version and variant.",closeButton:"Close Button",closeButtonAriaLabel:"Close Button"},rv={clearLogs:"Clear",welcome:"Welcome to OriLauncher Console",description:"This console will display launcher activities and game logs",ready:"Console ready for use",levels:{debug:"Debug (All)",info:"Info",warning:"Warning",error:"Error"},loggerTestMessage:"Logger test message",levelChanged:"Level changed to {level}",somethingWentWrong:"Something went wrong"},sv={selectPlaceholder:"Select",levels:{debug:"Debug (All)",info:"Info",warning:"Warning",error:"Error"},clear:"Clear"},ov={title:"Instance Manager",home:"Home",description:"Manage your Minecraft instances here. Create, edit, and delete instances to personalize your play experience.",createInstance:"Create Instance",createInstanceAriaLabel:"Create Instance",editInstance:"Edit Instance",editInstanceAriaLabel:"Edit Instance",deleteInstance:"Delete Instance",deleteInstanceAriaLabel:"Delete Instance",instanceName:"Instance Name",instanceNamePlaceholder:"Enter instance name",instanceNameRequired:"Instance name is required",instanceNameTooShort:"Instance name must be at least 3 characters long",instanceNameTooLong:"Instance name must be 16 characters or less",instanceNameInvalidCharacters:"Instance name can only contain letters, numbers, and underscores",cancel:"Cancel",save:"Save",version:{label:"Available version",description:"Select the version of Minecraft to use for this instance.",versionTypes:{vanilla:{name:"Vanilla",description:"Experience vanilla Minecraft with enhanced performance, improved gameplay mechanics, and exciting new features. Play the pure, unmodified version of the game as intended by Mojang."},forge:{name:"Forge",description:"Play with Forge mods for enhanced gameplay, new items, blocks, and mechanics. Access thousands of community-created modifications to transform your Minecraft experience."},fabric:{name:"Fabric",description:"Experience lightweight and fast modding with Fabric. Enjoy performance optimizations, modern mods, and quick updates to the latest Minecraft versions."}}}},lv={browse:"Browse",pick:"Select Folder",noFolderSelected:"No folder selected"},cv={defaultUsername:"MHF_Steve",animations:{idle:"Idle",walking:"Walking",running:"Running",crouch:"Crouch",waving:"Waving"},viewModes:{"2d":"2D View","3d":"3D View"},playPause:"Play/Pause",saveSkin:"Save skin",toggleView:"Toggle 2D/3D View",playAnimation:"play-animation",saveSkinAriaLabel:"save-skin",noSkinAvailable:"No skin available to download",skinSavedSuccessfully:"Skin saved successfully!",failedToSaveSkin:"Failed to save skin"},uv={languageSet:"Language set to: {language}",discordRPCEnabled:"Discord RPC enabled.",notificationSoundsEnabled:"Notification sounds enabled.",loadingSettings:"Loading settings...",buildingVersions:"Building versions...",checkingForUpdates:"Checking for updates...",skippingUpdateCheck:"Skipping update check...",initializingServices:"Initializing services...",refreshingAccounts:"Refreshing accounts...",accountsValidated:"Accounts validated",fetchingServerList:"Fetching server list...",preparingLauncher:"Preparing launcher...",checkingAPIStatus:"Checking API status...",apiFetch:{wakingUpServer:"Waking up API server...",wakeup1:"Poking the server with a stick to wake it up...",wakeup2:"Politely asking the server to rise and shine...",wakeup3:"Bribing the server with virtual coffee...",wakeup4:"Sending a wake-up call to the server...",wakeup5:"Whispering 'good morning' to the server...",wakeup6:"Tickling the server's circuits...",wakeup7:"Playing loud music to get the server moving..."},debugger:{addingEventListeners:"[MAIN CONTENT] Adding new event listeners",eventSetupComplete:"[MAIN CONTENT] Event setup complete. Total cleanup functions"},apiUnreachable:"API unreachable. Some features might not work properly.",ready:"Ready!"},dv={connectionLost:"Connection lost!",connectionRestored:"Connection restored"},fv={oriLauncher:"Ori Launcher",retrieve:"Retrieve",checkForUpdates:"Check for Updates",quit:"Quit",tooltip:"Ori Launcher"},hv={inLauncher:"In Launcher",browsing:"Browsing",idle:"Idle",minecraft:"Minecraft",downloading:"Downloading",downloadOriLauncher:"Download Ori Launcher"},pv={updateAvailable:"Update Available",updateAvailableMessage:"OriLauncher is now available!",updateNow:"Update Now",later:"Later",gameLaunched:"Game Launched",gameLaunchedMessage:"Minecraft started successfully!",launchFailed:"Launch Failed",launchFailedMessage:"Failed to start Minecraft, please try again later.",downloadComplete:"Download Complete",downloadCompleteMessage:"Download completed successfully!",connectionLost:"Connection Lost",connectionLostMessage:"Lost connection to servers. Retrying...",connectionRestored:"Connection Restored",connectionRestoredMessage:"Connection restored. You can now play Minecraft again.",launcherRestartRequired:"Launcher restart required",launcherRestartRequiredMessage:"A restart of the launcher is required for the changes to take effect."},mv={noAccountSelected:"No account selected",invalidOnlineCredentials:"Invalid online account credentials",noVersionSelected:"No Minecraft version selected",noMinecraftDirectory:"Minecraft directory not specified",memoryConfiguration:"Minimum memory must be less than maximum memory",memoryExceedsSystem:"Maximum memory exceeds system memory",launchInProgress:"Launch already in progress",accountRefreshFailed:"Failed to refresh account after retry",apiNotReachable:"Failed to fetch news"},gv={minimizeApp:"minimize-app",closeApp:"close-app",changeVersion:"Change version",rssBtn:"rss-btn",patreon:"patreon",settings:"Settings"},vv={enterName:"Enter name here good sir..."},_v={settings:Yg,invoker:Kg,mainContent:Jg,sidebar:Zg,accountAdder:Qg,dialog:ev,splash:tv,toast:nv,accountManager:iv,versionSelector:av,console:rv,customOptions:sv,instanceManager:ov,folderPicker:lv,skinViewer:cv,logs:uv,connection:dv,tray:fv,discordRPC:hv,notifications:pv,errors:mv,ariaLabels:gv,placeholders:vv},bv={title:"Param√®tres",tabs:{general:"G√©n√©ral",game:"Jeu",mods:"Mods",launcher:"Lanceur",storage:"Stockage",developer:"D√©veloppeur",about:"√Ä propos"},general:{appearance:{label:"Apparence",theme:{label:"Th√®me",description:"Choisissez le th√®me du lanceur.",launcherStyle:{label:"Style du Lanceur",description:"Choisissez le style du lanceur. <br><strong>Style standard</strong> offre un look moderne avec plusieurs options de th√®me, tandis que <strong>Style classique</strong> fournit un design inspir√© de Minecraft.",standard:"Standard",minecraft:"Classique"},themes:{light:"Clair",dark:"Sombre",minimal:"Minimal","after-glow":"After Glow","retro-80s":"R√©tro ann√©es 80",oceanic:"Oc√©anique",pastel:"Pastel",classic:"Classique"}},language:{label:"Langue",description:"S√©lectionnez la langue pour le lanceur.",languages:{english:"English",bahasa:"Bahasa Indonesia",turkish:"T√ºrk√ße",french:"Fran√ßais",russian:"–†—É—Å—Å–∫–∏–π",spanish:"Espa√±ol"}}},startup:{label:"D√©marrage",autoStart:"D√©marrage automatique",autoStartDescription:"Lance automatiquement l'application au d√©marrage du syst√®me.",minimizeToTray:"R√©duire dans la zone de notification √† la fermeture",minimizeToTrayDescription:"D√©marre l'application r√©duite dans la barre syst√®me."}},game:{versions:"Versions",showSnapshots:"Afficher les versions Snapshot de Minecraft",showSnapshotsDescription:"Afficher les versions snapshot (b√™ta/exp√©rimentales) de Minecraft dans le lanceur.",performance:{label:"Performance",ramAllocation:"Allocation de RAM",ramAllocationDescription:"D√©finissez la quantit√© de RAM allou√©e au jeu. Minimum recommand√© : au moins 2 Go pour les machines lentes."},runtime:{label:"Ex√©cution",javaPath:"Chemin Java",javaPathDescription:"Sp√©cifiez le chemin vers l'ex√©cutable Java.",gameArgs:"Arguments du Jeu",gameArgsDescription:"Sp√©cifiez les arguments du jeu pour lancer le jeu (utilisateurs avanc√©s uniquement).",gameArgsPlaceholder:"ex: java -Xmx4G -jar minecraft.jar",jvmArguments:"Arguments JVM",jvmArgumentsDescription:"D√©finissez des arguments JVM suppl√©mentaires pour un r√©glage avanc√© des performances.",jvmArgumentsPlaceholder:"ex: -Xmx4G -XX:+UseG1GC",environmentVariables:"Variables d'environnement",environmentVariablesDescription:"D√©finissez les variables d'environnement pour le processus d'ex√©cution.",environmentVariablesPlaceholder:"ex: JAVA_HOME=/usr/lib/jvm/java-17",runDetached:"Ex√©cution D√©tach√©e",runDetachedDescription:"Ex√©cuter le jeu en mode d√©tach√©, permettant de fermer le lanceur pendant que le jeu fonctionne encore.",verifyGameFiles:"V√©rifier les Fichiers du Jeu",verifyGameFilesDescription:"V√©rifier l'int√©grit√© des fichiers du jeu avant le lancement.",verifyGameFilesWarning:"Attention : Activer cette option peut augmenter consid√©rablement le temps de lancement et supprimera tous les progr√®s de jeu pr√©c√©dents.",intelEnabledMac:"Activer Intel Graphics sur macOS",intelEnabledMacDescription:"Activer l'acc√©l√©ration graphique Intel sur les machines macOS.",runAsAdmin:"Ex√©cuter en tant qu'administrateur",runAsAdminDescription:"Lance le jeu avec des privil√®ges administrateur.",ignored:"Fichiers Ignor√©s",ignoredDescription:"Sp√©cifiez les fichiers ou r√©pertoires √† ignorer lors de la v√©rification des fichiers du jeu."},display:{label:"Affichage",resolution:"R√©solution",fullscreen:"Plein √âcran",resolutionDescription:"D√©finir la r√©solution de la fen√™tre de jeu.",resolutions:{fullHD:"1920x1080 (Full HD)",quadHD:"2560x1440 (Quad HD)",ultraHD:"3840x2160 (4K UHD)",hd:"1366x768 (HD)",hdReady:"1280x720 (HD)",hdPlus:"1600x900 (HD+)",wxgaPlus:"1440x900 (WXGA+)",xga:"1024√ó768 (XGA)"}}},launcher:{updates:"Mises √† jour",checkForUpdates:"V√©rifier les mises √† jour",checkForUpdatesDescription:"V√©rifie les mises √† jour du lanceur au d√©marrage.",integration:{label:"Int√©gration",discordRPC:"Discord Rich Presence",discordRPCDescription:"Activer ou d√©sactiver l'int√©gration Discord Rich Presence."},notification:{label:"Notifications",systemNotifications:"Notifications Syst√®me",systemNotificationsDescription:"Afficher les notifications syst√®me natives.",showUpdateNotification:"Afficher les notifications de mises √† jour",showUpdateNotificationDescription:"Afficher les notifications de mise √† jour.",playSound:"Jouer un son",playSoundDescription:"Jouer un son lorsque les notifications apparaissent.",categories:{label:"Cat√©gories de Notifications",description:"Choisissez les types de notifications √† afficher.",updates:"Mises √† jour",launches:"Lancements de Jeu",downloads:"T√©l√©chargements",errors:"Erreurs",general:"G√©n√©ral"}}},storage:{folders:"Dossiers",launcherFolder:"Dossier du lanceur",launcherFolderDescription:"D√©finir le r√©pertoire o√π le lanceur est install√©.",minecraftFolder:"Dossier Minecraft",minecraftFolderDescription:"D√©finir le r√©pertoire o√π Minecraft est install√©.",modFolder:"Dossier des mods",modFolderDescription:"D√©finir le r√©pertoire o√π les mods sont install√©s."},developer:{debug:"D√©bogage",enableDevTools:"Activer DevTools",enableDevToolsDescription:"Activer les outils d√©veloppeur pour le d√©bogage.",experimental:"Exp√©rimental",allowBetaFeatures:"Autoriser les fonctionnalit√©s b√™ta",allowBetaFeaturesDescription:"Activer les fonctionnalit√©s exp√©rimentales du lanceur."},about:{version:"Version",checkForUpdates:"V√©rifier les mises √† jour",credits:"Cr√©dits",developedBy:'D√©velopp√© et cr√©√© avec üíñ par <b class="credit-owner-text">Cosmic</b>&nbsp;&&nbsp;<b class="credit-owner-text">Olly</b>',specialThanks:"Remerciements sp√©ciaux √† tous les contributeurs et testeurs.",openSourceLibraries:"Biblioth√®ques Open Source",extraOpenSourceLibrariesDescription:"Autres biblioth√®ques open source utilis√©es dans ce projet.",apisUsed:"APIs utilis√©es",sourceCode:"Code Source",donate:"Faire un don !",donateButton:"M'offrir un caf√©",donateDescription:"Si vous aimez ce projet, pensez √† faire un don pour soutenir le d√©veloppement !",contributors:"Contributeurs",disclaimer:"Clause de non-responsabilit√©",disclaimerDescription:"Ce lanceur est un projet ind√©pendant et n'est affili√© ni √† Mojang, ni √† Microsoft, ni √† aucune entit√© officielle de Minecraft. Toutes les marques et droits d'auteur appartiennent √† leurs propri√©taires respectifs.",devUnlockedMessage:"Mode d√©veloppeur activ√© ! üòπ",alreadyADevMessage:"Vous √™tes d√©j√† un d√©veloppeur ! üòπ"},buttons:{resetToDefault:"R√©initialiser par d√©faut",close:"Fermer",save:"Enregistrer",cancel:"Annuler",browse:"Parcourir",select:"S√©lectionner"}},xv={loading:"CHARGEMENT",description:"Veuillez patienter pendant le processus.",closeNote:"Vous pouvez fermer la fen√™tre active pour arr√™ter ce processus"},yv={playersOnline:"Joueurs en ligne maintenant",supportProject:"Soutenir le projet",console:"Console",minimize:"R√©duire",closeApp:"Fermer l'application",manageAccounts:"G√©rer les comptes",addAccount:"Ajouter un compte",adCredit:"Propuls√© par Beam-i",social:{github:"Github",discord:"Discord",twitter:"Twitter"},launch:{label:"Lancer",launching:"Lancement",cancel:"Annuler",closeGame:"Fermer le Jeu",launchStatus:{preparing:"Pr√©paration",downloading:"T√©l√©chargement",launching:"Lancement",patching:"Application du patch",libraries:"Biblioth√®ques",assets:"Ressources",waiting:"En attente",retrying:"Nouvel essai",extracting:"Extraction des Fichiers",verifying:"V√©rification des Fichiers",ready:"Jeu pr√™t",running:"Jeu en Cours",launchFailed:"√âchec du lancement, veuillez r√©essayer plus tard !",error:"√âchec du Lancement",cancelled:"Lancement annul√©"},changeVersion:"Changer la Version",gameTypes:{vanilla:"Vanilla",forge:"Forge",fabric:"Fabric"},versionTypes:{release:"Release",stable:"Stable",mc:"MC"}}},Sv={buttons:{play:"Jouer",home:"Accueil",accountManager:"Gestionnaire de Comptes",instanceManager:"Gestionnaire d'Instances",mods:"Mods (Bient√¥t disponible)",quickServers:"Serveurs rapides (Bient√¥t disponible)"},settings:"Param√®tres"},Mv={selectAccountType:"S√©lectionnez le type de compte",close:"Fermer",addMinecraftAccount:"Compte Microsoft",addMinecraftAccountDescription:"Ajoutez votre compte Minecraft officiel pour jouer en ligne. (N√©cessite un compte Mojang ou Microsoft valide.)",addOfflineAccount:"Compte hors ligne",addOfflineAccountDescription:"Jouez sur des serveurs non officiels ou pirat√©s sans compte Minecraft. (La progression et les skins ne seront pas synchronis√©s entre les appareils.)",offlineAccountForm:{enterUsername:"Entrez un nom d'utilisateur pour cr√©er un compte hors ligne. Ce compte fonctionnera uniquement sur des serveurs non officiels.",usernamePlaceholder:"Entrez le nom d'utilisateur (3-16 caract√®res, a-z, 0-9, _)",usernameRequired:"Le nom d'utilisateur est requis",usernameTooShort:"Le nom d'utilisateur doit contenir au moins 3 caract√®res",usernameTooLong:"Le nom d'utilisateur doit contenir 16 caract√®res ou moins",usernameInvalidCharacters:"Le nom d'utilisateur ne peut contenir que des lettres, des chiffres et des traits de soulignement",cancel:"Annuler",save:"Enregistrer",saving:"Enregistrement..."},accountAdded:"Compte ajout√© !",failedToAddAccount:"√âchec de l'ajout du compte. Veuillez r√©essayer."},Ev={defaultTitle:"Titre de la bo√Æte de dialogue",defaultMessage:"Le message de la bo√Æte de dialogue appara√Æt ici.",ok:"OK",no:"Non",nevermind:"Peu importe",yes:"Oui",cancel:"Annuler",continue:"Continuer",confirm:"Confirmer",retry:"R√©essayer",titles:{deleteAccount:"Supprimer le compte ?",apiError:"Erreur API",apiUnreachable:"API inaccessible",selectFolder:"S√©lectionner un Dossier",gamePreparing:"Le jeu se pr√©pare √† se lancer. Veuillez patienter.",addMinecraftAccount:"Ajouter un Compte Minecraft",saveSkin:"Enregistrer le Skin"},messages:{deleteAccount:"√ätes-vous s√ªr de vouloir supprimer ce compte ?",apiError:"Une erreur s'est produite lors de la connexion √† l'API. Veuillez r√©essayer plus tard.",apiUnreachable:"Le serveur API est inaccessible. Veuillez v√©rifier votre connexion Internet et r√©essayer.",gamePreparingCancelMessage:"Le jeu est actuellement en cours de pr√©paration pour le lancement. Vous devez annuler le processus de lancement actuel avant de s√©lectionner une instance diff√©rente. Souhaitez-vous annuler le lancement ?"},fileTypes:{pngImages:"Images PNG",allFiles:"Tous les Fichiers"}},wv={loading:"Chargement",description:"Veuillez patienter pendant le processus.",closeNote:"Vous pouvez fermer la fen√™tre active pour arr√™ter ce processus"},Av={defaultMessage:"Quelque chose vient de se passer !",launchError:"Une erreur s'est produite lors du lancement du jeu. Veuillez r√©essayer plus tard.",noSkinAvailable:"Aucun skin disponible au t√©l√©chargement",skinSaved:"Skin enregistr√© avec succ√®s !",skinSaveFailed:"√âchec de l'enregistrement du skin"},Tv={title:"Gestionnaire de comptes",description:"G√©rez vos comptes Minecraft ici. Changez de profil et supprimez des comptes pour personnaliser votre exp√©rience de jeu.",deleteAccountTitle:"Supprimer le compte ?",deleteAccountMessage:"√ätes-vous s√ªr de vouloir supprimer ce compte ?",cancel:"Annuler",delete:"Supprimer",removeAccount:"Supprimer le compte",removeAccountAriaLabel:"Supprimer le compte",minecraft:"Minecraft",cracked:"Pirate",playtime:"Temps de jeu"},Rv={minecraftVersion:"Minecraft",versionSummary:"S√©lectionnez votre version et variante Minecraft pr√©f√©r√©e.",closeButton:"Bouton Fermer",closeButtonAriaLabel:"Bouton Fermer"},Cv={clearLogs:"Effacer",welcome:"Bienvenue dans la Console OriLauncher",description:"Cette console affichera les activit√©s du lanceur et les journaux du jeu",ready:"Console pr√™te √† l'utilisation",levels:{debug:"Debug (Tout)",info:"Info",warning:"Avertissement",error:"Erreur"},loggerTestMessage:"Message de test du journal",levelChanged:"Niveau chang√© en {level}",somethingWentWrong:"Une erreur est survenue"},Pv={selectPlaceholder:"S√©lectionner",levels:{debug:"Debug (Tout)",info:"Info",warning:"Avertissement",error:"Erreur"},clear:"Effacer"},Lv={title:"Gestionnaire d'Instances",home:"Accueil",description:"G√©rez vos instances Minecraft ici. Cr√©ez, modifiez et supprimez des instances pour personnaliser votre exp√©rience de jeu.",createInstance:"Cr√©er une Instance",createInstanceAriaLabel:"Cr√©er une Instance",editInstance:"Modifier l'Instance",editInstanceAriaLabel:"Modifier l'Instance",deleteInstance:"Supprimer l'Instance",deleteInstanceAriaLabel:"Supprimer l'Instance",instanceName:"Nom de l'Instance",instanceNamePlaceholder:"Entrez le nom de l'instance",instanceNameRequired:"Le nom de l'instance est requis",instanceNameTooShort:"Le nom de l'instance doit comporter au moins 3 caract√®res",instanceNameTooLong:"Le nom de l'instance ne doit pas d√©passer 16 caract√®res",instanceNameInvalidCharacters:"Le nom de l'instance ne peut contenir que des lettres, des chiffres et des tirets bas",cancel:"Annuler",save:"Enregistrer",version:{label:"Version disponible",description:"S√©lectionnez la version de Minecraft √† utiliser pour cette instance.",versionTypes:{vanilla:{name:"Vanilla",description:"D√©couvrez Minecraft vanilla avec des performances am√©lior√©es, des m√©caniques de gameplay perfectionn√©es et de nouvelles fonctionnalit√©s passionnantes. Jouez √† la version pure et non modifi√©e du jeu comme pr√©vu par Mojang."},forge:{name:"Forge",description:"Jouez avec les mods Forge pour un gameplay am√©lior√©, de nouveaux objets, blocs et m√©caniques. Acc√©dez √† des milliers de modifications cr√©√©es par la communaut√© pour transformer votre exp√©rience Minecraft."},fabric:{name:"Fabric",description:"Profitez d'un modding l√©ger et rapide avec Fabric. B√©n√©ficiez d'optimisations de performances, de mods modernes et de mises √† jour rapides vers les derni√®res versions de Minecraft."}}}},Dv={browse:"Parcourir",pick:"S√©lectionner un Dossier",noFolderSelected:"Aucun dossier s√©lectionn√©"},kv={defaultUsername:"MHF_Steve",animations:{idle:"Inactif",walking:"Marche",running:"Course",crouch:"Accroupi",waving:"Saluer"},viewModes:{"2d":"Vue 2D","3d":"Vue 3D"},playPause:"Lecture/Pause",saveSkin:"Enregistrer le skin",toggleView:"Basculer Vue 2D/3D",playAnimation:"jouer-animation",saveSkinAriaLabel:"enregistrer-skin"},Uv={languageSet:"Langue d√©finie sur : {language}",discordRPCEnabled:"Discord RPC activ√©.",notificationSoundsEnabled:"Sons de notification activ√©s.",loadingSettings:"Chargement des param√®tres...",buildingVersions:"Construction des versions...",checkingForUpdates:"V√©rification des mises √† jour...",skippingUpdateCheck:"Ignorer la v√©rification des mises √† jour...",initializingServices:"Initialisation des services...",refreshingAccounts:"Actualisation des comptes...",accountsValidated:"Comptes valid√©s",fetchingServerList:"R√©cup√©ration de la liste des serveurs...",preparingLauncher:"Pr√©paration du lanceur...",checkingAPIStatus:"V√©rification du statut de l'API...",apiFetch:{wakingUpServer:"R√©veil du serveur API...",wakeup1:"Piquer le serveur avec un b√¢ton pour le r√©veiller...",wakeup2:"Demander poliment au serveur de se lever et briller...",wakeup3:"Soudoyer le serveur avec du caf√© virtuel...",wakeup4:"Envoyer un r√©veil au serveur...",wakeup5:"Chuchoter 'bonjour' au serveur...",wakeup6:"Chatouiller les circuits du serveur...",wakeup7:"Jouer de la musique forte pour faire bouger le serveur..."},debugger:{addingEventListeners:"[MAIN CONTENT] Ajout de nouveaux √©couteurs d'√©v√©nements",eventSetupComplete:"[MAIN CONTENT] Configuration des √©v√©nements termin√©e. Total des fonctions de nettoyage"},apiUnreachable:"API inaccessible. Certaines fonctionnalit√©s peuvent ne pas fonctionner correctement.",ready:"Pr√™t !"},Iv={connectionLost:"Connexion perdue !",connectionRestored:"Connexion r√©tablie"},Nv={oriLauncher:"Ori Launcher",retrieve:"R√©cup√©rer",checkForUpdates:"V√©rifier les Mises √† Jour",quit:"Quitter",tooltip:"Ori Launcher"},Ov={inLauncher:"Dans le Lanceur",browsing:"Navigation",idle:"Inactif",minecraft:"Minecraft",downloading:"T√©l√©chargement",downloadOriLauncher:"T√©l√©charger Ori Launcher"},Fv={updateAvailable:"Mise √† Jour Disponible",updateAvailableMessage:"OriLauncher est maintenant disponible !",updateNow:"Mettre √† Jour Maintenant",later:"Plus Tard",gameLaunched:"Jeu Lanc√©",gameLaunchedMessage:"Minecraft a d√©marr√© avec succ√®s !",launchFailed:"√âchec du Lancement",launchFailedMessage:"√âchec du d√©marrage de Minecraft, veuillez r√©essayer plus tard.",downloadComplete:"T√©l√©chargement Termin√©",downloadCompleteMessage:"T√©l√©chargement termin√© avec succ√®s !",connectionLost:"Connexion Perdue",connectionLostMessage:"Connexion perdue avec les serveurs. Nouvelle tentative...",connectionRestored:"Connexion R√©tablie",connectionRestoredMessage:"Connexion r√©tablie. Vous pouvez maintenant jouer √† Minecraft √† nouveau.",launcherRestartRequired:"Red√©marrage du lanceur requis",launcherRestartRequiredMessage:"Un red√©marrage du lanceur est requis pour que les modifications prennent effet."},Bv={noAccountSelected:"Aucun compte s√©lectionn√©",invalidOnlineCredentials:"Identifiants de compte en ligne invalides",noVersionSelected:"Aucune version de Minecraft s√©lectionn√©e",noMinecraftDirectory:"R√©pertoire Minecraft non sp√©cifi√©",memoryConfiguration:"La m√©moire minimum doit √™tre inf√©rieure √† la m√©moire maximum",memoryExceedsSystem:"La m√©moire maximum d√©passe la m√©moire syst√®me",launchInProgress:"Lancement d√©j√† en cours",accountRefreshFailed:"√âchec de l'actualisation du compte apr√®s nouvelle tentative",apiNotReachable:"√âchec de la r√©cup√©ration des actualit√©s"},zv={minimizeApp:"r√©duire-app",closeApp:"fermer-app",changeVersion:"Changer la version",rssBtn:"bouton-rss",patreon:"patreon",settings:"Param√®tres"},Gv={enterName:"Entrez le nom ici mon bon monsieur..."},Hv={versionTypes:{vanilla:{name:"Vanilla",description:"D√©couvrez Minecraft vanilla avec des performances am√©lior√©es, des m√©caniques de gameplay perfectionn√©es et de nouvelles fonctionnalit√©s passionnantes. Jouez √† la version pure et non modifi√©e du jeu comme pr√©vu par Mojang."},forge:{name:"Forge",description:"Jouez avec les mods Forge pour un gameplay am√©lior√©, de nouveaux objets, blocs et m√©caniques. Acc√©dez √† des milliers de modifications cr√©√©es par la communaut√© pour transformer votre exp√©rience Minecraft."},fabric:{name:"Fabric",description:"D√©couvrez le modding l√©ger et rapide avec Fabric. Profitez d'optimisations de performance, de mods modernes et de mises √† jour rapides vers les derni√®res versions de Minecraft."}}},Vv={settings:bv,invoker:xv,mainContent:yv,sidebar:Sv,accountAdder:Mv,dialog:Ev,splash:wv,toast:Av,accountManager:Tv,versionSelector:Rv,console:Cv,customOptions:Pv,instanceManager:Lv,folderPicker:Dv,skinViewer:kv,logs:Uv,connection:Iv,tray:Nv,discordRPC:Ov,notifications:Fv,errors:Bv,ariaLabels:zv,placeholders:Gv,version:Hv},Wv={title:"Pengaturan",tabs:{general:"Umum",game:"Game",mods:"Mod",launcher:"Peluncur",storage:"Penyimpanan",developer:"Pengembang",about:"Tentang"},general:{appearance:{label:"Tampilan",theme:{label:"Tema",description:"Pilih tema peluncur.",launcherStyle:{label:"Gaya Peluncur",description:"Pilih gaya peluncur. <br><strong>Gaya Standar</strong> menawarkan tampilan modern dengan beberapa opsi tema, sementara <strong>Gaya Klasik</strong> menyediakan desain bergaya Minecraft yang berbentuk kotak.",standard:"Standar",minecraft:"Klasik"},themes:{light:"Terang",dark:"Gelap",minimal:"Minimal","after-glow":"After Glow","retro-80s":"Retro 80-an",oceanic:"Oseanik",pastel:"Pastel",classic:"Klasik"}},language:{label:"Bahasa",description:"Pilih bahasa untuk peluncur.",languages:{english:"English",bahasa:"Bahasa Indonesia",turkish:"T√ºrk√ße",french:"Fran√ßais",russian:"–†—É—Å—Å–∫–∏–π",spanish:"Espa√±ol"}}},startup:{label:"Startup",autoStart:"Mulai Otomatis",autoStartDescription:"Jalankan aplikasi secara otomatis saat sistem menyala.",minimizeToTray:"Perkecil ke Tray saat Ditutup",minimizeToTrayDescription:"Mulai aplikasi dalam keadaan diminimalkan ke baki sistem."}},game:{versions:"Versi",showSnapshots:"Tampilkan versi Snapshot Minecraft",showSnapshotsDescription:"Tampilkan versi snapshot (beta/eksperimental) Minecraft di peluncur.",performance:{label:"Performa",ramAllocation:"Alokasi RAM",ramAllocationDescription:"Atur jumlah RAM yang dialokasikan untuk game. Minimum RAM yang direkomendasikan adalah setidaknya 2GB untuk mesin lambat."},runtime:{label:"Runtime",javaPath:"Path Java",javaPathDescription:"Tentukan path ke executable Java.",gameArgs:"Argumen Game",gameArgsDescription:"Tentukan argumen game untuk menjalankan game (hanya untuk pengguna tingkat lanjut).",gameArgsPlaceholder:"misal: java -Xmx4G -jar minecraft.jar",jvmArguments:"Argumen JVM",jvmArgumentsDescription:"Atur argumen JVM tambahan untuk tuning performa tingkat lanjut.",jvmArgumentsPlaceholder:"misal: -Xmx4G -XX:+UseG1GC",environmentVariables:"Variabel Lingkungan",environmentVariablesDescription:"Atur variabel lingkungan untuk proses runtime.",environmentVariablesPlaceholder:"misal: JAVA_HOME=/usr/lib/jvm/java-17",runDetached:"Jalankan Terpisah",runDetachedDescription:"Jalankan game dalam mode terpisah, memungkinkan peluncur ditutup sementara game masih berjalan.",verifyGameFiles:"Verifikasi File Game",verifyGameFilesDescription:"Verifikasi integritas file game sebelum meluncurkan.",verifyGameFilesWarning:"Peringatan: Mengaktifkan opsi ini dapat meningkatkan waktu peluncuran secara signifikan dan akan menghapus semua progres game sebelumnya.",intelEnabledMac:"Aktifkan Intel Graphics di macOS",intelEnabledMacDescription:"Aktifkan akselerasi grafis Intel pada mesin macOS.",runAsAdmin:"Jalankan sebagai Administrator",runAsAdminDescription:"Jalankan game dengan hak administrator.",ignored:"File yang Diabaikan",ignoredDescription:"Tentukan file atau direktori yang diabaikan saat memverifikasi file game."},display:{label:"Tampilan",resolution:"Resolusi",fullscreen:"Layar Penuh",resolutionDescription:"Atur resolusi jendela game.",resolutions:{fullHD:"1920x1080 (Full HD)",quadHD:"2560x1440 (Quad HD)",ultraHD:"3840x2160 (4K UHD)",hd:"1366x768 (HD)",hdReady:"1280x720 (HD)",hdPlus:"1600x900 (HD+)",wxgaPlus:"1440x900 (WXGA+)",xga:"1024√ó768 (XGA)"}}},launcher:{updates:"Pembaruan",checkForUpdates:"Periksa pembaruan",checkForUpdatesDescription:"Periksa pembaruan peluncur saat startup.",integration:{label:"Integrasi",discordRPC:"Discord Rich Presence",discordRPCDescription:"Aktifkan atau nonaktifkan integrasi Discord Rich Presence."},notification:{label:"Notifikasi",systemNotifications:"Notifikasi Sistem",systemNotificationsDescription:"Tampilkan notifikasi sistem asli.",showUpdateNotification:"Tampilkan Notifikasi Pembaruan",showUpdateNotificationDescription:"Tampilkan notifikasi pembaruan.",playSound:"Mainkan suara",playSoundDescription:"Mainkan suara saat notifikasi muncul.",categories:{label:"Kategori Notifikasi",description:"Pilih jenis notifikasi yang akan ditampilkan.",updates:"Pembaruan",launches:"Peluncuran Game",downloads:"Unduhan",errors:"Error",general:"Umum"}}},storage:{folders:"Folder",launcherFolder:"Folder Peluncur",launcherFolderDescription:"Atur direktori tempat peluncur diinstal.",minecraftFolder:"Folder Minecraft",minecraftFolderDescription:"Atur direktori tempat Minecraft diinstal.",modFolder:"Folder Mod",modFolderDescription:"Direktori tempat mod diinstal."},developer:{debug:"Debug",enableDevTools:"Aktifkan DevTools",enableDevToolsDescription:"Aktifkan alat pengembang untuk debugging.",experimental:"Eksperimental",allowBetaFeatures:"Izinkan fitur Beta",allowBetaFeaturesDescription:"Aktifkan fitur peluncur eksperimental."},about:{version:"Versi",checkForUpdates:"Periksa Pembaruan",credits:"Kredit",developedBy:'Dikembangkan dan dibuat dengan üíñ oleh <b class="credit-owner-text">Cosmic</b>&nbsp;&&nbsp;<b class="credit-owner-text">Olly</b>',specialThanks:"Terima kasih khusus untuk semua kontributor dan penguji.",openSourceLibraries:"Perpustakaan Open Source",extraOpenSourceLibrariesDescription:"Perpustakaan open source lain yang digunakan dalam proyek ini.",apisUsed:"API yang Digunakan",sourceCode:"Kode Sumber",donate:"Donasi!",donateButton:"Belikan saya kopi",donateDescription:"Jika Anda menyukai proyek ini, pertimbangkan untuk berdonasi guna mendukung pengembangan!",contributors:"Kontributor",disclaimer:"Penafian",disclaimerDescription:"Peluncur ini adalah proyek independen dan tidak berafiliasi dengan Mojang, Microsoft, atau entitas resmi Minecraft mana pun. Semua merek dagang dan hak cipta adalah milik pemiliknya masing-masing.",devUnlockedMessage:"Mode pengembang diaktifkan! üòπ",alreadyADevMessage:"Anda sudah menjadi pengembang! üòπ"},buttons:{resetToDefault:"Atur ulang ke default",close:"Tutup",save:"Simpan",cancel:"Batal",browse:"Telusuri",select:"Pilih"}},$v={loading:"MEMUAT",description:"Harap tunggu sementara proses selesai.",closeNote:"Anda dapat menutup jendela aktif untuk menghentikan proses ini"},jv={playersOnline:"Pemain online sekarang",supportProject:"Dukung Proyek",console:"Konsol",minimize:"Perkecil",closeApp:"Tutup Aplikasi",manageAccounts:"Kelola Akun",addAccount:"Tambah Akun",adCredit:"Didukung oleh Beam-i",social:{github:"Github",discord:"Discord",twitter:"Twitter"},launch:{label:"Mulai",launching:"Meluncurkan",cancel:"Batal",closeGame:"Tutup Game",launchStatus:{preparing:"Menyiapkan",downloading:"Mengunduh",launching:"Meluncurkan",patching:"Menambal",libraries:"Perpustakaan",assets:"Aset",waiting:"Menunggu",retrying:"Mencoba ulang",extracting:"Mengekstrak File",verifying:"Memverifikasi File",ready:"Game siap",running:"Game Berjalan",launchFailed:"Peluncuran gagal, silakan coba lagi nanti!",error:"Peluncuran Gagal",cancelled:"Peluncuran dibatalkan"},changeVersion:"Ganti Versi",gameTypes:{vanilla:"Vanilla",forge:"Forge",fabric:"Fabric"},versionTypes:{release:"Release",stable:"Stabil",mc:"MC"}}},Xv={buttons:{play:"Main",home:"Beranda",accountManager:"Manajer Akun",instanceManager:"Manajer Instance",mods:"Mod (Segera hadir)",quickServers:"Server Cepat (Segera hadir)"},settings:"Pengaturan"},qv={title:"Manajer Instance",home:"Beranda",description:"Kelola instance Minecraft Anda di sini. Buat, edit, dan hapus instance untuk mempersonalisasi pengalaman bermain Anda.",createInstance:"Buat Instance",createInstanceAriaLabel:"Buat Instance",editInstance:"Edit Instance",editInstanceAriaLabel:"Edit Instance",deleteInstance:"Hapus Instance",deleteInstanceAriaLabel:"Hapus Instance",instanceName:"Nama Instance",instanceNamePlaceholder:"Masukkan nama instance",instanceNameRequired:"Nama instance diperlukan",instanceNameTooShort:"Nama instance harus minimal 3 karakter",instanceNameTooLong:"Nama instance harus 16 karakter atau kurang",instanceNameInvalidCharacters:"Nama instance hanya boleh berisi huruf, angka, dan garis bawah",cancel:"Batal",save:"Simpan",version:{label:"Versi tersedia",description:"Pilih versi Minecraft untuk digunakan pada instance ini.",versionTypes:{vanilla:{name:"Vanilla",description:"Rasakan Minecraft vanilla dengan performa yang ditingkatkan, mekanik gameplay yang lebih baik, dan fitur baru yang menarik. Mainkan versi murni, tidak dimodifikasi dari game seperti yang dimaksudkan oleh Mojang."},forge:{name:"Forge",description:"Bermain dengan mod Forge untuk gameplay yang ditingkatkan, item baru, blok, dan mekanik. Akses ribuan modifikasi yang dibuat komunitas untuk mengubah pengalaman Minecraft Anda."},fabric:{name:"Fabric",description:"Rasakan modding yang ringan dan cepat dengan Fabric. Nikmati optimasi performa, mod modern, dan pembaruan cepat ke versi Minecraft terbaru."}}}},Yv={selectAccountType:"Pilih Jenis Akun",close:"Tutup",addMinecraftAccount:"Akun Microsoft",addMinecraftAccountDescription:"Tambahkan akun Minecraft resmi Anda untuk bermain online. (Membutuhkan akun Mojang atau Microsoft yang valid.)",addOfflineAccount:"Akun Offline",addOfflineAccountDescription:"Mainkan di server tidak resmi atau bajakan tanpa akun Minecraft. (Progress dan skin tidak akan sinkron antar perangkat.)",offlineAccountForm:{enterUsername:"Masukkan nama pengguna untuk membuat akun Minecraft offline. Akun ini hanya akan bekerja di server tidak resmi.",usernamePlaceholder:"Masukkan nama pengguna (3-16 karakter, a-z, 0-9, _)",usernameRequired:"Nama pengguna diperlukan",usernameTooShort:"Nama pengguna harus minimal 3 karakter",usernameTooLong:"Nama pengguna harus maksimal 16 karakter",usernameInvalidCharacters:"Nama pengguna hanya boleh berisi huruf, angka, dan garis bawah",cancel:"Batal",save:"Simpan",saving:"Menyimpan..."},accountAdded:"Akun ditambahkan!",failedToAddAccount:"Gagal menambahkan akun. Silakan coba lagi."},Kv={defaultTitle:"Judul Dialog",defaultMessage:"Pesan dialog muncul di sini.",ok:"OK",no:"Tidak",nevermind:"Tidak jadi",yes:"Ya",cancel:"Batal",continue:"Lanjutkan",confirm:"Konfirmasi",retry:"Coba Lagi",titles:{deleteAccount:"Hapus Akun?",apiError:"Kesalahan API",apiUnreachable:"API Tidak Dapat Dihubungi",selectFolder:"Pilih Folder",gamePreparing:"Game sedang bersiap untuk diluncurkan. Harap tunggu.",addMinecraftAccount:"Tambah Akun Minecraft",saveSkin:"Simpan Skin"},messages:{deleteAccount:"Anda yakin ingin menghapus akun ini?",apiError:"Terjadi kesalahan saat menghubungkan ke API. Silakan coba lagi nanti.",apiUnreachable:"Server API tidak dapat dihubungi. Periksa koneksi internet Anda dan coba lagi.",gamePreparingCancelMessage:"Game sedang dipersiapkan untuk diluncurkan. Anda harus membatalkan proses peluncuran saat ini sebelum memilih instance yang berbeda. Apakah Anda ingin membatalkan peluncuran?"},fileTypes:{pngImages:"Gambar PNG",allFiles:"Semua File"}},Jv={loading:"Memuat",description:"Harap tunggu sementara proses selesai.",closeNote:"Anda dapat menutup jendela aktif untuk menghentikan proses ini"},Zv={defaultMessage:"Ada sesuatu yang baru saja terjadi!",launchError:"Terjadi kesalahan saat meluncurkan game. Silakan coba lagi nanti.",noSkinAvailable:"Tidak ada skin yang tersedia untuk diunduh",skinSaved:"Skin berhasil disimpan!",skinSaveFailed:"Gagal menyimpan skin"},Qv={title:"Manajer Akun",description:"Kelola akun Minecraft Anda di sini. Beralih antar profil dan hapus akun untuk mempersonalisasi pengalaman bermain.",deleteAccountTitle:"Hapus Akun?",deleteAccountMessage:"Anda yakin ingin menghapus akun ini?",cancel:"Batal",delete:"Hapus",removeAccount:"Hapus akun",removeAccountAriaLabel:"Hapus akun",minecraft:"Minecraft",cracked:"Bajakan",playtime:"Waktu Main"},e_={minecraftVersion:"Minecraft",versionSummary:"Pilih versi dan varian Minecraft favorit Anda.",closeButton:"Tombol Tutup",closeButtonAriaLabel:"Tombol Tutup"},t_={clearLogs:"Bersihkan",welcome:"Selamat datang di Konsol OriLauncher",description:"Konsol ini akan menampilkan aktivitas peluncur dan log game",ready:"Konsol siap digunakan",levels:{debug:"Debug (Semua)",info:"Info",warning:"Peringatan",error:"Kesalahan"},loggerTestMessage:"Pesan tes logger",levelChanged:"Level diubah ke {level}",somethingWentWrong:"Ada yang salah"},n_={selectPlaceholder:"Pilih",levels:{debug:"Debug (Semua)",info:"Info",warning:"Peringatan",error:"Kesalahan"},clear:"Bersihkan"},i_={browse:"Telusuri",pick:"Pilih Folder",noFolderSelected:"Tidak ada folder yang dipilih"},a_={defaultUsername:"MHF_Steve",animations:{idle:"Diam",walking:"Berjalan",running:"Berlari",crouch:"Jongkok",waving:"Melambaikan"},viewModes:{"2d":"Tampilan 2D","3d":"Tampilan 3D"},playPause:"Putar/Jeda",saveSkin:"Simpan skin",toggleView:"Beralih Tampilan 2D/3D",playAnimation:"putar-animasi",saveSkinAriaLabel:"simpan-skin"},r_={languageSet:"Bahasa diatur ke: {language}",discordRPCEnabled:"Discord RPC diaktifkan.",notificationSoundsEnabled:"Suara notifikasi diaktifkan.",loadingSettings:"Memuat pengaturan...",buildingVersions:"Membangun versi...",checkingForUpdates:"Memeriksa pembaruan...",skippingUpdateCheck:"Melewati pemeriksaan pembaruan...",initializingServices:"Menginisialisasi layanan...",refreshingAccounts:"Menyegarkan akun...",accountsValidated:"Akun tervalidasi",fetchingServerList:"Mengambil daftar server...",preparingLauncher:"Menyiapkan peluncur...",checkingAPIStatus:"Memeriksa status API...",apiFetch:{wakingUpServer:"Membangunkan server API...",wakeup1:"Menyodok server dengan tongkat untuk membangunkannya...",wakeup2:"Meminta server untuk bangun dengan sopan...",wakeup3:"Menyuap server dengan kopi virtual...",wakeup4:"Mengirim panggilan bangun ke server...",wakeup5:"Berbisik 'selamat pagi' ke server...",wakeup6:"Menggelitik sirkuit server...",wakeup7:"Memutar musik keras untuk membuat server bergerak..."},debugger:{addingEventListeners:"[MAIN CONTENT] Menambahkan event listener baru",eventSetupComplete:"[MAIN CONTENT] Pengaturan event selesai. Total fungsi pembersihan"},apiUnreachable:"API tidak dapat diakses. Beberapa fitur mungkin tidak berfungsi dengan baik.",ready:"Siap!"},s_={connectionLost:"Koneksi terputus!",connectionRestored:"Koneksi pulih"},o_={oriLauncher:"Ori Launcher",retrieve:"Ambil",checkForUpdates:"Periksa Pembaruan",quit:"Keluar",tooltip:"Ori Launcher"},l_={inLauncher:"Di Peluncur",browsing:"Menjelajah",idle:"Menganggur",minecraft:"Minecraft",downloading:"Mengunduh",downloadOriLauncher:"Unduh Ori Launcher"},c_={updateAvailable:"Pembaruan Tersedia",updateAvailableMessage:"OriLauncher sekarang tersedia!",updateNow:"Perbarui Sekarang",later:"Nanti",gameLaunched:"Game Diluncurkan",gameLaunchedMessage:"Minecraft berhasil dimulai!",launchFailed:"Peluncuran Gagal",launchFailedMessage:"Gagal memulai Minecraft, silakan coba lagi nanti.",downloadComplete:"Unduhan Selesai",downloadCompleteMessage:"Unduhan berhasil diselesaikan!",connectionLost:"Koneksi Terputus",connectionLostMessage:"Kehilangan koneksi ke server. Mencoba ulang...",connectionRestored:"Koneksi Pulih",connectionRestoredMessage:"Koneksi pulih. Anda dapat bermain Minecraft lagi.",launcherRestartRequired:"Restart peluncur diperlukan",launcherRestartRequiredMessage:"Restart peluncur diperlukan agar perubahan dapat diterapkan."},u_={noAccountSelected:"Tidak ada akun yang dipilih",invalidOnlineCredentials:"Kredensial akun online tidak valid",noVersionSelected:"Tidak ada versi Minecraft yang dipilih",noMinecraftDirectory:"Direktori Minecraft tidak ditentukan",memoryConfiguration:"Memori minimum harus kurang dari memori maksimum",memoryExceedsSystem:"Memori maksimum melebihi memori sistem",launchInProgress:"Peluncuran sudah dalam proses",accountRefreshFailed:"Gagal menyegarkan akun setelah percobaan ulang",apiNotReachable:"Gagal mengambil berita"},d_={minimizeApp:"perkecil-app",closeApp:"tutup-app",changeVersion:"Ganti versi",rssBtn:"tombol-rss",patreon:"patreon",settings:"Pengaturan"},f_={enterName:"Masukkan nama di sini pak..."},h_={versionTypes:{vanilla:{name:"Vanilla",description:"Rasakan Minecraft vanilla dengan performa yang ditingkatkan, mekanik gameplay yang diperbaiki, dan fitur baru yang menarik. Mainkan versi murni dan tidak dimodifikasi dari game seperti yang dimaksudkan oleh Mojang."},forge:{name:"Forge",description:"Bermain dengan mod Forge untuk gameplay yang ditingkatkan, item baru, blok, dan mekanik. Akses ribuan modifikasi yang dibuat komunitas untuk mengubah pengalaman Minecraft Anda."},fabric:{name:"Fabric",description:"Rasakan modding yang ringan dan cepat dengan Fabric. Nikmati optimisasi performa, mod modern, dan pembaruan cepat ke versi Minecraft terbaru."}}},p_={settings:Wv,invoker:$v,mainContent:jv,sidebar:Xv,instanceManager:qv,accountAdder:Yv,dialog:Kv,splash:Jv,toast:Zv,accountManager:Qv,versionSelector:e_,console:t_,customOptions:n_,folderPicker:i_,skinViewer:a_,logs:r_,connection:s_,tray:o_,discordRPC:l_,notifications:c_,errors:u_,ariaLabels:d_,placeholders:f_,version:h_},m_={title:"Ayarlar",tabs:{general:"Genel",game:"Oyun",mods:"Modlar",launcher:"Ba≈ülatƒ±cƒ±",storage:"Depolama",developer:"Geli≈ütirici",about:"Hakkƒ±nda"},general:{appearance:{label:"G√∂r√ºn√ºm",theme:{label:"Tema",description:"Ba≈ülatƒ±cƒ±nƒ±n temasƒ±nƒ± se√ßin.",launcherStyle:{label:"Ba≈ülatƒ±cƒ± Stili",description:"Ba≈ülatƒ±cƒ±nƒ±n stilini se√ßin. <br><strong>Standart stil</strong> birden fazla tema se√ßeneƒüi ile modern bir g√∂r√ºn√ºm sunarken, <strong>Klasik stil</strong> bloklu Minecraft tarzƒ± bir tasarƒ±m sunar.",standard:"Standart",minecraft:"Klasik"},themes:{light:"A√ßƒ±k",dark:"Koyu",minimal:"Minimal","after-glow":"After Glow","retro-80s":"Retro 80'ler",oceanic:"Okyanusal",pastel:"Pastel",classic:"Klasik"}},language:{label:"Dil",description:"Ba≈ülatƒ±cƒ± i√ßin dili se√ßin.",languages:{english:"ƒ∞ngilizce",bahasa:"Bahasa Indonesia",turkish:"T√ºrk√ße",french:"Fran√ßais",russian:"–†—É—Å—Å–∫–∏–π",spanish:"Espa√±ol"}}},startup:{label:"Ba≈ülangƒ±√ß",autoStart:"Otomatik Ba≈ülat",autoStartDescription:"Sistem ba≈üladƒ±ƒüƒ±nda uygulamayƒ± otomatik ba≈ülat.",minimizeToTray:"Kapatƒ±ldƒ±ƒüƒ±nda simge durumuna k√º√ß√ºlt",minimizeToTrayDescription:"Uygulamayƒ± sistem tepsisinde simge durumunda ba≈ülat."}},game:{versions:"S√ºr√ºmler",showSnapshots:"Minecraft'ƒ±n Snapshot s√ºr√ºmlerini g√∂ster",showSnapshotsDescription:"Launcher'da Minecraft'ƒ±n snapshot (beta/deneysel) s√ºr√ºmlerini g√∂ster.",performance:{label:"Performans",ramAllocation:"RAM tahsisi",ramAllocationDescription:"Oyuna tahsis edilen RAM miktarƒ±nƒ± ayarlayƒ±n. Yava≈ü makineler i√ßin √∂nerilen minimum RAM en az 2 GB'dƒ±r."},runtime:{label:"√áalƒ±≈üma zamanƒ±",javaPath:"Java yolu",javaPathDescription:"Java y√ºr√ºt√ºlebilir dosyasƒ±nƒ±n yolunu belirtin.",gameArgs:"Oyun Arg√ºmanlarƒ±",gameArgsDescription:"Oyunu ba≈ülatmak i√ßin oyun arg√ºmanlarƒ±nƒ± belirtin (sadece ileri d√ºzey kullanƒ±cƒ±lar).",gameArgsPlaceholder:"√∂rn. java -Xmx4G -jar minecraft.jar",jvmArguments:"JVM Arg√ºmanlarƒ±",jvmArgumentsDescription:"ƒ∞leri d√ºzey performans ayarƒ± i√ßin ek JVM arg√ºmanlarƒ± ayarlayƒ±n.",jvmArgumentsPlaceholder:"√∂rn. -Xmx4G -XX:+UseG1GC",environmentVariables:"Ortam Deƒüi≈ükenleri",environmentVariablesDescription:"√áalƒ±≈üma s√ºreci i√ßin ortam deƒüi≈ükenlerini ayarlayƒ±n.",environmentVariablesPlaceholder:"√∂rn. JAVA_HOME=/usr/lib/jvm/java-17",runDetached:"Ayrƒ±k √áalƒ±≈ütƒ±r",runDetachedDescription:"Oyunu ayrƒ±k modda √ßalƒ±≈ütƒ±r, oyun √ßalƒ±≈üƒ±rken ba≈ülatƒ±cƒ±nƒ±n kapanmasƒ±na izin ver.",verifyGameFiles:"Oyun Dosyalarƒ±nƒ± Doƒürula",verifyGameFilesDescription:"Ba≈ülatmadan √∂nce oyun dosyalarƒ±nƒ±n b√ºt√ºnl√ºƒü√ºn√º doƒürula.",verifyGameFilesWarning:"Uyarƒ±: Bu se√ßeneƒüi etkinle≈ütirmek ba≈ülatma s√ºresini √∂nemli √∂l√ß√ºde artƒ±rabilir ve √∂nceki t√ºm oyun ilerlemesini silecektir.",intelEnabledMac:"macOS'ta Intel Grafikleri Etkinle≈ütir",intelEnabledMacDescription:"macOS makinelerinde Intel grafik hƒ±zlandƒ±rmasƒ±nƒ± etkinle≈ütir.",runAsAdmin:"Y√∂netici Olarak √áalƒ±≈ütƒ±r",runAsAdminDescription:"Oyunu y√∂netici ayrƒ±calƒ±klarƒ±yla ba≈ülat.",ignored:"Yoksayƒ±lan Dosyalar",ignoredDescription:"Oyun dosyalarƒ±nƒ± doƒürularken yoksayƒ±lacak dosya veya dizinleri belirtin."},display:{label:"Ekran",resolution:"√á√∂z√ºn√ºrl√ºk",fullscreen:"Tam Ekran",resolutionDescription:"Oyun penceresinin √ß√∂z√ºn√ºrl√ºƒü√ºn√º ayarlayƒ±n.",resolutions:{fullHD:"1920x1080 (Full HD)",quadHD:"2560x1440 (Quad HD)",ultraHD:"3840x2160 (4K UHD)",hd:"1366x768 (HD)",hdReady:"1280x720 (HD)",hdPlus:"1600x900 (HD+)",wxgaPlus:"1440x900 (WXGA+)",xga:"1024√ó768 (XGA)"}}},launcher:{updates:"G√ºncellemeler",checkForUpdates:"G√ºncellemeleri kontrol et",checkForUpdatesDescription:"Ba≈ülatƒ±cƒ±yƒ± a√ßarken yeni g√ºncellemeleri kontrol et.",integration:{label:"Entegrasyon",discordRPC:"Discord Zengin Varlƒ±k",discordRPCDescription:"Discord Zengin Varlƒ±k entegrasyonunu etkinle≈ütir veya devre dƒ±≈üƒ± bƒ±rak."},notification:{label:"Bildirimler",systemNotifications:"Sistem Bildirimleri",systemNotificationsDescription:"Yerel sistem bildirimlerini g√∂ster.",showUpdateNotification:"G√ºncelleme Bildirimlerini G√∂ster",showUpdateNotificationDescription:"G√ºncelleme bildirimlerini g√∂ster.",playSound:"Ses √ßal",playSoundDescription:"Bildirimler g√∂r√ºnd√ºƒü√ºnde ses √ßal.",categories:{label:"Bildirim Kategorileri",description:"Hangi bildirim t√ºrlerinin g√∂sterileceƒüini se√ßin.",updates:"G√ºncellemeler",launches:"Oyun Ba≈ülatmalarƒ±",downloads:"ƒ∞ndirmeler",errors:"Hatalar",general:"Genel"}}},storage:{folders:"Klas√∂rler",launcherFolder:"Ba≈ülatƒ±cƒ± klas√∂r√º",launcherFolderDescription:"Ba≈ülatƒ±cƒ±nƒ±n kurulu olduƒüu dizini ayarlayƒ±n.",minecraftFolder:"Minecraft klas√∂r√º",minecraftFolderDescription:"Minecraft'ƒ±n kurulu olduƒüu dizini ayarlayƒ±n.",modFolder:"Mod klas√∂r√º",modFolderDescription:"Modlarƒ±n kurulu olduƒüu dizini ayarlayƒ±n."},developer:{debug:"Hata ayƒ±klama",enableDevTools:"Geli≈ütirici Ara√ßlarƒ±nƒ± Etkinle≈ütir",enableDevToolsDescription:"Hata ayƒ±klama i√ßin geli≈ütirici ara√ßlarƒ±nƒ± etkinle≈ütir.",experimental:"Deneysel",allowBetaFeatures:"Beta √∂zelliklerine izin ver",allowBetaFeaturesDescription:"Deneysel ba≈ülatƒ±cƒ± √∂zelliklerini etkinle≈ütir."},about:{version:"S√ºr√ºm",checkForUpdates:"G√ºncellemeleri Kontrol Et",credits:"Katkƒ±da Bulunanlar",developedBy:'<b class="credit-owner-text">Cosmic</b>&nbsp;&&nbsp;<b class="credit-owner-text">Olly</b> tarafƒ±ndan üíñ ile geli≈ütirildi ve yapƒ±ldƒ±',specialThanks:"T√ºm katkƒ±da bulunanlara ve test√ßilere √∂zel te≈üekk√ºrler.",openSourceLibraries:"A√ßƒ±k Kaynak K√ºt√ºphaneler",extraOpenSourceLibrariesDescription:"Bu projede kullanƒ±lan diƒüer a√ßƒ±k kaynak k√ºt√ºphaneler.",apisUsed:"Kullanƒ±lan API'ler",sourceCode:"Kaynak Kodu",donate:"Baƒüƒ±≈ü Yap!",donateButton:"Bana bir kahve ƒ±smarla",donateDescription:"Bu projeyi beƒüendiyseniz, geli≈ütirmeyi desteklemek i√ßin baƒüƒ±≈ü yapmayƒ± d√º≈ü√ºn√ºn!",contributors:"Katkƒ±da Bulunanlar",disclaimer:"Feragatname",disclaimerDescription:"Bu ba≈ülatƒ±cƒ± baƒüƒ±msƒ±z bir projedir ve Mojang, Microsoft veya herhangi bir resmi Minecraft kurulu≈üuyla ili≈ükili deƒüildir. T√ºm ticari markalar ve telif haklarƒ± sahiplerine aittir.",devUnlockedMessage:"Geli≈ütirici modu etkinle≈ütirildi! üòπ",alreadyADevMessage:"Zaten bir geli≈ütiricisisiniz! üòπ"},buttons:{resetToDefault:"Varsayƒ±lana sƒ±fƒ±rla",close:"Kapat",save:"Kaydet",cancel:"ƒ∞ptal",browse:"G√∂zat",select:"Se√ß"}},g_={loading:"Y√úKLENƒ∞YOR",description:"L√ºtfen i≈ülem tamamlanana kadar bekleyin.",closeNote:"Bu i≈ülemi durdurmak i√ßin etkin pencereyi kapatabilirsiniz"},v_={playersOnline:"≈ûu anda √ßevrimi√ßi oyuncular",supportProject:"Projeyi Destekle",console:"Konsol",minimize:"K√º√ß√ºlt",closeApp:"Uygulamayƒ± Kapat",manageAccounts:"Hesaplarƒ± Y√∂net",addAccount:"Hesap Ekle",adCredit:"Beam-i destekli",social:{github:"Github",discord:"Discord",twitter:"Twitter"},launch:{label:"Ba≈ülat",launching:"Ba≈ülatƒ±lƒ±yor",cancel:"ƒ∞ptal",closeGame:"Oyunu Kapat",launchStatus:{preparing:"Hazƒ±rlanƒ±yor",downloading:"ƒ∞ndiriliyor",launching:"Ba≈ülatƒ±lƒ±yor",patching:"Yama uygulanƒ±yor",libraries:"K√ºt√ºphaneler",assets:"Varlƒ±klar",waiting:"Bekleniyor",retrying:"Yeniden deneniyor",extracting:"Dosyalar √áƒ±karƒ±lƒ±yor",verifying:"Dosyalar Doƒürulanƒ±yor",ready:"Oyun hazƒ±r",running:"Oyun √áalƒ±≈üƒ±yor",launchFailed:"Ba≈ülatma ba≈üarƒ±sƒ±z, l√ºtfen daha sonra tekrar deneyin!",error:"Ba≈ülatma Ba≈üarƒ±sƒ±z",cancelled:"Ba≈ülatma iptal edildi"},changeVersion:"S√ºr√ºm√º Deƒüi≈ütir",gameTypes:{vanilla:"Vanilla",forge:"Forge",fabric:"Fabric"},versionTypes:{release:"S√ºr√ºm",stable:"Kararlƒ±",mc:"MC"}}},__={buttons:{play:"Oyna",home:"Ana Sayfa",accountManager:"Hesap Y√∂neticisi",instanceManager:"√ñrnek Y√∂neticisi",mods:"Modlar (Yakƒ±nda)",quickServers:"Hƒ±zlƒ± Sunucular (Yakƒ±nda)"},settings:"Ayarlar"},b_={selectAccountType:"Hesap T√ºr√º Se√ßin",close:"Kapat",addMinecraftAccount:"Microsoft Hesabƒ±",addMinecraftAccountDescription:"√áevrimi√ßi oynamak i√ßin resmi Minecraft hesabƒ±nƒ±zƒ± ekleyin. (Ge√ßerli bir Mojang veya Microsoft hesabƒ± gereklidir.)",addOfflineAccount:"√áevrimdƒ±≈üƒ± Hesap",addOfflineAccountDescription:"Minecraft hesabƒ± olmadan resmi olmayan veya kƒ±rƒ±k sunucularda oynayƒ±n. (ƒ∞lerleme ve kaplamalar cihazlar arasƒ±nda senkronize edilmez.)",offlineAccountForm:{enterUsername:"√áevrimdƒ±≈üƒ± bir Minecraft hesabƒ± olu≈üturmak i√ßin bir kullanƒ±cƒ± adƒ± girin. Bu hesap yalnƒ±zca resmi olmayan sunucularda √ßalƒ±≈üƒ±r.",usernamePlaceholder:"Kullanƒ±cƒ± adƒ± girin (3-16 karakter, a-z, 0-9, _)",usernameRequired:"Kullanƒ±cƒ± adƒ± gereklidir",usernameTooShort:"Kullanƒ±cƒ± adƒ± en az 3 karakter olmalƒ±dƒ±r",usernameTooLong:"Kullanƒ±cƒ± adƒ± en fazla 16 karakter olmalƒ±dƒ±r",usernameInvalidCharacters:"Kullanƒ±cƒ± adƒ± yalnƒ±zca harf, rakam ve alt √ßizgi i√ßerebilir",cancel:"ƒ∞ptal",save:"Kaydet",saving:"Kaydediliyor..."},accountAdded:"Hesap eklendi!",failedToAddAccount:"Hesap eklenemedi. L√ºtfen tekrar deneyin."},x_={defaultTitle:"Dialog Ba≈ülƒ±ƒüƒ±",defaultMessage:"Dialog mesajƒ± buraya gelir.",ok:"Tamam",no:"Hayƒ±r",nevermind:"Bo≈ü ver",yes:"Evet",cancel:"ƒ∞ptal",continue:"Devam Et",confirm:"Onayla",retry:"Yeniden Dene",titles:{deleteAccount:"Hesap Kaldƒ±rƒ±lsƒ±n mƒ±?",apiError:"API Hatasƒ±",apiUnreachable:"API Eri≈üilemiyor",selectFolder:"Bir Klas√∂r Se√ßin",gamePreparing:"Hesap Ekleniyor...",addMinecraftAccount:"Minecraft Hesabƒ± Ekle",saveSkin:"Kaplama Kaydet"},messages:{deleteAccount:"Bu hesabƒ± kaldƒ±rmak istediƒüinizden emin misiniz?",apiError:"API ile baƒülantƒ± kurarken hata olu≈ütu. L√ºtfen daha sonra tekrar deneyin.",apiUnreachable:"API sunucusuna eri≈üilemiyor. ƒ∞nternet baƒülantƒ±nƒ±zƒ± kontrol edin ve tekrar deneyin.",gamePreparingCancelMessage:"Oyun ≈üu anda ba≈ülatƒ±lmaya hazƒ±rlanƒ±yor. Farklƒ± bir √∂rnek se√ßmeden √∂nce mevcut ba≈ülatma i≈ülemini iptal etmelisiniz. Ba≈ülatmayƒ± iptal etmek istiyor musunuz?"},fileTypes:{pngImages:"PNG Resimleri",allFiles:"T√ºm Dosyalar"}},y_={loading:"Y√ºkleniyor",description:"L√ºtfen i≈ülem tamamlanana kadar bekleyin.",closeNote:"Bu i≈ülemi durdurmak i√ßin etkin pencereyi kapatabilirsiniz"},S_={defaultMessage:"Bir ≈üey oldu!",launchError:"Oyunu ba≈ülatƒ±rken bir ≈üeyler ters gitti. L√ºtfen daha sonra tekrar deneyin.",noSkinAvailable:"ƒ∞ndirilecek kaplama yok",skinSaved:"Kaplama ba≈üarƒ±yla kaydedildi!",skinSaveFailed:"Kaplama kaydedilemedi"},M_={title:"Hesap Y√∂neticisi",description:"Minecraft hesaplarƒ±nƒ±zƒ± burada y√∂netin. Profiller arasƒ±nda ge√ßi≈ü yapƒ±n ve oyun deneyiminizi ki≈üiselle≈ütirmek i√ßin hesaplarƒ± kaldƒ±rƒ±n.",deleteAccountTitle:"Hesap Kaldƒ±rƒ±lsƒ±n mƒ±?",deleteAccountMessage:"Bu hesabƒ± kaldƒ±rmak istediƒüinizden emin misiniz?",cancel:"ƒ∞ptal",delete:"Sil",removeAccount:"Hesabƒ± kaldƒ±r",removeAccountAriaLabel:"Hesabƒ± kaldƒ±r",minecraft:"Minecraft",cracked:"Kƒ±rƒ±k",playtime:"Oynama s√ºresi"},E_={minecraftVersion:"Minecraft",versionSummary:"Tercih ettiƒüiniz Minecraft s√ºr√ºm√ºn√º ve varyantƒ±nƒ± se√ßin.",closeButton:"Kapat D√ºƒümesi",closeButtonAriaLabel:"Kapat D√ºƒümesi"},w_={clearLogs:"Temizle",welcome:"OriLauncher Konsoluna Ho≈ü Geldiniz",description:"Bu konsol ba≈ülatƒ±cƒ± etkinliklerini ve oyun g√ºnl√ºklerini g√∂sterecek",ready:"Konsol kullanƒ±ma hazƒ±r",levels:{debug:"Hata Ayƒ±klama (Hepsi)",info:"Bilgi",warning:"Uyarƒ±",error:"Hata"},loggerTestMessage:"Logger test mesajƒ±",levelChanged:"Seviye {level} olarak deƒüi≈ütirildi",somethingWentWrong:"Bir ≈üeyler ters gitti"},A_={selectPlaceholder:"Se√ß",levels:{debug:"Hata Ayƒ±klama (Hepsi)",info:"Bilgi",warning:"Uyarƒ±",error:"Hata"},clear:"Temizle"},T_={browse:"G√∂zat",pick:"Klas√∂r Se√ß",noFolderSelected:"Klas√∂r se√ßilmedi"},R_={title:"√ñrnek Y√∂neticisi",home:"Ana Sayfa",description:"Minecraft √∂rneklerinizi burada y√∂netin. Oyun deneyiminizi ki≈üiselle≈ütirmek i√ßin √∂rnekler olu≈üturun, d√ºzenleyin ve silin.",createInstance:"√ñrnek Olu≈ütur",createInstanceAriaLabel:"√ñrnek Olu≈ütur",editInstance:"√ñrneƒüi D√ºzenle",editInstanceAriaLabel:"√ñrneƒüi D√ºzenle",deleteInstance:"√ñrneƒüi Sil",deleteInstanceAriaLabel:"√ñrneƒüi Sil",instanceName:"√ñrnek Adƒ±",instanceNamePlaceholder:"√ñrnek adƒ±nƒ± girin",instanceNameRequired:"√ñrnek adƒ± gereklidir",instanceNameTooShort:"√ñrnek adƒ± en az 3 karakter uzunluƒüunda olmalƒ±dƒ±r",instanceNameTooLong:"√ñrnek adƒ± en fazla 16 karakter uzunluƒüunda olmalƒ±dƒ±r",instanceNameInvalidCharacters:"√ñrnek adƒ± yalnƒ±zca harf, rakam ve alt √ßizgi i√ßerebilir",cancel:"ƒ∞ptal",save:"Kaydet",version:{label:"Kullanƒ±labilir s√ºr√ºm",description:"Bu √∂rnek i√ßin kullanƒ±lacak Minecraft s√ºr√ºm√ºn√º se√ßin.",versionTypes:{vanilla:{name:"Vanilla",description:"Geli≈ütirilmi≈ü performans, iyile≈ütirilmi≈ü oyun mekanikleri ve heyecan verici yeni √∂zelliklerle vanilla Minecraft'ƒ± deneyimleyin. Oyunun Mojang tarafƒ±ndan ama√ßlandƒ±ƒüƒ± gibi saf, deƒüi≈ütirilmemi≈ü versiyonunu oynayƒ±n."},forge:{name:"Forge",description:"Geli≈ütirilmi≈ü oyun deneyimi, yeni √∂ƒüeler, bloklar ve mekanikler i√ßin Forge modlarƒ± ile oynayƒ±n. Minecraft deneyiminizi d√∂n√º≈üt√ºrmek i√ßin topluluk tarafƒ±ndan olu≈üturulan binlerce modifikasyona eri≈üin."},fabric:{name:"Fabric",description:"Fabric ile hafif ve hƒ±zlƒ± modlama deneyimleyin. Performans optimizasyonlarƒ±, modern modlar ve en son Minecraft s√ºr√ºmlerine hƒ±zlƒ± g√ºncellemelerden yararlanƒ±n."}}}},C_={defaultUsername:"MHF_Steve",animations:{idle:"Bo≈üta",walking:"Y√ºr√ºme",running:"Ko≈üma",crouch:"√á√∂melme",waving:"El Sallama"},viewModes:{"2d":"2D G√∂r√ºn√ºm","3d":"3D G√∂r√ºn√ºm"},playPause:"Oynat/Duraklat",saveSkin:"Kaplamayƒ± kaydet",toggleView:"2D/3D G√∂r√ºn√ºm√º Deƒüi≈ütir",playAnimation:"animasyon-oynat",saveSkinAriaLabel:"kaplama-kaydet"},P_={languageSet:"Dil ayarlandƒ±: {language}",discordRPCEnabled:"Discord RPC etkinle≈ütirildi.",notificationSoundsEnabled:"Bildirim sesleri etkinle≈ütirildi.",loadingSettings:"Ayarlar y√ºkleniyor...",buildingVersions:"S√ºr√ºmler hazƒ±rlanƒ±yor...",checkingForUpdates:"G√ºncellemeler kontrol ediliyor...",skippingUpdateCheck:"G√ºncelleme kontrol√º atlanƒ±yor...",initializingServices:"Servisler ba≈ülatƒ±lƒ±yor...",refreshingAccounts:"Hesaplar yenileniyor...",accountsValidated:"Hesaplar doƒürulandƒ±",fetchingServerList:"Sunucu listesi alƒ±nƒ±yor...",preparingLauncher:"Ba≈ülatƒ±cƒ± hazƒ±rlanƒ±yor...",checkingAPIStatus:"API durumu kontrol ediliyor...",apiFetch:{wakingUpServer:"API sunucusu uyandƒ±rƒ±lƒ±yor...",wakeup1:"Sunucuyu uyandƒ±rmak i√ßin bir sopayla d√ºrt√ºyoruz...",wakeup2:"Sunucudan nazik√ße kalkmasƒ±nƒ± istiyoruz...",wakeup3:"Sunucuya sanal kahve r√º≈üveti veriyoruz...",wakeup4:"Sunucuya uyandƒ±rma √ßaƒürƒ±sƒ± g√∂nderiyoruz...",wakeup5:"Sunucuya 'g√ºnaydƒ±n' fƒ±sƒ±ldƒ±yoruz...",wakeup6:"Sunucunun devrelerini gƒ±dƒ±klƒ±yoruz...",wakeup7:"Sunucuyu harekete ge√ßirmek i√ßin y√ºksek sesle m√ºzik √ßalƒ±yoruz..."},debugger:{addingEventListeners:"[ANA ƒ∞√áERƒ∞K] Yeni olay dinleyicileri ekleniyor",eventSetupComplete:"[ANA ƒ∞√áERƒ∞K] Olay kurulumu tamamlandƒ±. Toplam temizleme fonksiyonlarƒ±"},apiUnreachable:"API eri≈üilemiyor. Bazƒ± √∂zellikler d√ºzg√ºn √ßalƒ±≈ümayabilir.",ready:"Hazƒ±r!"},L_={connectionLost:"Baƒülantƒ± kesildi!",connectionRestored:"Baƒülantƒ± geri y√ºklendi"},D_={oriLauncher:"Ori Launcher",retrieve:"Geri Getir",checkForUpdates:"G√ºncellemeleri Kontrol Et",quit:"√áƒ±k",tooltip:"Ori Launcher"},k_={inLauncher:"Ba≈ülatƒ±cƒ±da",browsing:"G√∂z atƒ±yor",idle:"Bo≈üta",minecraft:"Minecraft",downloading:"ƒ∞ndiriyor",downloadOriLauncher:"Ori Launcher ƒ∞ndir"},U_={updateAvailable:"G√ºncelleme Mevcut",updateAvailableMessage:"OriLauncher artƒ±k mevcut!",updateNow:"≈ûimdi G√ºncelle",later:"Daha Sonra",gameLaunched:"Oyun Ba≈ülatƒ±ldƒ±",gameLaunchedMessage:"Minecraft ba≈üarƒ±yla ba≈ülatƒ±ldƒ±!",launchFailed:"Ba≈ülatma Ba≈üarƒ±sƒ±z",launchFailedMessage:"Minecraft ba≈ülatƒ±lamadƒ±, l√ºtfen daha sonra tekrar deneyin.",downloadComplete:"ƒ∞ndirme Tamamlandƒ±",downloadCompleteMessage:"ƒ∞ndirme ba≈üarƒ±yla tamamlandƒ±!",connectionLost:"Baƒülantƒ± Kesildi",connectionLostMessage:"Sunuculara baƒülantƒ± kesildi. Yeniden deneniyor...",connectionRestored:"Baƒülantƒ± Geri Y√ºklendi",connectionRestoredMessage:"Baƒülantƒ± geri y√ºklendi. Artƒ±k tekrar Minecraft oynayabilirsiniz.",launcherRestartRequired:"Ba≈ülatƒ±cƒ± yeniden ba≈ülatmasƒ± gerekli",launcherRestartRequiredMessage:"Deƒüi≈üikliklerin etkili olmasƒ± i√ßin ba≈ülatƒ±cƒ±nƒ±n yeniden ba≈ülatƒ±lmasƒ± gerekiyor."},I_={noAccountSelected:"Hesap se√ßilmedi",invalidOnlineCredentials:"Ge√ßersiz √ßevrimi√ßi hesap kimlik bilgileri",noVersionSelected:"Minecraft s√ºr√ºm√º se√ßilmedi",noMinecraftDirectory:"Minecraft dizini belirtilmedi",memoryConfiguration:"Minimum bellek maksimum bellekten az olmalƒ±dƒ±r",memoryExceedsSystem:"Maksimum bellek sistem belleƒüini a≈üƒ±yor",launchInProgress:"Ba≈ülatma zaten devam ediyor",accountRefreshFailed:"Yeniden denemeden sonra hesap yenilenemedi",apiNotReachable:"Haberler alƒ±namadƒ±"},N_={minimizeApp:"uygulamayƒ±-k√º√ß√ºlt",closeApp:"uygulamayƒ±-kapat",changeVersion:"S√ºr√ºm√º deƒüi≈ütir",rssBtn:"rss-d√ºƒümesi",patreon:"patreon",settings:"Ayarlar"},O_={enterName:"Buraya adƒ±nƒ±zƒ± girin efendim..."},F_={versionTypes:{vanilla:{name:"Vanilla",description:"Geli≈ümi≈ü performans, iyile≈ütirilmi≈ü oyun mekaniƒüi ve heyecan verici yeni √∂zelliklerle vanilla Minecraft deneyimi ya≈üayƒ±n. Mojang tarafƒ±ndan ama√ßlandƒ±ƒüƒ± gibi oyunun saf, deƒüi≈ütirilmemi≈ü s√ºr√ºm√ºn√º oynayƒ±n."},forge:{name:"Forge",description:"Geli≈ümi≈ü oynanƒ±≈ü, yeni √∂ƒüeler, bloklar ve mekanikler i√ßin Forge modlarƒ±yla oynayƒ±n. Minecraft deneyiminizi d√∂n√º≈üt√ºrmek i√ßin binlerce topluluk tarafƒ±ndan olu≈üturulan modifikasyona eri≈üin."},fabric:{name:"Fabric",description:"Fabric ile hafif ve hƒ±zlƒ± modlama deneyimi ya≈üayƒ±n. Performans optimizasyonlarƒ±, modern modlar ve en son Minecraft s√ºr√ºmlerine hƒ±zlƒ± g√ºncellemelerden yararlanƒ±n."}}},B_={settings:m_,invoker:g_,mainContent:v_,sidebar:__,accountAdder:b_,dialog:x_,splash:y_,toast:S_,accountManager:M_,versionSelector:E_,console:w_,customOptions:A_,folderPicker:T_,instanceManager:R_,skinViewer:C_,logs:P_,connection:L_,tray:D_,discordRPC:k_,notifications:U_,errors:I_,ariaLabels:N_,placeholders:O_,version:F_},z_={title:"Ajustes",tabs:{general:"General",game:"Juego",mods:"Mods",launcher:"Lanzador",storage:"Almacenamiento",developer:"Desarrollador",about:"Acerca de"},general:{appearance:{label:"Apariencia",theme:{label:"Tema",description:"Elige el tema del lanzador.",launcherStyle:{label:"Estilo del Lanzador",description:"Elige el estilo del lanzador. <br><strong>Estilo est√°ndar</strong> ofrece un aspecto moderno con m√∫ltiples opciones de tema, mientras que <strong>Estilo cl√°sico</strong> proporciona un dise√±o inspirado en Minecraft.",standard:"Est√°ndar",minecraft:"Cl√°sico"},themes:{light:"Claro",dark:"Oscuro",minimal:"Minimal","after-glow":"After Glow","retro-80s":"Retro a√±os 80",oceanic:"Oc√©ano",pastel:"Pastel",classic:"Cl√°sico"}},language:{label:"Idioma",description:"Selecciona el idioma para el lanzador.",languages:{english:"Ingl√©s",bahasa:"Bahasa Indonesia",turkish:"T√ºrk√ße",french:"Fran√ßais",russian:"–†—É—Å—Å–∫–∏–π",spanish:"Espa√±ol"}}},startup:{label:"Inicio",autoStart:"Inicio Autom√°tico",autoStartDescription:"Iniciar la aplicaci√≥n autom√°ticamente cuando el sistema se enciende.",minimizeToTray:"Minimizar al √°rea de notificaci√≥n al cerrar",minimizeToTrayDescription:"Iniciar la aplicaci√≥n minimizada en la bandeja del sistema."}},game:{versions:"Versiones",showSnapshots:"Mostrar versiones Snapshot de Minecraft",showSnapshotsDescription:"Mostrar versiones snapshot (beta/experimental) de Minecraft en el lanzador.",performance:{label:"Rendimiento",ramAllocation:"Asignaci√≥n de RAM",ramAllocationDescription:"Configura la cantidad de RAM asignada al juego. Se recomienda al menos 2 GB para equipos lentos."},runtime:{label:"Tiempo de ejecuci√≥n",javaPath:"Ruta de Java",javaPathDescription:"Especifica la ruta al ejecutable de Java.",gameArgs:"Argumentos del Juego",gameArgsDescription:"Especifica argumentos del juego para iniciar el juego (solo para usuarios avanzados).",gameArgsPlaceholder:"ej. java -Xmx4G -jar minecraft.jar",jvmArguments:"Argumentos JVM",jvmArgumentsDescription:"Configura argumentos JVM adicionales para ajuste de rendimiento avanzado.",jvmArgumentsPlaceholder:"ej. -Xmx4G -XX:+UseG1GC",environmentVariables:"Variables de entorno",environmentVariablesDescription:"Configura variables de entorno para el proceso en tiempo de ejecuci√≥n.",environmentVariablesPlaceholder:"ej. JAVA_HOME=/usr/lib/jvm/java-17",runDetached:"Ejecutar Independiente",runDetachedDescription:"Ejecutar el juego en modo independiente, permitiendo cerrar el lanzador mientras el juego sigue funcionando.",verifyGameFiles:"Verificar Archivos del Juego",verifyGameFilesDescription:"Verificar la integridad de los archivos del juego antes de iniciar.",verifyGameFilesWarning:"Advertencia: Habilitar esta opci√≥n puede aumentar significativamente el tiempo de inicio y eliminar√° todo el progreso del juego anterior.",intelEnabledMac:"Habilitar Gr√°ficos Intel en macOS",intelEnabledMacDescription:"Habilitar aceleraci√≥n de gr√°ficos Intel en m√°quinas macOS.",runAsAdmin:"Ejecutar como administrador",runAsAdminDescription:"Iniciar el juego con privilegios de administrador.",ignored:"Archivos Ignorados",ignoredDescription:"Especifica archivos o directorios a ignorar al verificar archivos del juego."},display:{label:"Pantalla",resolution:"Resoluci√≥n",fullscreen:"Pantalla Completa",resolutionDescription:"Establece la resoluci√≥n de la ventana del juego.",resolutions:{fullHD:"1920x1080 (Full HD)",quadHD:"2560x1440 (Quad HD)",ultraHD:"3840x2160 (4K UHD)",hd:"1366x768 (HD)",hdReady:"1280x720 (HD)",hdPlus:"1600x900 (HD+)",wxgaPlus:"1440x900 (WXGA+)",xga:"1024√ó768 (XGA)"}}},launcher:{updates:"Actualizaciones",checkForUpdates:"Buscar actualizaciones",checkForUpdatesDescription:"Buscar actualizaciones del lanzador al iniciar.",integration:{label:"Integraci√≥n",discordRPC:"Discord Rich Presence",discordRPCDescription:"Activar o desactivar la integraci√≥n con Discord Rich Presence."},notification:{label:"Notificaciones",systemNotifications:"Notificaciones del Sistema",systemNotificationsDescription:"Mostrar notificaciones nativas del sistema.",showUpdateNotification:"Mostrar notificaci√≥n de actualizaciones",showUpdateNotificationDescription:"Mostrar notificaciones de actualizaci√≥n.",playSound:"Reproducir sonido",playSoundDescription:"Reproducir un sonido cuando aparezcan las notificaciones.",categories:{label:"Categor√≠as de Notificaci√≥n",description:"Elige qu√© tipos de notificaciones mostrar.",updates:"Actualizaciones",launches:"Inicios de Juego",downloads:"Descargas",errors:"Errores",general:"General"}}},storage:{folders:"Carpetas",launcherFolder:"Carpeta del lanzador",launcherFolderDescription:"Establece el directorio de instalaci√≥n del lanzador.",minecraftFolder:"Carpeta de Minecraft",minecraftFolderDescription:"Establece el directorio de instalaci√≥n de Minecraft.",modFolder:"Carpeta de mods",modFolderDescription:"Establece el directorio donde se instalan los mods."},developer:{debug:"Depuraci√≥n",enableDevTools:"Activar DevTools",enableDevToolsDescription:"Activar herramientas de desarrollador para depuraci√≥n.",experimental:"Experimental",allowBetaFeatures:"Permitir funciones beta",allowBetaFeaturesDescription:"Activar funciones experimentales del lanzador."},about:{version:"Versi√≥n",checkForUpdates:"Buscar actualizaciones",credits:"Cr√©ditos",developedBy:'Desarrollado y creado con üíñ por <b class="credit-owner-text">Cosmic</b>&nbsp;&&nbsp;<b class="credit-owner-text">Olly</b>',specialThanks:"Muchas gracias a todos los contribuyentes y probadores.",openSourceLibraries:"Bibliotecas de c√≥digo abierto",extraOpenSourceLibrariesDescription:"Otras bibliotecas de c√≥digo abierto usadas en este proyecto.",apisUsed:"APIs utilizadas",sourceCode:"C√≥digo fuente",donate:"¬°Donar!",donateDescription:"¬°Si te gusta este proyecto, considera donar para apoyar el desarrollo!",contributors:"Colaboradores",disclaimer:"Descargo de responsabilidad",disclaimerDescription:"Este lanzador es un proyecto independiente y no est√° afiliado con Mojang, Microsoft ni ninguna entidad oficial de Minecraft. Todas las marcas y derechos de autor pertenecen a sus respectivos propietarios.",devUnlockedMessage:"¬°Modo desarrollador activado! üòπ",alreadyADevMessage:"¬°Ya eres un desarrollador! üòπ",donateButton:"Inv√≠tame a un caf√©"},buttons:{resetToDefault:"Restablecer a valores predeterminados",close:"Cerrar",save:"Guardar",cancel:"Cancelar",browse:"Examinar",select:"Seleccionar"}},G_={loading:"CARGANDO",description:"Por favor espera mientras se completa el proceso.",closeNote:"Puedes cerrar la ventana activa para detener este proceso"},H_={playersOnline:"Jugadores en l√≠nea ahora",supportProject:"Apoya el proyecto",console:"Consola",minimize:"Minimizar",closeApp:"Cerrar aplicaci√≥n",manageAccounts:"Administrar cuentas",addAccount:"Agregar cuenta",adCredit:"Respaldado por Beam-i",social:{github:"Github",discord:"Discord",twitter:"Twitter"},launch:{label:"Iniciar",launching:"Iniciando",cancel:"Cancelar",closeGame:"Cerrar Juego",launchStatus:{preparing:"Preparando",downloading:"Descargando",launching:"Iniciando",patching:"Parchando",libraries:"Bibliotecas",assets:"Recursos",waiting:"Esperando",retrying:"Reintentando",extracting:"Extrayendo Archivos",verifying:"Verificando Archivos",ready:"Juego listo",running:"Juego en Ejecuci√≥n",launchFailed:"Error al iniciar, ¬°por favor intenta m√°s tarde!",error:"Error de Inicio",cancelled:"Inicio cancelado"},changeVersion:"Cambiar versi√≥n",gameTypes:{vanilla:"Vanilla",forge:"Forge",fabric:"Fabric"},versionTypes:{release:"Lanzamiento",stable:"Estable",mc:"MC"}}},V_={buttons:{play:"Jugar",home:"Inicio",accountManager:"Gestor de Cuentas",instanceManager:"Gestor de Instancias",mods:"Mods (Pr√≥ximamente)",quickServers:"Servidores r√°pidos (Pr√≥ximamente)"},settings:"Ajustes"},W_={title:"Gestor de Instancias",home:"Inicio",description:"Gestiona tus instancias de Minecraft aqu√≠. Crea, edita y elimina instancias para personalizar tu experiencia de juego.",createInstance:"Crear Instancia",createInstanceAriaLabel:"Crear Instancia",editInstance:"Editar Instancia",editInstanceAriaLabel:"Editar Instancia",deleteInstance:"Eliminar Instancia",deleteInstanceAriaLabel:"Eliminar Instancia",instanceName:"Nombre de la Instancia",instanceNamePlaceholder:"Introduce el nombre de la instancia",instanceNameRequired:"El nombre de la instancia es obligatorio",instanceNameTooShort:"El nombre de la instancia debe tener al menos 3 caracteres",instanceNameTooLong:"El nombre de la instancia debe tener 16 caracteres o menos",instanceNameInvalidCharacters:"El nombre de la instancia solo puede contener letras, n√∫meros y guiones bajos",cancel:"Cancelar",save:"Guardar",version:{label:"Versi√≥n disponible",description:"Selecciona la versi√≥n de Minecraft para esta instancia.",versionTypes:{vanilla:{name:"Vanilla",description:"Experimenta Minecraft vanilla con rendimiento mejorado, mec√°nicas de juego optimizadas y nuevas caracter√≠sticas emocionantes. Juega la versi√≥n pura y sin modificar del juego como fue dise√±ada por Mojang."},forge:{name:"Forge",description:"Juega con mods de Forge para mejorar la jugabilidad, nuevos objetos, bloques y mec√°nicas. Accede a miles de modificaciones creadas por la comunidad para transformar tu experiencia de Minecraft."},fabric:{name:"Fabric",description:"Experimenta modding ligero y r√°pido con Fabric. Disfruta de optimizaciones de rendimiento, mods modernos y actualizaciones r√°pidas a las √∫ltimas versiones de Minecraft."}}}},$_={selectAccountType:"Seleccionar tipo de cuenta",close:"Cerrar",addMinecraftAccount:"Cuenta de Microsoft",addMinecraftAccountDescription:"Agrega tu cuenta oficial de Minecraft para jugar en l√≠nea. (Requiere una cuenta Mojang o Microsoft v√°lida.)",addOfflineAccount:"Cuenta sin conexi√≥n",addOfflineAccountDescription:"Juega en servidores no oficiales o pirateados sin una cuenta de Minecraft. (El progreso y los aspectos no se sincronizar√°n entre dispositivos.)",offlineAccountForm:{enterUsername:"Ingresa un nombre de usuario para crear una cuenta sin conexi√≥n. Esta cuenta solo funcionar√° en servidores no oficiales.",usernamePlaceholder:"Ingresa el nombre de usuario (3-16 caracteres, a-z, 0-9, _)",usernameRequired:"Se requiere nombre de usuario",usernameTooShort:"El nombre de usuario debe tener al menos 3 caracteres",usernameTooLong:"El nombre de usuario debe tener 16 caracteres o menos",usernameInvalidCharacters:"El nombre de usuario solo puede contener letras, n√∫meros y guiones bajos",cancel:"Cancelar",save:"Guardar",saving:"Guardando..."},accountAdded:"¬°Cuenta agregada!",failedToAddAccount:"Error al agregar la cuenta. Por favor int√©ntalo de nuevo."},j_={defaultTitle:"T√≠tulo del di√°logo",defaultMessage:"El mensaje del di√°logo aparece aqu√≠.",ok:"Aceptar",no:"No",nevermind:"No importa",yes:"S√≠",cancel:"Cancelar",continue:"Continuar",confirm:"Confirmar",retry:"Reintentar",titles:{deleteAccount:"¬øEliminar cuenta?",apiError:"Error de API",apiUnreachable:"API inaccesible",selectFolder:"Seleccionar una Carpeta",gamePreparing:"El juego se est√° preparando para iniciar. Por favor espera.",addMinecraftAccount:"Agregar Cuenta de Minecraft",saveSkin:"Guardar Skin"},messages:{deleteAccount:"¬øEst√°s seguro de que deseas eliminar esta cuenta?",apiError:"Ocurri√≥ un error al conectar con la API. Por favor intenta m√°s tarde.",apiUnreachable:"El servidor API no es accesible. Por favor verifica tu conexi√≥n a Internet e int√©ntalo de nuevo.",gamePreparingCancelMessage:"El juego se est√° preparando actualmente para iniciar. Debes cancelar el proceso de inicio actual antes de seleccionar una instancia diferente. ¬øTe gustar√≠a cancelar el inicio?"},fileTypes:{pngImages:"Im√°genes PNG",allFiles:"Todos los Archivos"}},X_={loading:"Cargando",description:"Por favor espera mientras se completa el proceso.",closeNote:"Puedes cerrar la ventana activa para detener este proceso"},q_={defaultMessage:"¬°Algo acaba de pasar!",launchError:"Algo sali√≥ mal al iniciar el juego. Por favor intenta m√°s tarde.",noSkinAvailable:"No hay skin disponible para descargar",skinSaved:"¬°Skin guardado exitosamente!",skinSaveFailed:"Error al guardar el skin"},Y_={title:"Gestor de cuentas",description:"Administra tus cuentas de Minecraft aqu√≠. Cambia entre perfiles y elimina cuentas para personalizar tu experiencia de juego.",deleteAccountTitle:"¬øEliminar cuenta?",deleteAccountMessage:"¬øEst√°s seguro de que deseas eliminar esta cuenta?",cancel:"Cancelar",delete:"Eliminar",removeAccount:"Eliminar cuenta",removeAccountAriaLabel:"Eliminar cuenta",minecraft:"Minecraft",cracked:"Pirata",playtime:"Tiempo de juego"},K_={minecraftVersion:"Minecraft",versionSummary:"Selecciona tu versi√≥n y variante preferida de Minecraft.",closeButton:"Bot√≥n Cerrar",closeButtonAriaLabel:"Bot√≥n Cerrar"},J_={clearLogs:"Limpiar",welcome:"Bienvenido a la Consola de OriLauncher",description:"Esta consola mostrar√° las actividades del lanzador y los registros del juego",ready:"Consola lista para usar",levels:{debug:"Debug (Todo)",info:"Informaci√≥n",warning:"Aviso",error:"Error"},loggerTestMessage:"Mensaje de prueba de logger",levelChanged:"Nivel cambiado a {level}",somethingWentWrong:"Algo sali√≥ mal"},Z_={selectPlaceholder:"Seleccionar",levels:{debug:"Debug (Todo)",info:"Informaci√≥n",warning:"Aviso",error:"Error"},clear:"Limpiar"},Q_={browse:"Examinar",pick:"Seleccionar Carpeta",noFolderSelected:"Ninguna carpeta seleccionada"},eb={defaultUsername:"MHF_Steve",animations:{idle:"Inactivo",walking:"Caminando",running:"Corriendo",crouch:"Agachado",waving:"Saludando"},viewModes:{"2d":"Vista 2D","3d":"Vista 3D"},playPause:"Reproducir/Pausar",saveSkin:"Guardar skin",toggleView:"Alternar Vista 2D/3D",playAnimation:"reproducir-animaci√≥n",saveSkinAriaLabel:"guardar-skin"},tb={languageSet:"Idioma establecido a: {language}",discordRPCEnabled:"Discord RPC activado.",notificationSoundsEnabled:"Sonidos de notificaci√≥n activados.",loadingSettings:"Cargando ajustes...",buildingVersions:"Construyendo versiones...",checkingForUpdates:"Buscando actualizaciones...",skippingUpdateCheck:"Omitiendo verificaci√≥n de actualizaciones...",initializingServices:"Iniciando servicios...",refreshingAccounts:"Actualizando cuentas...",accountsValidated:"Cuentas validadas",fetchingServerList:"Obteniendo lista de servidores...",preparingLauncher:"Preparando lanzador...",checkingAPIStatus:"Verificando estado de la API...",apiFetch:{wakingUpServer:"Despertando servidor API...",wakeup1:"Pinchando el servidor con un palo para despertarlo...",wakeup2:"Pidiendo educadamente al servidor que se levante y brille...",wakeup3:"Sobornando al servidor con caf√© virtual...",wakeup4:"Enviando una llamada de despertar al servidor...",wakeup5:"Susurrando 'buenos d√≠as' al servidor...",wakeup6:"Haciendo cosquillas a los circuitos del servidor...",wakeup7:"Poniendo m√∫sica alta para hacer que el servidor se mueva..."},debugger:{addingEventListeners:"[CONTENIDO PRINCIPAL] Agregando nuevos escuchadores de eventos",eventSetupComplete:"[CONTENIDO PRINCIPAL] Configuraci√≥n de eventos completa. Total de funciones de limpieza"},apiUnreachable:"API inaccesible. Algunas funciones podr√≠an no funcionar correctamente.",ready:"¬°Listo!"},nb={connectionLost:"¬°Conexi√≥n perdida!",connectionRestored:"Conexi√≥n restaurada"},ib={oriLauncher:"Ori Launcher",retrieve:"Recuperar",checkForUpdates:"Buscar Actualizaciones",quit:"Salir",tooltip:"Ori Launcher"},ab={inLauncher:"En el Lanzador",browsing:"Navegando",idle:"Inactivo",minecraft:"Minecraft",downloading:"Descargando",downloadOriLauncher:"Descargar Ori Launcher"},rb={updateAvailable:"Actualizaci√≥n Disponible",updateAvailableMessage:"¬°OriLauncher ya est√° disponible!",updateNow:"Actualizar Ahora",later:"M√°s Tarde",gameLaunched:"Juego Iniciado",gameLaunchedMessage:"¬°Minecraft se inici√≥ exitosamente!",launchFailed:"Error de Inicio",launchFailedMessage:"Error al iniciar Minecraft, por favor intenta m√°s tarde.",downloadComplete:"Descarga Completa",downloadCompleteMessage:"¬°Descarga completada exitosamente!",connectionLost:"Conexi√≥n Perdida",connectionLostMessage:"Se perdi√≥ la conexi√≥n a los servidores. Reintentando...",connectionRestored:"Conexi√≥n Restaurada",connectionRestoredMessage:"Conexi√≥n restaurada. Ahora puedes jugar Minecraft de nuevo.",launcherRestartRequired:"Reinicio del lanzador requerido",launcherRestartRequiredMessage:"Se requiere un reinicio del lanzador para que los cambios surtan efecto."},sb={noAccountSelected:"No se seleccion√≥ cuenta",invalidOnlineCredentials:"Credenciales de cuenta en l√≠nea inv√°lidas",noVersionSelected:"No se seleccion√≥ versi√≥n de Minecraft",noMinecraftDirectory:"Directorio de Minecraft no especificado",memoryConfiguration:"La memoria m√≠nima debe ser menor que la memoria m√°xima",memoryExceedsSystem:"La memoria m√°xima excede la memoria del sistema",launchInProgress:"Inicio ya en progreso",accountRefreshFailed:"Error al actualizar cuenta despu√©s del reintento",apiNotReachable:"Error al obtener noticias"},ob={minimizeApp:"minimizar-app",closeApp:"cerrar-app",changeVersion:"Cambiar versi√≥n",rssBtn:"bot√≥n-rss",patreon:"patreon",settings:"Ajustes"},lb={enterName:"Ingresa el nombre aqu√≠, estimado se√±or..."},cb={versionTypes:{vanilla:{name:"Vanilla",description:"Experimenta Minecraft vanilla con rendimiento mejorado, mec√°nicas de juego mejoradas y nuevas caracter√≠sticas emocionantes. Juega la versi√≥n pura y sin modificar del juego como Mojang lo dise√±√≥."},forge:{name:"Forge",description:"Juega con mods de Forge para una jugabilidad mejorada, nuevos objetos, bloques y mec√°nicas. Accede a miles de modificaciones creadas por la comunidad para transformar tu experiencia de Minecraft."},fabric:{name:"Fabric",description:"Experimenta modding ligero y r√°pido con Fabric. Disfruta de optimizaciones de rendimiento, mods modernos y actualizaciones r√°pidas a las √∫ltimas versiones de Minecraft."}}},ub={settings:z_,invoker:G_,mainContent:H_,sidebar:V_,instanceManager:W_,accountAdder:$_,dialog:j_,splash:X_,toast:q_,accountManager:Y_,versionSelector:K_,console:J_,customOptions:Z_,folderPicker:Q_,skinViewer:eb,logs:tb,connection:nb,tray:ib,discordRPC:ab,notifications:rb,errors:sb,ariaLabels:ob,placeholders:lb,version:cb},ad={en:_v,fr:Vv,id:p_,tr:B_,es:ub},Mu=Dt("en"),db=Ri(Mu,n=>ad[n]||ad.en),an=Ri(db,n=>e=>e.split(".").reduce((t,i)=>t==null?void 0:t[i],n)||e);var fb=Me('<div class="popup-container svelte-1ekypnp"><div><div class="context-container"><span class="context"> </span></div></div></div>');function hb(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t);let r=_t(e,"message",24,()=>a()("toast.defaultMessage")),s=_t(e,"duration",8,2500),o=_t(e,"type",8,"normal"),l=Ve(!0);setTimeout(()=>{Se(l,!1)},s()),nn();var c=ii(),u=jt(c);{var d=p=>{var g=fb(),f=S(g),v=S(f),h=S(v),m=S(h);De(()=>{gt(f,1,`wrapper ${o()??""}-popup`,"svelte-1ekypnp"),ae(m,r())}),he(p,g)};at(u,p=>{_(l)&&p(d)})}he(n,c),Kt(),i()}function pb(n){const[e,t]=Jt(),i=()=>je(Ic,"$toasts",e);var a=ii(),r=jt(a);vn(r,1,i,s=>s.id,(s,o)=>{hb(s,Wg(()=>_(o)))}),he(n,a),t()}function Wh(n,e){return function(){return n.apply(e,arguments)}}const{toString:mb}=Object.prototype,{getPrototypeOf:Eu}=Object,{iterator:vl,toStringTag:$h}=Symbol,_l=(n=>e=>{const t=mb.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Pi=n=>(n=n.toLowerCase(),e=>_l(e)===n),bl=n=>e=>typeof e===n,{isArray:cs}=Array,Qr=bl("undefined");function ao(n){return n!==null&&!Qr(n)&&n.constructor!==null&&!Qr(n.constructor)&&jn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const jh=Pi("ArrayBuffer");function gb(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&jh(n.buffer),e}const vb=bl("string"),jn=bl("function"),Xh=bl("number"),ro=n=>n!==null&&typeof n=="object",_b=n=>n===!0||n===!1,Vo=n=>{if(_l(n)!=="object")return!1;const e=Eu(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!($h in n)&&!(vl in n)},bb=n=>{if(!ro(n)||ao(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},xb=Pi("Date"),yb=Pi("File"),Sb=Pi("Blob"),Mb=Pi("FileList"),Eb=n=>ro(n)&&jn(n.pipe),wb=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||jn(n.append)&&((e=_l(n))==="formdata"||e==="object"&&jn(n.toString)&&n.toString()==="[object FormData]"))},Ab=Pi("URLSearchParams"),[Tb,Rb,Cb,Pb]=["ReadableStream","Request","Response","Headers"].map(Pi),Lb=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function so(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,a;if(typeof n!="object"&&(n=[n]),cs(n))for(i=0,a=n.length;i<a;i++)e.call(null,n[i],i,n);else{if(ao(n))return;const r=t?Object.getOwnPropertyNames(n):Object.keys(n),s=r.length;let o;for(i=0;i<s;i++)o=r[i],e.call(null,n[o],o,n)}}function qh(n,e){if(ao(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,a;for(;i-- >0;)if(a=t[i],e===a.toLowerCase())return a;return null}const ja=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Yh=n=>!Qr(n)&&n!==ja;function Nc(){const{caseless:n,skipUndefined:e}=Yh(this)&&this||{},t={},i=(a,r)=>{const s=n&&qh(t,r)||r;Vo(t[s])&&Vo(a)?t[s]=Nc(t[s],a):Vo(a)?t[s]=Nc({},a):cs(a)?t[s]=a.slice():(!e||!Qr(a))&&(t[s]=a)};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&so(arguments[a],i);return t}const Db=(n,e,t,{allOwnKeys:i}={})=>(so(e,(a,r)=>{t&&jn(a)?n[r]=Wh(a,t):n[r]=a},{allOwnKeys:i}),n),kb=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Ub=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},Ib=(n,e,t,i)=>{let a,r,s;const o={};if(e=e||{},n==null)return e;do{for(a=Object.getOwnPropertyNames(n),r=a.length;r-- >0;)s=a[r],(!i||i(s,n,e))&&!o[s]&&(e[s]=n[s],o[s]=!0);n=t!==!1&&Eu(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},Nb=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},Ob=n=>{if(!n)return null;if(cs(n))return n;let e=n.length;if(!Xh(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Fb=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Eu(Uint8Array)),Bb=(n,e)=>{const i=(n&&n[vl]).call(n);let a;for(;(a=i.next())&&!a.done;){const r=a.value;e.call(n,r[0],r[1])}},zb=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},Gb=Pi("HTMLFormElement"),Hb=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,a){return i.toUpperCase()+a}),rd=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Vb=Pi("RegExp"),Kh=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};so(t,(a,r)=>{let s;(s=e(a,r,n))!==!1&&(i[r]=s||a)}),Object.defineProperties(n,i)},Wb=n=>{Kh(n,(e,t)=>{if(jn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(jn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},$b=(n,e)=>{const t={},i=a=>{a.forEach(r=>{t[r]=!0})};return cs(n)?i(n):i(String(n).split(e)),t},jb=()=>{},Xb=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function qb(n){return!!(n&&jn(n.append)&&n[$h]==="FormData"&&n[vl])}const Yb=n=>{const e=new Array(10),t=(i,a)=>{if(ro(i)){if(e.indexOf(i)>=0)return;if(ao(i))return i;if(!("toJSON"in i)){e[a]=i;const r=cs(i)?[]:{};return so(i,(s,o)=>{const l=t(s,a+1);!Qr(l)&&(r[o]=l)}),e[a]=void 0,r}}return i};return t(n,0)},Kb=Pi("AsyncFunction"),Jb=n=>n&&(ro(n)||jn(n))&&jn(n.then)&&jn(n.catch),Jh=((n,e)=>n?setImmediate:e?((t,i)=>(ja.addEventListener("message",({source:a,data:r})=>{a===ja&&r===t&&i.length&&i.shift()()},!1),a=>{i.push(a),ja.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",jn(ja.postMessage)),Zb=typeof queueMicrotask<"u"?queueMicrotask.bind(ja):typeof process<"u"&&process.nextTick||Jh,Qb=n=>n!=null&&jn(n[vl]),ie={isArray:cs,isArrayBuffer:jh,isBuffer:ao,isFormData:wb,isArrayBufferView:gb,isString:vb,isNumber:Xh,isBoolean:_b,isObject:ro,isPlainObject:Vo,isEmptyObject:bb,isReadableStream:Tb,isRequest:Rb,isResponse:Cb,isHeaders:Pb,isUndefined:Qr,isDate:xb,isFile:yb,isBlob:Sb,isRegExp:Vb,isFunction:jn,isStream:Eb,isURLSearchParams:Ab,isTypedArray:Fb,isFileList:Mb,forEach:so,merge:Nc,extend:Db,trim:Lb,stripBOM:kb,inherits:Ub,toFlatObject:Ib,kindOf:_l,kindOfTest:Pi,endsWith:Nb,toArray:Ob,forEachEntry:Bb,matchAll:zb,isHTMLForm:Gb,hasOwnProperty:rd,hasOwnProp:rd,reduceDescriptors:Kh,freezeMethods:Wb,toObjectSet:$b,toCamelCase:Hb,noop:jb,toFiniteNumber:Xb,findKey:qh,global:ja,isContextDefined:Yh,isSpecCompliantForm:qb,toJSONObject:Yb,isAsyncFn:Kb,isThenable:Jb,setImmediate:Jh,asap:Zb,isIterable:Qb};function nt(n,e,t,i,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),a&&(this.response=a,this.status=a.status?a.status:null)}ie.inherits(nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const Zh=nt.prototype,Qh={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Qh[n]={value:n}});Object.defineProperties(nt,Qh);Object.defineProperty(Zh,"isAxiosError",{value:!0});nt.from=(n,e,t,i,a,r)=>{const s=Object.create(Zh);ie.toFlatObject(n,s,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const o=n&&n.message?n.message:"Error",l=e==null&&n?n.code:e;return nt.call(s,o,l,t,i,a),n&&s.cause==null&&Object.defineProperty(s,"cause",{value:n,configurable:!0}),s.name=n&&n.name||"Error",r&&Object.assign(s,r),s};const e0=null;function Oc(n){return ie.isPlainObject(n)||ie.isArray(n)}function ep(n){return ie.endsWith(n,"[]")?n.slice(0,-2):n}function sd(n,e,t){return n?n.concat(e).map(function(a,r){return a=ep(a),!t&&r?"["+a+"]":a}).join(t?".":""):e}function t0(n){return ie.isArray(n)&&!n.some(Oc)}const n0=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function xl(n,e,t){if(!ie.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,h){return!ie.isUndefined(h[v])});const i=t.metaTokens,a=t.visitor||u,r=t.dots,s=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(a))throw new TypeError("visitor must be a function");function c(f){if(f===null)return"";if(ie.isDate(f))return f.toISOString();if(ie.isBoolean(f))return f.toString();if(!l&&ie.isBlob(f))throw new nt("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(f)||ie.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function u(f,v,h){let m=f;if(f&&!h&&typeof f=="object"){if(ie.endsWith(v,"{}"))v=i?v:v.slice(0,-2),f=JSON.stringify(f);else if(ie.isArray(f)&&t0(f)||(ie.isFileList(f)||ie.endsWith(v,"[]"))&&(m=ie.toArray(f)))return v=ep(v),m.forEach(function(b,w){!(ie.isUndefined(b)||b===null)&&e.append(s===!0?sd([v],w,r):s===null?v:v+"[]",c(b))}),!1}return Oc(f)?!0:(e.append(sd(h,v,r),c(f)),!1)}const d=[],p=Object.assign(n0,{defaultVisitor:u,convertValue:c,isVisitable:Oc});function g(f,v){if(!ie.isUndefined(f)){if(d.indexOf(f)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(f),ie.forEach(f,function(m,M){(!(ie.isUndefined(m)||m===null)&&a.call(e,m,ie.isString(M)?M.trim():M,v,p))===!0&&g(m,v?v.concat(M):[M])}),d.pop()}}if(!ie.isObject(n))throw new TypeError("data must be an object");return g(n),e}function od(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function wu(n,e){this._pairs=[],n&&xl(n,this,e)}const tp=wu.prototype;tp.append=function(e,t){this._pairs.push([e,t])};tp.toString=function(e){const t=e?function(i){return e.call(this,i,od)}:od;return this._pairs.map(function(a){return t(a[0])+"="+t(a[1])},"").join("&")};function i0(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function np(n,e,t){if(!e)return n;const i=t&&t.encode||i0;ie.isFunction(t)&&(t={serialize:t});const a=t&&t.serialize;let r;if(a?r=a(e,t):r=ie.isURLSearchParams(e)?e.toString():new wu(e,t).toString(i),r){const s=n.indexOf("#");s!==-1&&(n=n.slice(0,s)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class ld{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(i){i!==null&&e(i)})}}const ip={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},a0=typeof URLSearchParams<"u"?URLSearchParams:wu,r0=typeof FormData<"u"?FormData:null,s0=typeof Blob<"u"?Blob:null,o0={isBrowser:!0,classes:{URLSearchParams:a0,FormData:r0,Blob:s0},protocols:["http","https","file","blob","url","data"]},Au=typeof window<"u"&&typeof document<"u",Fc=typeof navigator=="object"&&navigator||void 0,l0=Au&&(!Fc||["ReactNative","NativeScript","NS"].indexOf(Fc.product)<0),c0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",u0=Au&&window.location.href||"http://localhost",d0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Au,hasStandardBrowserEnv:l0,hasStandardBrowserWebWorkerEnv:c0,navigator:Fc,origin:u0},Symbol.toStringTag,{value:"Module"})),Pn={...d0,...o0};function f0(n,e){return xl(n,new Pn.classes.URLSearchParams,{visitor:function(t,i,a,r){return Pn.isNode&&ie.isBuffer(t)?(this.append(i,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...e})}function h0(n){return ie.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function p0(n){const e={},t=Object.keys(n);let i;const a=t.length;let r;for(i=0;i<a;i++)r=t[i],e[r]=n[r];return e}function ap(n){function e(t,i,a,r){let s=t[r++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=r>=t.length;return s=!s&&ie.isArray(a)?a.length:s,l?(ie.hasOwnProp(a,s)?a[s]=[a[s],i]:a[s]=i,!o):((!a[s]||!ie.isObject(a[s]))&&(a[s]=[]),e(t,i,a[s],r)&&ie.isArray(a[s])&&(a[s]=p0(a[s])),!o)}if(ie.isFormData(n)&&ie.isFunction(n.entries)){const t={};return ie.forEachEntry(n,(i,a)=>{e(h0(i),a,t,0)}),t}return null}function m0(n,e,t){if(ie.isString(n))try{return(e||JSON.parse)(n),ie.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const oo={transitional:ip,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",a=i.indexOf("application/json")>-1,r=ie.isObject(e);if(r&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return a?JSON.stringify(ap(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return f0(e,this.formSerializer).toString();if((o=ie.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return xl(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||a?(t.setContentType("application/json",!1),m0(e)):e}],transformResponse:[function(e){const t=this.transitional||oo.transitional,i=t&&t.forcedJSONParsing,a=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(i&&!this.responseType||a)){const s=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(o){if(s)throw o.name==="SyntaxError"?nt.from(o,nt.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pn.classes.FormData,Blob:Pn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],n=>{oo.headers[n]={}});const g0=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),v0=n=>{const e={};let t,i,a;return n&&n.split(`
`).forEach(function(s){a=s.indexOf(":"),t=s.substring(0,a).trim().toLowerCase(),i=s.substring(a+1).trim(),!(!t||e[t]&&g0[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},cd=Symbol("internals");function _s(n){return n&&String(n).trim().toLowerCase()}function Wo(n){return n===!1||n==null?n:ie.isArray(n)?n.map(Wo):String(n)}function _0(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const b0=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Vl(n,e,t,i,a){if(ie.isFunction(i))return i.call(this,e,t);if(a&&(e=t),!!ie.isString(e)){if(ie.isString(i))return e.indexOf(i)!==-1;if(ie.isRegExp(i))return i.test(e)}}function x0(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function y0(n,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(a,r,s){return this[i].call(this,e,a,r,s)},configurable:!0})})}let Xn=class{constructor(e){e&&this.set(e)}set(e,t,i){const a=this;function r(o,l,c){const u=_s(l);if(!u)throw new Error("header name must be a non-empty string");const d=ie.findKey(a,u);(!d||a[d]===void 0||c===!0||c===void 0&&a[d]!==!1)&&(a[d||l]=Wo(o))}const s=(o,l)=>ie.forEach(o,(c,u)=>r(c,u,l));if(ie.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(ie.isString(e)&&(e=e.trim())&&!b0(e))s(v0(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let o={},l,c;for(const u of e){if(!ie.isArray(u))throw TypeError("Object iterator must return a key-value pair");o[c=u[0]]=(l=o[c])?ie.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}s(o,t)}else e!=null&&r(t,e,i);return this}get(e,t){if(e=_s(e),e){const i=ie.findKey(this,e);if(i){const a=this[i];if(!t)return a;if(t===!0)return _0(a);if(ie.isFunction(t))return t.call(this,a,i);if(ie.isRegExp(t))return t.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_s(e),e){const i=ie.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Vl(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let a=!1;function r(s){if(s=_s(s),s){const o=ie.findKey(i,s);o&&(!t||Vl(i,i[o],o,t))&&(delete i[o],a=!0)}}return ie.isArray(e)?e.forEach(r):r(e),a}clear(e){const t=Object.keys(this);let i=t.length,a=!1;for(;i--;){const r=t[i];(!e||Vl(this,this[r],r,e,!0))&&(delete this[r],a=!0)}return a}normalize(e){const t=this,i={};return ie.forEach(this,(a,r)=>{const s=ie.findKey(i,r);if(s){t[s]=Wo(a),delete t[r];return}const o=e?x0(r):String(r).trim();o!==r&&delete t[r],t[o]=Wo(a),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(i,a)=>{i!=null&&i!==!1&&(t[a]=e&&ie.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(a=>i.set(a)),i}static accessor(e){const i=(this[cd]=this[cd]={accessors:{}}).accessors,a=this.prototype;function r(s){const o=_s(s);i[o]||(y0(a,s),i[o]=!0)}return ie.isArray(e)?e.forEach(r):r(e),this}};Xn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(Xn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ie.freezeMethods(Xn);function Wl(n,e){const t=this||oo,i=e||t,a=Xn.from(i.headers);let r=i.data;return ie.forEach(n,function(o){r=o.call(t,r,a.normalize(),e?e.status:void 0)}),a.normalize(),r}function rp(n){return!!(n&&n.__CANCEL__)}function us(n,e,t){nt.call(this,n??"canceled",nt.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(us,nt,{__CANCEL__:!0});function sp(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new nt("Request failed with status code "+t.status,[nt.ERR_BAD_REQUEST,nt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function S0(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function M0(n,e){n=n||10;const t=new Array(n),i=new Array(n);let a=0,r=0,s;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=i[r];s||(s=c),t[a]=l,i[a]=c;let d=r,p=0;for(;d!==a;)p+=t[d++],d=d%n;if(a=(a+1)%n,a===r&&(r=(r+1)%n),c-s<e)return;const g=u&&c-u;return g?Math.round(p*1e3/g):void 0}}function E0(n,e){let t=0,i=1e3/e,a,r;const s=(c,u=Date.now())=>{t=u,a=null,r&&(clearTimeout(r),r=null),n(...c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=i?s(c,u):(a=c,r||(r=setTimeout(()=>{r=null,s(a)},i-d)))},()=>a&&s(a)]}const al=(n,e,t=3)=>{let i=0;const a=M0(50,250);return E0(r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,l=s-i,c=a(l),u=s<=o;i=s;const d={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:c||void 0,estimated:c&&o&&u?(o-s)/c:void 0,event:r,lengthComputable:o!=null,[e?"download":"upload"]:!0};n(d)},t)},ud=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},dd=n=>(...e)=>ie.asap(()=>n(...e)),w0=Pn.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Pn.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Pn.origin),Pn.navigator&&/(msie|trident)/i.test(Pn.navigator.userAgent)):()=>!0,A0=Pn.hasStandardBrowserEnv?{write(n,e,t,i,a,r){const s=[n+"="+encodeURIComponent(e)];ie.isNumber(t)&&s.push("expires="+new Date(t).toGMTString()),ie.isString(i)&&s.push("path="+i),ie.isString(a)&&s.push("domain="+a),r===!0&&s.push("secure"),document.cookie=s.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function T0(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function R0(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function op(n,e,t){let i=!T0(e);return n&&(i||t==!1)?R0(n,e):e}const fd=n=>n instanceof Xn?{...n}:n;function ar(n,e){e=e||{};const t={};function i(c,u,d,p){return ie.isPlainObject(c)&&ie.isPlainObject(u)?ie.merge.call({caseless:p},c,u):ie.isPlainObject(u)?ie.merge({},u):ie.isArray(u)?u.slice():u}function a(c,u,d,p){if(ie.isUndefined(u)){if(!ie.isUndefined(c))return i(void 0,c,d,p)}else return i(c,u,d,p)}function r(c,u){if(!ie.isUndefined(u))return i(void 0,u)}function s(c,u){if(ie.isUndefined(u)){if(!ie.isUndefined(c))return i(void 0,c)}else return i(void 0,u)}function o(c,u,d){if(d in e)return i(c,u);if(d in n)return i(void 0,c)}const l={url:r,method:r,data:r,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(c,u,d)=>a(fd(c),fd(u),d,!0)};return ie.forEach(Object.keys({...n,...e}),function(u){const d=l[u]||a,p=d(n[u],e[u],u);ie.isUndefined(p)&&d!==o||(t[u]=p)}),t}const lp=n=>{const e=ar({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:a,xsrfCookieName:r,headers:s,auth:o}=e;if(e.headers=s=Xn.from(s),e.url=np(op(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ie.isFormData(t)){if(Pn.hasStandardBrowserEnv||Pn.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(ie.isFunction(t.getHeaders)){const l=t.getHeaders(),c=["content-type","content-length"];Object.entries(l).forEach(([u,d])=>{c.includes(u.toLowerCase())&&s.set(u,d)})}}if(Pn.hasStandardBrowserEnv&&(i&&ie.isFunction(i)&&(i=i(e)),i||i!==!1&&w0(e.url))){const l=a&&r&&A0.read(r);l&&s.set(a,l)}return e},C0=typeof XMLHttpRequest<"u",P0=C0&&function(n){return new Promise(function(t,i){const a=lp(n);let r=a.data;const s=Xn.from(a.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:c}=a,u,d,p,g,f;function v(){g&&g(),f&&f(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let h=new XMLHttpRequest;h.open(a.method.toUpperCase(),a.url,!0),h.timeout=a.timeout;function m(){if(!h)return;const b=Xn.from("getAllResponseHeaders"in h&&h.getAllResponseHeaders()),R={data:!o||o==="text"||o==="json"?h.responseText:h.response,status:h.status,statusText:h.statusText,headers:b,config:n,request:h};sp(function(A){t(A),v()},function(A){i(A),v()},R),h=null}"onloadend"in h?h.onloadend=m:h.onreadystatechange=function(){!h||h.readyState!==4||h.status===0&&!(h.responseURL&&h.responseURL.indexOf("file:")===0)||setTimeout(m)},h.onabort=function(){h&&(i(new nt("Request aborted",nt.ECONNABORTED,n,h)),h=null)},h.onerror=function(w){const R=w&&w.message?w.message:"Network Error",P=new nt(R,nt.ERR_NETWORK,n,h);P.event=w||null,i(P),h=null},h.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const R=a.transitional||ip;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),i(new nt(w,R.clarifyTimeoutError?nt.ETIMEDOUT:nt.ECONNABORTED,n,h)),h=null},r===void 0&&s.setContentType(null),"setRequestHeader"in h&&ie.forEach(s.toJSON(),function(w,R){h.setRequestHeader(R,w)}),ie.isUndefined(a.withCredentials)||(h.withCredentials=!!a.withCredentials),o&&o!=="json"&&(h.responseType=a.responseType),c&&([p,f]=al(c,!0),h.addEventListener("progress",p)),l&&h.upload&&([d,g]=al(l),h.upload.addEventListener("progress",d),h.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=b=>{h&&(i(!b||b.type?new us(null,n,h):b),h.abort(),h=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const M=S0(a.url);if(M&&Pn.protocols.indexOf(M)===-1){i(new nt("Unsupported protocol "+M+":",nt.ERR_BAD_REQUEST,n));return}h.send(r||null)})},L0=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,a;const r=function(c){if(!a){a=!0,o();const u=c instanceof Error?c:this.reason;i.abort(u instanceof nt?u:new us(u instanceof Error?u.message:u))}};let s=e&&setTimeout(()=>{s=null,r(new nt(`timeout ${e} of ms exceeded`,nt.ETIMEDOUT))},e);const o=()=>{n&&(s&&clearTimeout(s),s=null,n.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),n=null)};n.forEach(c=>c.addEventListener("abort",r));const{signal:l}=i;return l.unsubscribe=()=>ie.asap(o),l}},D0=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,a;for(;i<t;)a=i+e,yield n.slice(i,a),i=a},k0=async function*(n,e){for await(const t of U0(n))yield*D0(t,e)},U0=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},hd=(n,e,t,i)=>{const a=k0(n,e);let r=0,s,o=l=>{s||(s=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await a.next();if(c){o(),l.close();return}let d=u.byteLength;if(t){let p=r+=d;t(p)}l.enqueue(new Uint8Array(u))}catch(c){throw o(c),c}},cancel(l){return o(l),a.return()}},{highWaterMark:2})},pd=64*1024,{isFunction:fo}=ie,I0=(({Request:n,Response:e})=>({Request:n,Response:e}))(ie.global),{ReadableStream:md,TextEncoder:gd}=ie.global,vd=(n,...e)=>{try{return!!n(...e)}catch{return!1}},N0=n=>{n=ie.merge.call({skipUndefined:!0},I0,n);const{fetch:e,Request:t,Response:i}=n,a=e?fo(e):typeof fetch=="function",r=fo(t),s=fo(i);if(!a)return!1;const o=a&&fo(md),l=a&&(typeof gd=="function"?(f=>v=>f.encode(v))(new gd):async f=>new Uint8Array(await new t(f).arrayBuffer())),c=r&&o&&vd(()=>{let f=!1;const v=new t(Pn.origin,{body:new md,method:"POST",get duplex(){return f=!0,"half"}}).headers.has("Content-Type");return f&&!v}),u=s&&o&&vd(()=>ie.isReadableStream(new i("").body)),d={stream:u&&(f=>f.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(f=>{!d[f]&&(d[f]=(v,h)=>{let m=v&&v[f];if(m)return m.call(v);throw new nt(`Response type '${f}' is not supported`,nt.ERR_NOT_SUPPORT,h)})});const p=async f=>{if(f==null)return 0;if(ie.isBlob(f))return f.size;if(ie.isSpecCompliantForm(f))return(await new t(Pn.origin,{method:"POST",body:f}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(f)||ie.isArrayBuffer(f))return f.byteLength;if(ie.isURLSearchParams(f)&&(f=f+""),ie.isString(f))return(await l(f)).byteLength},g=async(f,v)=>{const h=ie.toFiniteNumber(f.getContentLength());return h??p(v)};return async f=>{let{url:v,method:h,data:m,signal:M,cancelToken:b,timeout:w,onDownloadProgress:R,onUploadProgress:P,responseType:A,headers:G,withCredentials:x="same-origin",fetchOptions:E}=lp(f),W=e||fetch;A=A?(A+"").toLowerCase():"text";let q=L0([M,b&&b.toAbortSignal()],w),D=null;const I=q&&q.unsubscribe&&(()=>{q.unsubscribe()});let F;try{if(P&&c&&h!=="get"&&h!=="head"&&(F=await g(G,m))!==0){let B=new t(v,{method:"POST",body:m,duplex:"half"}),Z;if(ie.isFormData(m)&&(Z=B.headers.get("content-type"))&&G.setContentType(Z),B.body){const[de,me]=ud(F,al(dd(P)));m=hd(B.body,pd,de,me)}}ie.isString(x)||(x=x?"include":"omit");const J=r&&"credentials"in t.prototype,O={...E,signal:q,method:h.toUpperCase(),headers:G.normalize().toJSON(),body:m,duplex:"half",credentials:J?x:void 0};D=r&&new t(v,O);let j=await(r?W(D,E):W(v,O));const ne=u&&(A==="stream"||A==="response");if(u&&(R||ne&&I)){const B={};["status","statusText","headers"].forEach(be=>{B[be]=j[be]});const Z=ie.toFiniteNumber(j.headers.get("content-length")),[de,me]=R&&ud(Z,al(dd(R),!0))||[];j=new i(hd(j.body,pd,de,()=>{me&&me(),I&&I()}),B)}A=A||"text";let re=await d[ie.findKey(d,A)||"text"](j,f);return!ne&&I&&I(),await new Promise((B,Z)=>{sp(B,Z,{data:re,headers:Xn.from(j.headers),status:j.status,statusText:j.statusText,config:f,request:D})})}catch(J){throw I&&I(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new nt("Network Error",nt.ERR_NETWORK,f,D),{cause:J.cause||J}):nt.from(J,J&&J.code,f,D)}}},O0=new Map,cp=n=>{let e=n?n.env:{};const{fetch:t,Request:i,Response:a}=e,r=[i,a,t];let s=r.length,o=s,l,c,u=O0;for(;o--;)l=r[o],c=u.get(l),c===void 0&&u.set(l,c=o?new Map:N0(e)),u=c;return c};cp();const Bc={http:e0,xhr:P0,fetch:{get:cp}};ie.forEach(Bc,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const _d=n=>`- ${n}`,F0=n=>ie.isFunction(n)||n===null||n===!1,up={getAdapter:(n,e)=>{n=ie.isArray(n)?n:[n];const{length:t}=n;let i,a;const r={};for(let s=0;s<t;s++){i=n[s];let o;if(a=i,!F0(i)&&(a=Bc[(o=String(i)).toLowerCase()],a===void 0))throw new nt(`Unknown adapter '${o}'`);if(a&&(ie.isFunction(a)||(a=a.get(e))))break;r[o||"#"+s]=a}if(!a){const s=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(_d).join(`
`):" "+_d(s[0]):"as no adapter specified";throw new nt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return a},adapters:Bc};function $l(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new us(null,n)}function bd(n){return $l(n),n.headers=Xn.from(n.headers),n.data=Wl.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),up.getAdapter(n.adapter||oo.adapter,n)(n).then(function(i){return $l(n),i.data=Wl.call(n,n.transformResponse,i),i.headers=Xn.from(i.headers),i},function(i){return rp(i)||($l(n),i&&i.response&&(i.response.data=Wl.call(n,n.transformResponse,i.response),i.response.headers=Xn.from(i.response.headers))),Promise.reject(i)})}const dp="1.12.2",yl={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{yl[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const xd={};yl.transitional=function(e,t,i){function a(r,s){return"[Axios v"+dp+"] Transitional option '"+r+"'"+s+(i?". "+i:"")}return(r,s,o)=>{if(e===!1)throw new nt(a(s," has been removed"+(t?" in "+t:"")),nt.ERR_DEPRECATED);return t&&!xd[s]&&(xd[s]=!0,console.warn(a(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,s,o):!0}};yl.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function B0(n,e,t){if(typeof n!="object")throw new nt("options must be an object",nt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let a=i.length;for(;a-- >0;){const r=i[a],s=e[r];if(s){const o=n[r],l=o===void 0||s(o,r,n);if(l!==!0)throw new nt("option "+r+" must be "+l,nt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new nt("Unknown option "+r,nt.ERR_BAD_OPTION)}}const $o={assertOptions:B0,validators:yl},ki=$o.validators;let Qa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new ld,response:new ld}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const r=a.stack?a.stack.replace(/^.+\n/,""):"";try{i.stack?r&&!String(i.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+r):i.stack=r}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=ar(this.defaults,t);const{transitional:i,paramsSerializer:a,headers:r}=t;i!==void 0&&$o.assertOptions(i,{silentJSONParsing:ki.transitional(ki.boolean),forcedJSONParsing:ki.transitional(ki.boolean),clarifyTimeoutError:ki.transitional(ki.boolean)},!1),a!=null&&(ie.isFunction(a)?t.paramsSerializer={serialize:a}:$o.assertOptions(a,{encode:ki.function,serialize:ki.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),$o.assertOptions(t,{baseUrl:ki.spelling("baseURL"),withXsrfToken:ki.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&ie.merge(r.common,r[t.method]);r&&ie.forEach(["delete","get","head","post","put","patch","common"],f=>{delete r[f]}),t.headers=Xn.concat(s,r);const o=[];let l=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(t)===!1||(l=l&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,p;if(!l){const f=[bd.bind(this),void 0];for(f.unshift(...o),f.push(...c),p=f.length,u=Promise.resolve(t);d<p;)u=u.then(f[d++],f[d++]);return u}p=o.length;let g=t;for(;d<p;){const f=o[d++],v=o[d++];try{g=f(g)}catch(h){v.call(this,h);break}}try{u=bd.call(this,g)}catch(f){return Promise.reject(f)}for(d=0,p=c.length;d<p;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=ar(this.defaults,e);const t=op(e.baseURL,e.url,e.allowAbsoluteUrls);return np(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){Qa.prototype[e]=function(t,i){return this.request(ar(i||{},{method:e,url:t,data:(i||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(i){return function(r,s,o){return this.request(ar(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}Qa.prototype[e]=t(),Qa.prototype[e+"Form"]=t(!0)});let z0=class fp{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const i=this;this.promise.then(a=>{if(!i._listeners)return;let r=i._listeners.length;for(;r-- >0;)i._listeners[r](a);i._listeners=null}),this.promise.then=a=>{let r;const s=new Promise(o=>{i.subscribe(o),r=o}).then(a);return s.cancel=function(){i.unsubscribe(r)},s},e(function(r,s,o){i.reason||(i.reason=new us(r,s,o),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new fp(function(a){e=a}),cancel:e}}};function G0(n){return function(t){return n.apply(null,t)}}function H0(n){return ie.isObject(n)&&n.isAxiosError===!0}const zc={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(zc).forEach(([n,e])=>{zc[e]=n});function hp(n){const e=new Qa(n),t=Wh(Qa.prototype.request,e);return ie.extend(t,Qa.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(a){return hp(ar(n,a))},t}const qt=hp(oo);qt.Axios=Qa;qt.CanceledError=us;qt.CancelToken=z0;qt.isCancel=rp;qt.VERSION=dp;qt.toFormData=xl;qt.AxiosError=nt;qt.Cancel=qt.CanceledError;qt.all=function(e){return Promise.all(e)};qt.spread=G0;qt.isAxiosError=H0;qt.mergeConfig=ar;qt.AxiosHeaders=Xn;qt.formToJSON=n=>ap(ie.isHTMLForm(n)?new FormData(n):n);qt.getAdapter=up.getAdapter;qt.HttpStatusCode=zc;qt.default=qt;const{Axios:LR,AxiosError:DR,CanceledError:kR,isCancel:UR,CancelToken:IR,VERSION:NR,all:OR,Cancel:FR,isAxiosError:BR,spread:zR,toFormData:GR,AxiosHeaders:HR,HttpStatusCode:VR,formToJSON:WR,getAdapter:$R,mergeConfig:jR}=qt;var V0=Me('<span style="display: flex;"><!></span> <div class="simple-tip svelte-1qxu62q"> </div>',1);function tn(n,e){let t=_t(e,"text",8,""),i=_t(e,"direction",8,"top"),a=Ve(),r=Ve();function s(){if(!_(r)||!_(a))return;const f=_(r).getBoundingClientRect(),v=_(a).getBoundingClientRect();let h=0,m=0;switch(i()){case"bottom":h=f.bottom+8,m=f.left+(f.width-v.width)/2;break;case"left":h=f.top+(f.height-v.height)/2,m=f.left-v.width-8;break;case"right":h=f.top+(f.height-v.height)/2,m=f.right+8;break;case"top":default:h=f.top-v.height-8,m=f.left+(f.width-v.width)/2;break}h=Math.max(4,Math.min(window.innerHeight-v.height-4,h)),m=Math.max(4,Math.min(window.innerWidth-v.width-4,m)),Rn(a,_(a).style.top=`${h}px`),Rn(a,_(a).style.left=`${m}px`)}function o(){Rn(a,_(a).style.opacity=1),s()}function l(){Rn(a,_(a).style.opacity=0)}var c=V0(),u=jt(c),d=S(u);kg(d,e,"default",{}),Za(u,f=>Se(r,f),()=>_(r));var p=N(u,2),g=S(p);Za(p,f=>Se(a,f),()=>_(a)),De(()=>ae(g,t())),vt("mouseenter",u,o),vt("mouseleave",u,l),vt("mousemove",u,s),he(n,c)}const W0="modulepreload",$0=function(n,e){return new URL(n,e).href},yd={},pp=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let s=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));a=s(t.map(u=>{if(u=$0(u,i),u in yd)return;yd[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(!!i)for(let v=o.length-1;v>=0;v--){const h=o[v];if(h.href===u&&(!d||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":W0,d||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),d)return new Promise((v,h)=>{f.addEventListener("load",v),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})},dr=Dt([]);async function Tu(){const{getAccounts:n}=await pp(async()=>{const{getAccounts:e}=await Promise.resolve().then(()=>xp);return{getAccounts:e}},void 0,import.meta.url);dr.set(n())}async function j0(){const{getAccounts:n}=await pp(async()=>{const{getAccounts:e}=await Promise.resolve().then(()=>xp);return{getAccounts:e}},void 0,import.meta.url);dr.set(n())}j0();const Sl=Dt(localStorage.getItem("selectedAccount")||null);Sl.subscribe(n=>{n?localStorage.setItem("selectedAccount",n):localStorage.removeItem("selectedAccount")});const Ml=Ri([Sl,dr],([n,e])=>n&&e.find(t=>t.uuid===n||t.name===n)||null),mp=Ri(Ml,n=>(n==null?void 0:n.name)||""),X0=Ri(Ml,n=>{var e,t;return n!=null&&n.skinData&&((t=(e=n.skinData.urls)==null?void 0:e.walking)==null?void 0:t.bust)||""}),q0=Ri(dr,n=>n.length>0),gp={hasAccount:Ri(dr,n=>n.length>0),selectedAccountUuid:Ri(Ml,n=>(n==null?void 0:n.uuid)||null)},Y0="https://orilauncher.cosmicfi.online/",K0="http://212.227.65.132:11216/api",J0="https://piston-meta.mojang.com/mc/game/version_manifest.json";function jl(n){const e=t=>{t.deltaY!==0&&(t.preventDefault(),n.scrollBy({left:t.deltaY,behavior:"smooth"}))};return n.addEventListener("wheel",e,{passive:!1}),{destroy(){n.removeEventListener("wheel",e)}}}function Hr(n,{size:e}){let t=n.textContent;return t.length>e&&(n.textContent=t.slice(0,e)+"..."),{update({size:i}){n.textContent=t,t.length>i&&(n.textContent=t.slice(0,i)+"...")}}}function Z0(n){var e;return((e=n==null?void 0:n.toLocaleString)==null?void 0:e.call(n))??n}function Q0(){return Array.from(crypto.getRandomValues(new Uint8Array(16))).map(n=>n.toString(16).padStart(2,"0")).join("")}function Xl(n,{snapX:e=-60,threshold:t=-30}={}){let i=0,a=0,r=!1,s=!1,o=!1;const l=n,c=n.parentElement.querySelector(".account-action-btn-cont");function u(v){l.style.transform=`translateX(${v}px)`}function d(v){s||(r=!0,o=!1,c==null||c.classList.remove("hide"),l.style.transition="none",a=(v.touches?v.touches[0].clientX:v.clientX)-i,window.addEventListener("mousemove",p),window.addEventListener("mouseup",g),window.addEventListener("touchmove",p,{passive:!1}),window.addEventListener("touchend",g))}function p(v){if(!r)return;let h=(v.touches?v.touches[0].clientX:v.clientX)-a;h>0&&(h=0),h<e*1.5&&(h=e*1.5),Math.abs(i-h)>3&&(o=!0),i=h,u(i),v.preventDefault&&v.preventDefault()}function g(){r=!1,l.style.transition="transform 0.2s cubic-bezier(.4,1.4,.6,1)",i<t?i=e:(i=0,c==null||c.classList.add("hide")),s=!0,u(i),setTimeout(()=>{s=!1},200),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g),window.removeEventListener("touchmove",p),window.removeEventListener("touchend",g),n.wasDragged=o,setTimeout(()=>{n.wasDragged=!1},0)}function f(v){!n.contains(v.target)&&i===e&&(l.style.transition="transform 0.2s cubic-bezier(.4,1.4,.6,1)",i=0,u(i),c==null||c.classList.add("hide"))}return l.addEventListener("mousedown",d),l.addEventListener("touchstart",d,{passive:!1}),document.addEventListener("click",f),{destroy(){l.removeEventListener("mousedown",d),l.removeEventListener("touchstart",d),document.removeEventListener("click",f)}}}async function ex(){const n=await window.electron.getMemoryInfo();return n&&typeof n.total=="number"?Math.round(n.total/1024/1024):null}async function tx(){return await window.electron.openFolderDialog()}async function nx(n){await window.electron.openFolderInExplorer(n)}async function ix(){return await window.electron.getAppFolder()}async function ax(){return await window.electron.getMinecraftFolder()}async function rx(){return await window.electron.getBackupFolder()}const Ru=Dt([]),Bi=Dt(""),aa=Dt(""),Vr=Dt("release");function ql(n,e){const t=localStorage.getItem(e);t&&n.set(t),n.subscribe(i=>{i&&localStorage.setItem(e,i)})}async function sx(){const t=(await(await fetch(J0)).json()).versions.filter(l=>l.type==="release"),i={};t.forEach(l=>{const c=l.id.match(/^(\d+\.\d+)/),u=c?c[1]:l.id;i[u]||(i[u]=[]),i[u].push({id:l.id,type:l.type})});const a=Object.entries(i).map(([l,c])=>({name:l,variants:c}));Ru.set(a),ql(Bi,"selectedMajor"),ql(aa,"selectedVariant"),ql(Vr,"selectedType");let r,s,o;if(Bi.subscribe(l=>r=l)(),aa.subscribe(l=>s=l)(),Vr.subscribe(l=>o=l)(),!r||!s||!o){const l=a[0],c=l.variants.find(u=>u.id===l.name)||l.variants[0];Bi.set(l.name),aa.set(c.id),Vr.set("release")}}function rl(n,e,t){Bi.set(n),aa.set(e),Vr.set(t)}function ox(n){switch(n){case"forge":return{enable:!0,type:"forge",build:"latest"};case"fabric":return{enable:!0,type:"fabric",build:"latest"};case"release":default:return{enable:!1,type:null,build:null}}}const Cu=K0;async function lx(){try{return(await qt.get(`${Cu}/players-hype`)).data}catch(n){return n.response?console.error("Server error:",n.response.status,n.response.data):n.request?console.error("No response received from server:",n.request):console.error("Error setting up request:",n.message),{totalOnlinePlayers:0}}}async function Sd(){const n=await fetch(`${Cu}/news`,{headers:{"User-Agent":"OriLauncher/2.0.0 (Electron)",Accept:"application/json","Cache-Control":"no-cache"},mode:"cors"});if(!n.ok)throw new Error("Failed to fetch news");return await n.json()}class cx{constructor(){this.baseUrl="https://starlightskins.lunareclipse.studio/render",this.cache=new Map,this.cacheExpiry=1440*60*1e3}generateSkinUrls(e){return{pixel:{full:`${this.baseUrl}/pixel/${e}/full`,bust:`${this.baseUrl}/pixel/${e}/bust`,face:`${this.baseUrl}/pixel/${e}/face`},default:{full:`${this.baseUrl}/default/${e}/full`,bust:`${this.baseUrl}/default/${e}/bust`,face:`${this.baseUrl}/default/${e}/face`},walking:{full:`${this.baseUrl}/walking/${e}/full`,bust:`${this.baseUrl}/walking/${e}/bust`,face:`${this.baseUrl}/walking/${e}/face`},archer:{full:`${this.baseUrl}/archer/${e}/full`,bust:`${this.baseUrl}/archer/${e}/bust`,face:`${this.baseUrl}/archer/${e}/face`},reading:{full:`${this.baseUrl}/reading/${e}/full`,bust:`${this.baseUrl}/reading/${e}/bust`,face:`${this.baseUrl}/reading/${e}/face`},dungeons:{full:`${this.baseUrl}/dungeons/${e}/full`,bust:`${this.baseUrl}/dungeons/${e}/bust`,face:`${this.baseUrl}/dungeons/${e}/face`},crossed:{full:`${this.baseUrl}/crossed/${e}/full`,bust:`${this.baseUrl}/crossed/${e}/bust`,face:`${this.baseUrl}/crossed/${e}/face`},lunging:{full:`${this.baseUrl}/lunging/${e}/full`,bust:`${this.baseUrl}/lunging/${e}/bust`,face:`${this.baseUrl}/lunging/${e}/face`},crouching:{full:`${this.baseUrl}/crouching/${e}/full`,bust:`${this.baseUrl}/crouching/${e}/bust`,face:`${this.baseUrl}/crouching/${e}/face`},isometric:{full:`${this.baseUrl}/isometric/${e}/full`,bust:`${this.baseUrl}/isometric/${e}/bust`,face:`${this.baseUrl}/isometric/${e}/face`},ultimate:{full:`${this.baseUrl}/ultimate/${e}/full`,bust:`${this.baseUrl}/ultimate/${e}/bust`,face:`${this.baseUrl}/ultimate/${e}/face`},pointing:{full:`${this.baseUrl}/pointing/${e}/full`,bust:`${this.baseUrl}/pointing/${e}/bust`,face:`${this.baseUrl}/pointing/${e}/face`},skin:{default:`${this.baseUrl}/skin/${e}/default`,processed:`${this.baseUrl}/skin/${e}/processed`,barebone:`${this.baseUrl}/skin/${e}/barebones`}}}async validateSkinUrl(e,t=3e3){try{return!!new URL(e).hostname.includes("starlightskins.lunareclipse.studio")}catch(i){return console.warn(`Invalid skin URL format ${e}:`,i.message),!1}}async validateSkinUrlWithFetch(e,t=3e3){try{const i=new AbortController,a=setTimeout(()=>i.abort(),t),r=await fetch(e,{method:"HEAD",signal:i.signal,headers:{"User-Agent":"OriLauncher/2.0.0 (Electron)",Accept:"*/*","Cache-Control":"no-cache"},mode:"no-cors"});return clearTimeout(a),r.ok||r.type==="opaque"}catch(i){return console.warn(`Failed to validate skin URL ${e}:`,i.message),!1}}async getSkinData(e){const t=e.toLowerCase(),i=this.cache.get(t);if(i&&Date.now()-i.timestamp<this.cacheExpiry)return i.data;try{const a=this.generateSkinUrls(e),r={username:e,hasCustomSkin:!0,urls:a,timestamp:Date.now()};return this.cache.set(t,{data:r,timestamp:Date.now()}),r}catch(a){return console.error(`Error generating skin data for ${e}:`,a),this.getSteveSkinData()}}async getSkinDataWithValidation(e){const t=e.toLowerCase(),i=this.cache.get(t);if(i&&Date.now()-i.timestamp<this.cacheExpiry)return i.data;try{const a=this.generateSkinUrls(e),[r,s]=await Promise.all([this.validateSkinUrlWithFetch(a.face),this.validateSkinUrlWithFetch(a.rawSkin)]);if(r||s){const o={username:e,hasCustomSkin:!0,urls:a,timestamp:Date.now()};return this.cache.set(t,{data:o,timestamp:Date.now()}),o}return this.getSteveSkinData()}catch(a){return console.error(`Error fetching skin data for ${e}:`,a),this.getSteveSkinData()}}getSteveSkinData(){return{username:"MHF_Steve",hasCustomSkin:!1,urls:this.generateSkinUrls("MHF_Steve"),timestamp:Date.now()}}getSkinUrl(e,t="default"){return!e||!e.urls?this.generateSkinUrls("MHF_Steve")[t]||this.generateSkinUrls("MHF_Steve").default:e.urls[t]||e.urls.default}clearCache(){this.cache.clear()}cleanupCache(){const e=Date.now();for(const[t,i]of this.cache.entries())e-i.timestamp>this.cacheExpiry&&this.cache.delete(t)}}const $s=new cx,vp="user_accounts";function El(){return JSON.parse(localStorage.getItem(vp)||"[]")}function Pu(n){localStorage.setItem(vp,JSON.stringify(n))}function Lu(){return El()}async function Gc(n){const e=El();if(e.some(i=>n.type==="offline"&&i.type==="offline"&&i.name===n.name||n.type==="online"&&i.type==="online"&&i.uuid===n.uuid))return!1;console.log(`Adding ${n.type} account: ${n.name}`);try{n.skinData=await $s.getSkinData(n.name),console.log(`Successfully loaded skin data for ${n.name}`)}catch{console.warn(`Failed to load skin data for ${n.name}, using Steve fallback`),n.skinData=$s.getSteveSkinData()}return e.push(n),Pu(e),Tu(),!0}function Du(n,e){const t=El(),i=t.findIndex(a=>a.type==="offline"&&a.name===n||a.type==="online"&&a.uuid===n);return i===-1?!1:(t[i]={...t[i],...e},Pu(t),Tu(),!0)}function _p(n){let e=El();const t=localStorage.getItem("selectedAccount"),i=e.some(a=>(a.uuid===n||a.name===n)&&(a.uuid===t||a.name===t));e=e.filter(a=>a.uuid!==n&&a.name!==n),Pu(e),Tu(),i&&Sl.set(null)}function Wr(n){Sl.set(n)}function wl(){const n=localStorage.getItem("selectedAccount");return n&&Lu().find(t=>t.uuid===n||t.name===n)||null}function js(n,e="default"){return!n||!n.skinData?$s.getSkinUrl(null,e):$s.getSkinUrl(n.skinData,e)}function bp(){return $s.getSteveSkinData()}const xp=Object.freeze(Object.defineProperty({__proto__:null,addAccount:Gc,getAccounts:Lu,getDefaultSkin:bp,getSelectedAccount:wl,getSkinUrl:js,removeAccount:_p,setSelectedAccount:Wr,updateAccount:Du},Symbol.toStringTag,{value:"Module"})),ux=Dt(""),dx=Dt(""),fx=Dt("");Ri([ux,dx,fx],([n,e,t])=>({major:n,variant:e,type:t}));const ku="ori_settings";let jo,Hc,Vc;async function hx(){return jo||(jo=await ix(),Hc=await ax(),Vc=await rx()),{appFolder:jo,minecraftFolder:Hc,backupFolder:Vc}}async function Xs(){return await hx(),{general:{appearance:{theme:{value:"dark"},language:{value:"en"}},startup:{autoStart:{value:!1},minimizeToTray:{value:!1}}},game:{versions:{allowSnapshotVersions:{value:!1}},performance:{ramAllocation:{min:{value:2},max:{value:3}}},resolution:{fullscreen:{value:!1},width:{value:1280},height:{value:720}},runtime:{JVMArgs:{value:"-XX:+UnlockExperimentalVMOptions -XX:+UseG1GC -XX:G1NewSizePercent=20 -XX:G1ReservePercent=20 -XX:MaxGCPauseMillis=50 -XX:G1HeapRegionSize=32M"},gameArgs:{value:""},environmentVariables:{value:""},javaPath:{value:""},runAsAdmin:{value:!1},runDetached:{value:!0},intelEnabledMac:{value:!1},verifyGameFiles:{value:!1},ignored:{value:["config","essential","logs","resourcepacks","saves","screenshots","shaderpacks","W-OVERFLOW","options.txt","optionsof.txt"]}}},launcher:{updates:{checkForUpdates:{value:!0}},integration:{discordRichPresence:{value:!1}},notification:{updateNotification:{value:!0},playSound:{value:!0},systemNotifications:{value:!0},categories:{updates:{value:!0},launches:{value:!0},downloads:{value:!0},errors:{value:!0},general:{value:!0}},priority:{showLowPriority:{value:!0},showNormalPriority:{value:!0},showHighPriority:{value:!0},showUrgentPriority:{value:!0}},sound:{volume:{value:.7},onlyForImportant:{value:!1}}}},storage:{directories:{launcherFolder:{value:jo},minecraftFolder:{value:Hc}},backup:{backupSaves:{value:!0},backupFolder:{value:Vc}}},developer:{isDeveloper:{value:!1},debug:{enableDevTools:{value:!1}},experimental:{allowBetaFeatures:{value:!1}}}}}Xs();async function Us(){try{const n=localStorage.getItem(ku);if(n)return JSON.parse(n);const e=await Xs();return structuredClone(e)}catch{const n=await Xs();return structuredClone(n)}}function $r(n){localStorage.setItem(ku,JSON.stringify(n))}async function px(n){const e=await Us();return n.split(".").reduce((t,i)=>t&&t[i],e)}async function mx(n,e){const t=await Us(),i=n.split(".");let a=t;for(let s=0;s<i.length-1;s++){if(!a[i[s]])return;a=a[i[s]]}const r=i[i.length-1];a[r]&&a[r].value!==void 0&&(a[r].value=e,$r(t))}async function gx(){const n=await Xs();$r(n)}async function yp(){if(!localStorage.getItem(ku)){const n=await Xs();$r(n)}}const bs={DEBUG:{level:0,label:"DEBUG",consoleStyle:"color: #ba68c8"},INFO:{level:1,label:"INFO",consoleStyle:"color: #4fc3f7"},SUCCESS:{level:2,label:"SUCCESS",consoleStyle:"color: #69f0ae"},WARNING:{level:3,label:"WARNING",consoleStyle:"color: #ffb300"},ERROR:{level:4,label:"ERROR",consoleStyle:"color: #ff5252"}},vx=1e3;function _x(){const{subscribe:n,set:e,update:t}=Dt([]);let i="DEBUG",a=vx,r=!1,s=!1;function o(f){var v;return((v=bs[f])==null?void 0:v.level)??0}function l(f){return o(f)>=o(i)}function c(f){const v=[{regex:/^‚ñΩ Downloading .+\.\.\.\./,base:"‚ñΩ Downloading files",shouldStack:!0},{regex:/^‚Äª Extracting Files \.\.\. .+/,base:"‚Äª Extracting Files",shouldStack:!0},{regex:/^‚ÅÇ Verifying Files \.\.\. .+/,base:"‚ÅÇ Verifying Files",shouldStack:!0}];for(const h of v)if(h.regex.test(f)&&h.shouldStack)return h.base;return null}async function u(f=!1){var v,h;if(!s){if(f)try{const m=await((h=(v=window.electron)==null?void 0:v.readSessionLogs)==null?void 0:h.call(v,{maxSessions:3,maxLines:a}));m!=null&&m.success&&Array.isArray(m.logs)&&(e(m.logs.map(M=>({raw:M}))),console.log(`%c[LOGGER]%c Loaded ${m.logs.length} previous log lines`,"font-weight:bold",""))}catch(m){console.error("[LOGGER] Failed to load previous session logs:",m)}else e([]);s=!0}}async function d(){var f,v;if(!r)try{const h=await((v=(f=window.electron)==null?void 0:f.startLogSession)==null?void 0:v.call(f));h!=null&&h.success&&(r=!0,e([]),console.log("%c[LOGGER]%c Session started:","font-weight:bold","",h.sessionFile))}catch(h){console.error("[LOGGER] startSession failed:",h)}}async function p(){var f,v;if(r)try{await((v=(f=window.electron)==null?void 0:f.endLogSession)==null?void 0:v.call(f)),r=!1,console.log("%c[LOGGER]%c Session ended","font-weight:bold","")}catch(h){console.error("[LOGGER] endSession failed:",h)}}async function g(f,v,h=null){var P,A;bs[f]||(f="INFO");const m=new Date().toISOString(),M={timestamp:m,level:f,message:v,data:h},b=c(v);if(l(f)&&t(G=>{let x=[...G];if(b){const E=Math.min(5,x.length);let W=-1;for(let q=x.length-1;q>=x.length-E;q--)if(x[q]&&x[q].level===f&&x[q].stackPattern===b){W=q;break}W!==-1?x[W]={...x[W],count:(x[W].count||1)+1,lastMessage:v,timestamp:m,data:h,lastUpdate:Date.now()}:x.push({...M,stackPattern:b,count:1,lastMessage:v,isStackable:!0,lastUpdate:Date.now()})}else x.push(M);return x.length>a?x.slice(x.length-a):x}),r)try{await((A=(P=window.electron)==null?void 0:P.writeSessionLog)==null?void 0:A.call(P,M))}catch(G){console.error("[LOGGER] Failed to write session log:",G)}const w=bs[f].consoleStyle,R=`[${f}] ${v}`;f==="ERROR"?console.error(`%c${R}`,w,h||""):f==="WARNING"?console.warn(`%c${R}`,w,h||""):console.log(`%c${R}`,w,h||"")}return{subscribe:n,init:(f=!1)=>u(f),startSession:d,endSession:p,debug:(f,v)=>g("DEBUG",f,v),info:(f,v)=>g("INFO",f,v),success:(f,v)=>g("SUCCESS",f,v),warn:(f,v)=>g("WARNING",f,v),error:(f,v)=>g("ERROR",f,v),clear:()=>e([]),reload:()=>u(!0),setMinLevel:f=>{bs[f]&&(i=f)},setMaxEntries:f=>{a=f},getCurrentLevel:()=>i,isSessionActive:()=>r,logLevels:bs}}const It=_x(),Fi=Dt(!1),Si=Dt("ready"),xs=Dt(null),Md=Dt(null),Sp=Ri([Fi,Si],([n,e])=>!n&&(e==="ready"||e==="error")),bx=Ri([Si,an],([n,e])=>{switch(n){case"preparing":return`${e("mainContent.launch.launchStatus.preparing")}...`;case"downloading":return`${e("mainContent.launch.launchStatus.downloading")} ${e("mainContent.launch.launchStatus.assets")}...`;case"extracting":return`${e("mainContent.launch.launchStatus.extracting")}...`;case"verifying":return`${e("mainContent.launch.launchStatus.verifying")}...`;case"running":return`${e("mainContent.launch.launchStatus.running")}`;case"error":return`${e("mainContent.launch.launchStatus.error")}`;default:return`${e("mainContent.launch.launchStatus.ready")}`}}),Cn={setLaunching:n=>{Fi.set(n)},setStatus:n=>{Si.set(n),n==="ready"&&xs.set(null)},setError:n=>{xs.set(n),Si.set("error"),Fi.set(!1);const e=ei(Md);e&&(clearTimeout(e),Md.set(null)),n&&n.includes("timeout")&&(Si.set("ready"),xs.set(null))},resetTimeout:()=>{Si.set("ready"),xs.set(null),Fi.set(!1)},reset:()=>{Fi.set(!1),Si.set("ready"),xs.set(null)}};class xx{constructor(){this.isEnabled=!1,this.isInitialized=!1}async initialize(){var t,i,a;const e=ei(dt);if(this.isEnabled=((a=(i=(t=e==null?void 0:e.launcher)==null?void 0:t.integration)==null?void 0:i.discordRichPresence)==null?void 0:a.value)||!1,this.isEnabled&&!this.isInitialized)try{const r=await window.electron.discordRPC.init();r.success?(this.isInitialized=!0,console.log("Discord RPC initialized successfully"),await this.setIdleActivity()):console.error("Failed to initialize Discord RPC:",r.error)}catch(r){console.error("Discord RPC initialization error:",r)}}async disconnect(){if(this.isInitialized)try{await window.electron.discordRPC.disconnect(),this.isInitialized=!1,console.log("Discord RPC disconnected")}catch(e){console.error("Discord RPC disconnect error:",e)}}async updateSettings(e){const t=this.isEnabled;this.isEnabled=e,e&&!t?await this.initialize():!e&&t?(await this.clearActivity(),await this.disconnect()):e&&this.isInitialized&&await this.setIdleActivity()}async setIdleActivity(){if(!(!this.isEnabled||!this.isInitialized))try{await window.electron.discordRPC.setIdle()}catch(e){console.error("Failed to set idle activity:",e)}}async setLaunchingActivity(){if(!(!this.isEnabled||!this.isInitialized))try{const e=ei(Bi),t=ei(aa);await window.electron.discordRPC.setLaunching(e,t)}catch(e){console.error("Failed to set launching activity:",e)}}async setPlayingActivity(){if(!(!this.isEnabled||!this.isInitialized))try{const e=ei(Bi),t=ei(aa),i=wl(),a=(i==null?void 0:i.username)||(i==null?void 0:i.name)||"Player";await window.electron.discordRPC.setPlaying(e,t,a)}catch(e){console.error("Failed to set playing activity:",e)}}async setDownloadingActivity(e){if(!(!this.isEnabled||!this.isInitialized))try{const t=ei(Bi);await window.electron.discordRPC.setDownloading(e,t)}catch(t){console.error("Failed to set downloading activity:",t)}}async clearActivity(){if(!(!this.isEnabled||!this.isInitialized))try{await window.electron.discordRPC.clear()}catch(e){console.error("Failed to clear activity:",e)}}async getStatus(){if(!this.isInitialized)return{isConnected:!1,currentActivity:null};try{return await window.electron.discordRPC.getStatus()}catch(e){return console.error("Failed to get Discord RPC status:",e),{isConnected:!1,currentActivity:null}}}async refreshActivity(){var t;if(!this.isEnabled||!this.isInitialized)return;const e=ei(Si);switch(e.status){case"running":await this.setPlayingActivity();break;case"downloading":await this.setDownloadingActivity(((t=e.progress)==null?void 0:t.percentage)||0);break;case"launching":await this.setLaunchingActivity();break;default:await this.setIdleActivity();break}}}const ra=new xx;class yx{constructor(){this.audio=null,this.notificationHistory=[],this.maxHistorySize=50,this.currentT=()=>{},this.unsubscribeT=an.subscribe(e=>{this.currentT=e})}async initialize(){"Notification"in window&&Notification.permission==="default"&&await Notification.requestPermission(),this.preloadSound()}preloadSound(){try{this.audio=new Audio("./sfx/orilauncher-notification.ogg"),this.audio.preload="auto",this.audio.volume=.7}catch(e){console.warn("Failed to preload notification sound:",e)}}async playSound(){var i,a,r;const e=ei(dt);if(((r=(a=(i=e==null?void 0:e.launcher)==null?void 0:i.notification)==null?void 0:a.playSound)==null?void 0:r.value)&&this.audio)try{this.audio.currentTime=0,await this.audio.play()}catch(s){console.warn("Failed to play notification sound:",s)}}async showNotification(e){var f,v,h;const{title:t,message:i,type:a="info",category:r="general",priority:s="normal",showToastOnly:o=!1,showSystemOnly:l=!1,duration:c=3e3,actions:u=[],icon:d=null}=e,p=ei(dt),g=(h=(v=(f=p==null?void 0:p.launcher)==null?void 0:f.notification)==null?void 0:v.updateNotification)==null?void 0:h.value;this.addToHistory({title:t,message:i,type:a,category:r,priority:s,timestamp:Date.now()}),l||$t(i,a,c),!o&&g&&"Notification"in window&&Notification.permission==="granted"&&await this.showSystemNotification({title:t,message:i,type:a,icon:d,actions:u}),await this.playSound()}async showSystemNotification({title:e,message:t,type:i,icon:a,actions:r}){try{if(window.electron&&window.electron.showSystemNotification)await window.electron.showSystemNotification({title:e,body:t,icon:a||this.getIconForType(i),actions:r,silent:!0});else{const s=new Notification(e,{body:t,icon:a||this.getIconForType(i),badge:"/icons/default.png",tag:`ori-launcher-${i}`,requireInteraction:i==="error",actions:r,silent:!0});i!=="error"&&setTimeout(()=>s.close(),5e3)}return{success:!0}}catch(s){return console.warn("Failed to show system notification:",s),{success:!1,error:s.message}}}getIconForType(e){const t={success:"/icons/default.png",info:"/icons/default.png",warning:"/icons/default.png",error:"/icons/default.png"};return t[e]||t.info}addToHistory(e){this.notificationHistory.unshift(e),this.notificationHistory.length>this.maxHistorySize&&(this.notificationHistory=this.notificationHistory.slice(0,this.maxHistorySize))}getHistory(){return this.notificationHistory}clearHistory(){this.notificationHistory=[]}async showUpdateAvailable(e){await this.showNotification({title:this.currentT("notifications.updateAvailable"),message:this.currentT("notifications.updateAvailableMessage",{version:this.currentT("version",{version:e})}),type:"info",category:"update",priority:"normal",actions:[{action:"update",title:this.currentT("notifications.updateNow")},{action:"later",title:this.currentT("notifications.later")}]})}async showLaunchSuccess(e){await this.showNotification({title:this.currentT("notifications.gameLaunched"),message:this.currentT("notifications.gameLaunchedMessage",{version:this.currentT("version",{version:e})}),type:"success",category:"launch",priority:"low",duration:2e3})}async showLaunchError(e){await this.showNotification({title:this.currentT("notifications.launchFailed"),message:this.currentT("notifications.launchFailedMessage"),type:"error",category:"launch",priority:"high"})}async showDownloadComplete(e){await this.showNotification({title:this.currentT("notifications.downloadComplete"),message:this.currentT("notifications.downloadCompleteMessage",{item:e}),type:"success",category:"download",priority:"normal"})}async showConnectionLost(){await this.showNotification({title:this.currentT("notifications.connectionLost"),message:this.currentT("notifications.connectionLostMessage"),type:"warning",category:"general",priority:"normal"})}async showConnectionRestored(){await this.showNotification({title:this.currentT("notifications.connectionRestored"),message:this.currentT("notifications.connectionRestoredMessage"),type:"success",category:"general",priority:"low",duration:2e3})}}const Mp=new yx;async function Ep(){var l,c,u,d,p,g,f,v,h,m,M,b,w,R,P,A,G,x,E,W,q;const n=ei(dt),e=(u=(c=(l=n==null?void 0:n.general)==null?void 0:l.appearance)==null?void 0:c.theme)==null?void 0:u.value;e&&document.body.setAttribute("data-theme",e);const t=(g=(p=(d=n==null?void 0:n.general)==null?void 0:d.appearance)==null?void 0:p.language)==null?void 0:g.value;t&&(Mu.set(t),console.log("Language set to:",t));const i=(f=n==null?void 0:n.developer)==null?void 0:f.isDeveloper,a=(m=(h=(v=n==null?void 0:n.developer)==null?void 0:v.debug)==null?void 0:h.enableDevTools)==null?void 0:m.value;i&&a&&((M=window==null?void 0:window.electron)!=null&&M.openDevTools)&&window.electron.openDevTools(),((R=(w=(b=n==null?void 0:n.launcher)==null?void 0:b.integration)==null?void 0:w.discordRichPresence)==null?void 0:R.value)?(console.log("Discord RPC enabled."),ra.initialize()):ra.disconnect(),await Mp.initialize(),((G=(A=(P=n==null?void 0:n.launcher)==null?void 0:P.notification)==null?void 0:A.playSound)==null?void 0:G.value)&&console.log("Notification sounds enabled.");const o=(W=(E=(x=n==null?void 0:n.general)==null?void 0:x.startup)==null?void 0:E.autoStart)==null?void 0:W.value;if(o!==void 0&&((q=window.electron)!=null&&q.autoStartSync))try{await window.electron.autoStartSync(o),console.log("Auto-start setting applied:",o)}catch(D){console.error("Failed to apply auto-start setting:",D)}}function Sx(){const{subscribe:n,set:e,update:t}=Dt({});let i=!1;const a=async()=>{if(!i){await yp();const r=await Us();e(r),i=!0}};return n(r=>{i&&Object.keys(r).length>0&&$r(r)}),{subscribe:n,init:a,set:r=>{e(r),$r(r)},update:r=>{t(s=>{const o=r(structuredClone(s));return $r(o),o})},updatePath:async(r,s)=>{await mx(r,s);const o=await Us();e(o)},getPath:async r=>await px(r),reset:async()=>{await gx();const r=await Us();e(structuredClone(r)),await Ep()}}}const dt=Sx();var Mx=Me('<button class="version-change-btn launch-cancel-btn svelte-1djwkbm" aria-label="Change version"><i class="fa fa-stop"></i></button>'),Ex=Me('<div class="rss-card-container skeleton svelte-1djwkbm"><div class="thumbnail skeleton-bg svelte-1djwkbm"></div> <div class="rss-title-container svelte-1djwkbm"><span class="skeleton-text"></span> <div class="redirect-btn skeleton-btn svelte-1djwkbm"></div></div></div>'),wx=Me('<div class="rss-card-container svelte-1djwkbm"><div class="thumbnail svelte-1djwkbm"></div> <div class="rss-title-container svelte-1djwkbm"><span> </span> <a aria-label="rss-btn"><i class="fa fa-arrow-up-right-from-square"></i></a></div></div>'),Ax=Me('<div class="launch-news-container svelte-1djwkbm"><div class="launch-container svelte-1djwkbm"><div class="version-major svelte-1djwkbm"><h2 class="svelte-1djwkbm"> </h2></div> <div class="version-tag svelte-1djwkbm"> </div> <div class="version-summery svelte-1djwkbm"> </div> <div><button><span class="version-label svelte-1djwkbm"><!></span> <span><!></span></button> <!></div></div> <div class="bottom-group svelte-1djwkbm"><div class="rss-wrapper svelte-1djwkbm"><div class="wrapper svelte-1djwkbm"><div class="-rx svelte-1djwkbm"><div class="scroll-container svelte-1djwkbm"><!></div></div></div></div></div></div>');function Tx(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=()=>je(Vr,"$selectedType",t),s=()=>je(Fi,"$isLaunching",t),o=()=>je(mp,"$selectedAccountUsername",t),l=()=>je(b,"$hasAccount",t),c=()=>je(aa,"$selectedVariant",t),u=()=>je(dt,"$settings",t),d=()=>je(Bi,"$selectedMajor",t),p=()=>je(Si,"$launchStatus",t),g=()=>je(Sp,"$canLaunch",t),f=()=>je(bx,"$launchButtonText",t),v=Ve(),h=Ve(),m=Ve();let M=Ve([]),{hasAccount:b}=gp;cr(async()=>{await Sd(),Se(M,(await Sd()).sort((ye,we)=>new Date(we.date)-new Date(ye.date))),console.log(_(M))});function w(ye){const we=(ye==null?void 0:ye.map(Ge=>Ge.toLowerCase()))||[];return we.includes("update")?"btn-rss-update":we.includes("feature")?"btn-rss-announcement":"btn-rss-news"}async function R(){if(!s()){if(!o()){l()?Ot.activeTab.set("accountmanager"):Ot.toggleModel.set("accountadder");return}try{await It.startSession(),It.success("--------------------------------------------------------------------"),It.success(`‚ñ† 
${new Date().toLocaleString()} : ${a()("mainContent.launch.launchStatus.preparing")} [ Minecraft - ${r()} - ${c()} ]
`),It.success("--------------------------------------------------------------------"),Cn.setLaunching(!0),Cn.setStatus("preparing");const ye=ox(r());let we={url:null,authenticator:wl(),timeout:1e4,path:u().storage.directories.minecraftFolder.value,version:c(),detached:u().game.runtime.runDetached.value,downloadFileMultiple:10,intelEnabledMac:u().game.runtime.intelEnabledMac.value,loader:ye||{enable:!1},verify:u().game.runtime.verifyGameFiles.value,ignored:u().game.runtime.ignored.value,javaPath:u().game.runtime.javaPath.value===""?null:u().game.runtime.javaPath.value,JVM_ARGS:u().game.runtime.JVMArgs.value.split(" ")||[],GAME_ARGS:u().game.runtime.gameArgs.value.split(" ")||[],screen:{fullscreen:u().game.resolution.fullscreen.value,width:u().game.resolution.width.value,height:u().game.resolution.height.value},memory:{min:`${u().game.performance.ramAllocation.min.value}G`,max:`${u().game.performance.ramAllocation.max.value}G`}};await window.electron.launchGame(we)}catch(ye){Cn.setError(ye.message||"Launch failed"),$t("Something went wrong while launching the game. Please try again later.","error"),Cn.reset()}await ra.setIdleActivity()}}ft(()=>a(),()=>{Se(v,[{id:"vanilla",description:a()("instanceManager.version.versionTypes.vanilla.description")},{id:"forge",description:a()("instanceManager.version.versionTypes.forge.description")},{id:"fabric",description:a()("instanceManager.version.versionTypes.fabric.description")}])}),ft(()=>r(),()=>{Se(h,r()==="release"?"vanilla":r())}),ft(()=>(_(v),_(h)),()=>{Se(m,_(v).find(ye=>ye.id===_(h))||_(v)[0])}),Ci(),nn();var P=Ax(),A=S(P),G=S(A),x=S(G),E=S(x),W=N(G,2),q=S(W),D=N(W,2),I=S(D),F=N(D,2);let J;var O=S(F);let j;var ne=S(O),re=S(ne);{var B=ye=>{var we=$a();De(Ge=>ae(we,Ge),[()=>(p(),a(),U(()=>p()==="running"?p():a()("mainContent.launch.launching")))]),he(ye,we)},Z=ye=>{var we=$a();De(Ge=>ae(we,`${Ge??""} ${c()??""}`),[()=>(a(),U(()=>a()("mainContent.launch.label")))]),he(ye,we)};at(re,ye=>{s()?ye(B):ye(Z,!1)})}var de=N(ne,2);let me;var be=S(de);{var Re=ye=>{var we=$a();De(Ge=>ae(we,Ge),[()=>(a(),U(()=>a()("mainContent.launch.launchStatus.ready")))]),he(ye,we)},Ce=ye=>{var we=$a();De(()=>ae(we,f())),he(ye,we)};at(be,ye=>{p()==="ready"?ye(Re):ye(Ce,!1)})}var _e=N(O,2);{var Ie=ye=>{{let we=Ze(()=>(p(),a(),U(()=>p()==="running"?a()("mainContent.launch.closeGame"):a()("mainContent.launch.cancel"))));tn(ye,{get text(){return _(we)},direction:"right",children:(Ge,ut)=>{var Pe=Mx();vt("click",Pe,async()=>{await window.electron.cancelLaunch()}),he(Ge,Pe)},$$slots:{default:!0}})}};at(_e,ye=>{s()&&ye(Ie)})}var ct=N(A,2),ze=S(ct),z=S(ze),Be=S(z),Ee=S(Be),Ue=S(Ee);{var Fe=ye=>{var we=ii(),Ge=jt(we);vn(Ge,0,()=>Array(3),Ln,(ut,Pe)=>{var C=Ex();he(ut,C)}),he(ye,we)},lt=ye=>{var we=ii(),Ge=jt(we);vn(Ge,1,()=>(_(M),U(()=>_(M).slice(0,3))),Ln,(ut,Pe)=>{var C=wx(),y=S(C),H=N(y,2),ce=S(H),ue=S(ce);il(ce,(ke,xe)=>Hr==null?void 0:Hr(ke,xe),()=>({size:40}));var ge=N(ce,2);De(ke=>{ni(y,`background-image: url(${_(Pe),U(()=>_(Pe).thumbnail)??""});`),ae(ue,(_(Pe),U(()=>_(Pe).title))),un(ge,"href",`${Y0}/post?id=${_(Pe),U(()=>_(Pe).id)??""}`),gt(ge,1,`redirect-btn ${ke??""}`,"svelte-1djwkbm")},[()=>(_(Pe),U(()=>w(_(Pe).tags)))]),he(ut,C)}),he(ye,we)};at(Ue,ye=>{_(M),U(()=>_(M).length===0)?ye(Fe):ye(lt,!1)})}il(Be,ye=>jl==null?void 0:jl(ye)),De((ye,we,Ge)=>{ae(E,`Minecraft ${r()==="forge"?"Forge":r()==="fabric"?"Fabric":"Vanilla"}¬†${d()??""}`),ae(q,`${r()==="forge"?"MC":r()==="fabric"?"Stable":"Release"}¬†${c()??""}`),ae(I,(_(m),U(()=>_(m).description))),J=gt(F,1,"launch-btn-container svelte-1djwkbm",null,J,ye),j=gt(O,1,"launch-btn svelte-1djwkbm",null,j,we),O.disabled=!g(),me=gt(de,1,"launch-status svelte-1djwkbm",null,me,Ge)},[()=>({"busy-btn":s()}),()=>({launching:s(),error:p()==="error"}),()=>({blink:s()})]),vt("click",O,R),he(n,P),Kt(),i()}const ys=Dt(null);var Rx=Me('<button type="button"><!></button>'),Cx=Me('<div class="options svelte-1vqsmwk"><div><button class="option-btn dropdown-toggle svelte-1vqsmwk" type="button"><!> <i class="fa fa-caret-down"></i></button> <div><div class="menu-wrapper"></div></div></div></div>');function Al(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(ys,"$openDropdownId",t),r=Ve();let s=_t(e,"options",24,()=>[]),o=_t(e,"value",8,null),l=_t(e,"id",8,""),c=_t(e,"disabled",8,!1),u=_t(e,"preferredPosition",8,"");const d=ur();let p=Ve(!1),g=Ve(),f=Ve(),v=Ve();function h(E){c()||(E.stopPropagation(),a()===l()?ys.set(null):ys.set(l()))}function m(E){ys.set(null),d("optionchange",{value:E.value,data_value:E.label,other:E.other})}function M(E){_(g).contains(E.target)||ys.set(null)}cr(()=>{document.addEventListener("click",M)}),yu(()=>{document.removeEventListener("click",M)}),ft(()=>(Gn(s()),Gn(o())),()=>{Se(r,s().find(E=>E.value===o())||s()[0])}),ft(()=>(a(),Gn(l())),()=>{Se(p,a()===l())}),Ci(),nn();var b=Cx(),w=S(b),R=S(w),P=S(R);Vs(P,()=>(_(r),U(()=>_(r)?_(r).label:"Select"))),Za(R,E=>Se(v,E),()=>_(v));var A=N(R,2);let G;var x=S(A);vn(x,5,s,Ln,(E,W)=>{var q=Rx(),D=S(q);Vs(D,()=>(_(W),U(()=>_(W).label))),De(()=>{gt(q,1,`dropdown-item ${_(W),_(r),U(()=>_(W).value===(_(r)&&_(r).value)?"active":"")??""}`,"svelte-1vqsmwk"),ks(q,(_(W),U(()=>_(W).value))),un(q,"data-value",(_(W),U(()=>_(W).label)))}),vt("click",q,()=>m(_(W))),he(E,q)}),Za(A,E=>Se(f,E),()=>_(f)),Za(b,E=>Se(g,E),()=>_(g)),De(E=>{un(b,"id",l()),gt(w,1,`dropdown ${_(p)?"open":""}`,"svelte-1vqsmwk"),R.disabled=c(),G=gt(A,1,"dropdown-menu svelte-1vqsmwk",null,G,E)},[()=>({"open-left":u()==="left","open-right":u()==="right","open-up":u()==="up","open-down":u()==="down"})]),vt("click",R,h),he(n,b),Kt(),i()}var Px=Me('<span class="log-progress svelte-19tlgfs"> </span>'),Lx=Me('<span> <span class="log-count svelte-19tlgfs"> </span> <!></span>'),Dx=Me('<span class="log-data svelte-19tlgfs"> </span>'),kx=Me("<span> </span> <!>",1),Ux=Me('<div class="log-entry svelte-19tlgfs"><!></div>'),Ix=Me('<div class="m-container terminal svelte-19tlgfs"><div class="wrapper svelte-19tlgfs"><div class="console-container svelte-19tlgfs" id="console-container"><div class="log-entry-cont svelte-19tlgfs"></div></div> <div class="console-toolbar svelte-19tlgfs"><button class="clear-logs-btn svelte-19tlgfs"> </button></div></div></div>');function Nx(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=Ve();let s="DEBUG",o=Ve(),l=Ve(0),c=Ve([]);It.subscribe(b=>Se(c,b));function u(){It.info(`‚ñ† ${a()("console.welcome")}`),It.info(`‚ñ†  ${a()("console.description")}`),It.success(`‚ñ† ${a()("console.ready")}`)}cr(async()=>{_(c).length===0&&u(),Se(l,_(c).length)});async function d(){await It.clear(),u(),Se(l,_(c).length)}ft(()=>(_(o),_(c),_(l)),()=>{_(o)&&_(c).length>_(l)&&(setTimeout(()=>{_(o)&&Rn(o,_(o).scrollTop=_(o).scrollHeight)},0),Se(l,_(c).length))}),ft(()=>(_(c),It),()=>{Se(r,_(c).filter(b=>It.getCurrentLevel?It.logLevels[b.level].level>=It.logLevels[s].level:!0))}),Ci(),nn();var p=Ix(),g=S(p),f=S(g),v=S(f);vn(v,5,()=>_(r),Ln,(b,w)=>{var R=Ux(),P=S(R);{var A=x=>{var E=Lx(),W=S(E),q=N(W),D=S(q),I=N(q,2);{var F=J=>{var O=Px(),j=S(O);De(()=>ae(j,`(${_(w),U(()=>_(w).data)??""})`)),he(J,O)};at(I,J=>{_(w),U(()=>_(w).data)&&J(F)})}De(J=>{gt(E,1,`log-message log-${J??""}`,"svelte-19tlgfs"),ae(W,`${_(w),U(()=>_(w).stackPattern)??""} `),ae(D,`√ó${_(w),U(()=>_(w).count)??""}`)},[()=>(_(w),U(()=>_(w).level.toLowerCase()))]),he(x,E)},G=x=>{var E=kx(),W=jt(E),q=S(W),D=N(W,2);{var I=F=>{var J=Dx(),O=S(J);De(j=>ae(O,j),[()=>(_(w),U(()=>JSON.stringify(_(w).data)))]),he(F,J)};at(D,F=>{_(w),U(()=>_(w).data)&&F(I)})}De(F=>{gt(W,1,`log-message log-${F??""}`,"svelte-19tlgfs"),ae(q,(_(w),U(()=>_(w).message)))},[()=>(_(w),U(()=>_(w).level.toLowerCase()))]),he(x,E)};at(P,x=>{_(w),U(()=>_(w).isStackable&&_(w).count>1)?x(A):x(G,!1)})}he(b,R)}),Za(f,b=>Se(o,b),()=>_(o));var h=N(f,2),m=S(h),M=S(m);De(b=>ae(M,b),[()=>(a(),U(()=>a()("customOptions.clear")))]),vt("click",m,d),he(n,p),Kt(),i()}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Uu="156",gr={ROTATE:0,DOLLY:1,PAN:2},vr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Ox=0,Ed=1,Fx=2,wp=1,Bx=2,ea=3,Gi=0,qn=1,fi=2,sa=0,jr=1,wd=2,Ad=3,Td=4,zx=5,Fr=100,Gx=101,Hx=102,Rd=103,Cd=104,Vx=200,Wx=201,$x=202,jx=203,Ap=204,Tp=205,Xx=206,qx=207,Yx=208,Kx=209,Jx=210,Zx=0,Qx=1,ey=2,Wc=3,ty=4,ny=5,iy=6,ay=7,Rp=0,ry=1,sy=2,Pa=0,oy=1,ly=2,cy=3,uy=4,dy=5,Cp=300,es=301,ts=302,sl=303,$c=304,Tl=306,jc=1e3,Mi=1001,Xc=1002,zt=1003,Pd=1004,Yl=1005,ui=1006,fy=1007,qs=1008,La=1009,hy=1010,py=1011,Iu=1012,Pp=1013,wa=1014,na=1015,ns=1016,Lp=1017,Dp=1018,er=1020,my=1021,Ei=1023,gy=1024,vy=1025,tr=1026,is=1027,_y=1028,kp=1029,by=1030,Up=1031,Ip=1033,Kl=33776,Jl=33777,Zl=33778,Ql=33779,Ld=35840,Dd=35841,kd=35842,Ud=35843,xy=36196,Id=37492,Nd=37496,Od=37808,Fd=37809,Bd=37810,zd=37811,Gd=37812,Hd=37813,Vd=37814,Wd=37815,$d=37816,jd=37817,Xd=37818,qd=37819,Yd=37820,Kd=37821,ec=36492,Jd=36494,Zd=36495,yy=36283,Qd=36284,ef=36285,tf=36286,Np=3e3,nr=3001,Sy=3200,My=3201,Op=0,Ey=1,ir="",Nt="srgb",Hi="srgb-linear",Rl="display-p3",tc=7680,wy=519,Ay=512,Ty=513,Ry=514,Cy=515,Py=516,Ly=517,Dy=518,ky=519,qc=35044,nf="300 es",Yc=1035,ia=2e3,ol=2001;class fr{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const a=this._listeners[e];if(a!==void 0){const r=a.indexOf(t);r!==-1&&a.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const a=i.slice(0);for(let r=0,s=a.length;r<s;r++)a[r].call(this,e);e.target=null}}}const An=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Xo=Math.PI/180,Kc=180/Math.PI;function Da(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(An[n&255]+An[n>>8&255]+An[n>>16&255]+An[n>>24&255]+"-"+An[e&255]+An[e>>8&255]+"-"+An[e>>16&15|64]+An[e>>24&255]+"-"+An[t&63|128]+An[t>>8&255]+"-"+An[t>>16&255]+An[t>>24&255]+An[i&255]+An[i>>8&255]+An[i>>16&255]+An[i>>24&255]).toLowerCase()}function zn(n,e,t){return Math.max(e,Math.min(t,n))}function Uy(n,e){return(n%e+e)%e}function nc(n,e,t){return(1-t)*n+t*e}function af(n){return(n&n-1)===0&&n!==0}function Jc(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function ta(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ct(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const Iy={DEG2RAD:Xo};class He{constructor(e=0,t=0){He.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,a=e.elements;return this.x=a[0]*t+a[3]*i+a[6],this.y=a[1]*t+a[4]*i+a[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(zn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),a=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*i-s*a+e.x,this.y=r*a+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ot{constructor(e,t,i,a,r,s,o,l,c){ot.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,a,r,s,o,l,c)}set(e,t,i,a,r,s,o,l,c){const u=this.elements;return u[0]=e,u[1]=a,u[2]=o,u[3]=t,u[4]=r,u[5]=l,u[6]=i,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,r=this.elements,s=i[0],o=i[3],l=i[6],c=i[1],u=i[4],d=i[7],p=i[2],g=i[5],f=i[8],v=a[0],h=a[3],m=a[6],M=a[1],b=a[4],w=a[7],R=a[2],P=a[5],A=a[8];return r[0]=s*v+o*M+l*R,r[3]=s*h+o*b+l*P,r[6]=s*m+o*w+l*A,r[1]=c*v+u*M+d*R,r[4]=c*h+u*b+d*P,r[7]=c*m+u*w+d*A,r[2]=p*v+g*M+f*R,r[5]=p*h+g*b+f*P,r[8]=p*m+g*w+f*A,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8];return t*s*u-t*o*c-i*r*u+i*o*l+a*r*c-a*s*l}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=u*s-o*c,p=o*l-u*r,g=c*r-s*l,f=t*d+i*p+a*g;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/f;return e[0]=d*v,e[1]=(a*c-u*i)*v,e[2]=(o*i-a*s)*v,e[3]=p*v,e[4]=(u*t-a*l)*v,e[5]=(a*r-o*t)*v,e[6]=g*v,e[7]=(i*l-c*t)*v,e[8]=(s*t-i*r)*v,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,a,r,s,o){const l=Math.cos(r),c=Math.sin(r);return this.set(i*l,i*c,-i*(l*s+c*o)+s+e,-a*c,a*l,-a*(-c*s+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(ic.makeScale(e,t)),this}rotate(e){return this.premultiply(ic.makeRotation(-e)),this}translate(e,t){return this.premultiply(ic.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<9;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ic=new ot;function Fp(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function ll(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Ny(){const n=ll("canvas");return n.style.display="block",n}const rf={};function Is(n){n in rf||(rf[n]=!0,console.warn(n))}function Xr(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ac(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const Oy=new ot().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Fy=new ot().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function By(n){return n.convertSRGBToLinear().applyMatrix3(Fy)}function zy(n){return n.applyMatrix3(Oy).convertLinearToSRGB()}const Gy={[Hi]:n=>n,[Nt]:n=>n.convertSRGBToLinear(),[Rl]:By},Hy={[Hi]:n=>n,[Nt]:n=>n.convertLinearToSRGB(),[Rl]:zy},li={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Hi},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Gy[e],a=Hy[t];if(i===void 0||a===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return a(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let _r;class Bp{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_r===void 0&&(_r=ll("canvas")),_r.width=e.width,_r.height=e.height;const i=_r.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=_r}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=ll("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const a=i.getImageData(0,0,e.width,e.height),r=a.data;for(let s=0;s<r.length;s++)r[s]=Xr(r[s]/255)*255;return i.putImageData(a,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Xr(t[i]/255)*255):t[i]=Xr(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vy=0;class zp{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vy++}),this.uuid=Da(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},a=this.data;if(a!==null){let r;if(Array.isArray(a)){r=[];for(let s=0,o=a.length;s<o;s++)a[s].isDataTexture?r.push(rc(a[s].image)):r.push(rc(a[s]))}else r=rc(a);i.url=r}return t||(e.images[this.uuid]=i),i}}function rc(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Bp.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Wy=0;class Dn extends fr{constructor(e=Dn.DEFAULT_IMAGE,t=Dn.DEFAULT_MAPPING,i=Mi,a=Mi,r=ui,s=qs,o=Ei,l=La,c=Dn.DEFAULT_ANISOTROPY,u=ir){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Wy++}),this.uuid=Da(),this.name="",this.source=new zp(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=a,this.magFilter=r,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=l,this.offset=new He(0,0),this.repeat=new He(1,1),this.center=new He(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ot,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(Is("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===nr?Nt:ir),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Cp)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case jc:e.x=e.x-Math.floor(e.x);break;case Mi:e.x=e.x<0?0:1;break;case Xc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case jc:e.y=e.y-Math.floor(e.y);break;case Mi:e.y=e.y<0?0:1;break;case Xc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Is("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Nt?nr:Np}set encoding(e){Is("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===nr?Nt:ir}}Dn.DEFAULT_IMAGE=null;Dn.DEFAULT_MAPPING=Cp;Dn.DEFAULT_ANISOTROPY=1;class Ft{constructor(e=0,t=0,i=0,a=1){Ft.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=a}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,a){return this.x=e,this.y=t,this.z=i,this.w=a,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*a+s[12]*r,this.y=s[1]*t+s[5]*i+s[9]*a+s[13]*r,this.z=s[2]*t+s[6]*i+s[10]*a+s[14]*r,this.w=s[3]*t+s[7]*i+s[11]*a+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,a,r;const l=e.elements,c=l[0],u=l[4],d=l[8],p=l[1],g=l[5],f=l[9],v=l[2],h=l[6],m=l[10];if(Math.abs(u-p)<.01&&Math.abs(d-v)<.01&&Math.abs(f-h)<.01){if(Math.abs(u+p)<.1&&Math.abs(d+v)<.1&&Math.abs(f+h)<.1&&Math.abs(c+g+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(c+1)/2,w=(g+1)/2,R=(m+1)/2,P=(u+p)/4,A=(d+v)/4,G=(f+h)/4;return b>w&&b>R?b<.01?(i=0,a=.707106781,r=.707106781):(i=Math.sqrt(b),a=P/i,r=A/i):w>R?w<.01?(i=.707106781,a=0,r=.707106781):(a=Math.sqrt(w),i=P/a,r=G/a):R<.01?(i=.707106781,a=.707106781,r=0):(r=Math.sqrt(R),i=A/r,a=G/r),this.set(i,a,r,t),this}let M=Math.sqrt((h-f)*(h-f)+(d-v)*(d-v)+(p-u)*(p-u));return Math.abs(M)<.001&&(M=1),this.x=(h-f)/M,this.y=(d-v)/M,this.z=(p-u)/M,this.w=Math.acos((c+g+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class $y extends fr{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ft(0,0,e,t),this.scissorTest=!1,this.viewport=new Ft(0,0,e,t);const a={width:e,height:t,depth:1};i.encoding!==void 0&&(Is("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===nr?Nt:ir),this.texture=new Dn(a,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:ui,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new zp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ca extends $y{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Gp extends Dn{constructor(e=null,t=1,i=1,a=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=zt,this.minFilter=zt,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class jy extends Dn{constructor(e=null,t=1,i=1,a=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:a},this.magFilter=zt,this.minFilter=zt,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rr{constructor(e=0,t=0,i=0,a=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=a}static slerpFlat(e,t,i,a,r,s,o){let l=i[a+0],c=i[a+1],u=i[a+2],d=i[a+3];const p=r[s+0],g=r[s+1],f=r[s+2],v=r[s+3];if(o===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(o===1){e[t+0]=p,e[t+1]=g,e[t+2]=f,e[t+3]=v;return}if(d!==v||l!==p||c!==g||u!==f){let h=1-o;const m=l*p+c*g+u*f+d*v,M=m>=0?1:-1,b=1-m*m;if(b>Number.EPSILON){const R=Math.sqrt(b),P=Math.atan2(R,m*M);h=Math.sin(h*P)/R,o=Math.sin(o*P)/R}const w=o*M;if(l=l*h+p*w,c=c*h+g*w,u=u*h+f*w,d=d*h+v*w,h===1-o){const R=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=R,c*=R,u*=R,d*=R}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,a,r,s){const o=i[a],l=i[a+1],c=i[a+2],u=i[a+3],d=r[s],p=r[s+1],g=r[s+2],f=r[s+3];return e[t]=o*f+u*d+l*g-c*p,e[t+1]=l*f+u*p+c*d-o*g,e[t+2]=c*f+u*g+o*p-l*d,e[t+3]=u*f-o*d-l*p-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,a){return this._x=e,this._y=t,this._z=i,this._w=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,a=e._y,r=e._z,s=e._order,o=Math.cos,l=Math.sin,c=o(i/2),u=o(a/2),d=o(r/2),p=l(i/2),g=l(a/2),f=l(r/2);switch(s){case"XYZ":this._x=p*u*d+c*g*f,this._y=c*g*d-p*u*f,this._z=c*u*f+p*g*d,this._w=c*u*d-p*g*f;break;case"YXZ":this._x=p*u*d+c*g*f,this._y=c*g*d-p*u*f,this._z=c*u*f-p*g*d,this._w=c*u*d+p*g*f;break;case"ZXY":this._x=p*u*d-c*g*f,this._y=c*g*d+p*u*f,this._z=c*u*f+p*g*d,this._w=c*u*d-p*g*f;break;case"ZYX":this._x=p*u*d-c*g*f,this._y=c*g*d+p*u*f,this._z=c*u*f-p*g*d,this._w=c*u*d+p*g*f;break;case"YZX":this._x=p*u*d+c*g*f,this._y=c*g*d+p*u*f,this._z=c*u*f-p*g*d,this._w=c*u*d-p*g*f;break;case"XZY":this._x=p*u*d-c*g*f,this._y=c*g*d-p*u*f,this._z=c*u*f+p*g*d,this._w=c*u*d+p*g*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,a=Math.sin(i);return this._x=e.x*a,this._y=e.y*a,this._z=e.z*a,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],a=t[4],r=t[8],s=t[1],o=t[5],l=t[9],c=t[2],u=t[6],d=t[10],p=i+o+d;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(u-l)*g,this._y=(r-c)*g,this._z=(s-a)*g}else if(i>o&&i>d){const g=2*Math.sqrt(1+i-o-d);this._w=(u-l)/g,this._x=.25*g,this._y=(a+s)/g,this._z=(r+c)/g}else if(o>d){const g=2*Math.sqrt(1+o-i-d);this._w=(r-c)/g,this._x=(a+s)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+d-i-o);this._w=(s-a)/g,this._x=(r+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const a=Math.min(1,t/i);return this.slerp(e,a),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,a=e._y,r=e._z,s=e._w,o=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+s*o+a*c-r*l,this._y=a*u+s*l+r*o-i*c,this._z=r*u+s*c+i*l-a*o,this._w=s*u-i*o-a*l-r*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,a=this._y,r=this._z,s=this._w;let o=s*e._w+i*e._x+a*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=i,this._y=a,this._z=r,this;const l=1-o*o;if(l<=Number.EPSILON){const g=1-t;return this._w=g*s+t*this._w,this._x=g*i+t*this._x,this._y=g*a+t*this._y,this._z=g*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,o),d=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=s*d+this._w*p,this._x=i*d+this._x*p,this._y=a*d+this._y*p,this._z=r*d+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),a=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(a),i*Math.sin(r),i*Math.cos(r),t*Math.sin(a))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class X{constructor(e=0,t=0,i=0){X.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sf.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sf.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*a,this.y=r[1]*t+r[4]*i+r[7]*a,this.z=r[2]*t+r[5]*i+r[8]*a,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,a=this.z,r=e.elements,s=1/(r[3]*t+r[7]*i+r[11]*a+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*a+r[12])*s,this.y=(r[1]*t+r[5]*i+r[9]*a+r[13])*s,this.z=(r[2]*t+r[6]*i+r[10]*a+r[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,a=this.z,r=e.x,s=e.y,o=e.z,l=e.w,c=l*t+s*a-o*i,u=l*i+o*t-r*a,d=l*a+r*i-s*t,p=-r*t-s*i-o*a;return this.x=c*l+p*-r+u*-o-d*-s,this.y=u*l+p*-s+d*-r-c*-o,this.z=d*l+p*-o+c*-s-u*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,a=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*a,this.y=r[1]*t+r[5]*i+r[9]*a,this.z=r[2]*t+r[6]*i+r[10]*a,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,a=e.y,r=e.z,s=t.x,o=t.y,l=t.z;return this.x=a*l-r*o,this.y=r*s-i*l,this.z=i*o-a*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sc.copy(this).projectOnVector(e),this.sub(sc)}reflect(e){return this.sub(sc.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(zn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,a=this.z-e.z;return t*t+i*i+a*a}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const a=Math.sin(t)*e;return this.x=a*Math.sin(i),this.y=Math.cos(t)*e,this.z=a*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),a=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=a,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sc=new X,sf=new rr;class lo{constructor(e=new X(1/0,1/0,1/0),t=new X(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Yi.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Yi.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Yi.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),br.copy(e.boundingBox),br.applyMatrix4(e.matrixWorld),this.union(br);else{const a=e.geometry;if(a!==void 0)if(t&&a.attributes!==void 0&&a.attributes.position!==void 0){const r=a.attributes.position;for(let s=0,o=r.count;s<o;s++)Yi.fromBufferAttribute(r,s).applyMatrix4(e.matrixWorld),this.expandByPoint(Yi)}else a.boundingBox===null&&a.computeBoundingBox(),br.copy(a.boundingBox),br.applyMatrix4(e.matrixWorld),this.union(br)}const i=e.children;for(let a=0,r=i.length;a<r;a++)this.expandByObject(i[a],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Yi),Yi.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ss),ho.subVectors(this.max,Ss),xr.subVectors(e.a,Ss),yr.subVectors(e.b,Ss),Sr.subVectors(e.c,Ss),ma.subVectors(yr,xr),ga.subVectors(Sr,yr),Na.subVectors(xr,Sr);let t=[0,-ma.z,ma.y,0,-ga.z,ga.y,0,-Na.z,Na.y,ma.z,0,-ma.x,ga.z,0,-ga.x,Na.z,0,-Na.x,-ma.y,ma.x,0,-ga.y,ga.x,0,-Na.y,Na.x,0];return!oc(t,xr,yr,Sr,ho)||(t=[1,0,0,0,1,0,0,0,1],!oc(t,xr,yr,Sr,ho))?!1:(po.crossVectors(ma,ga),t=[po.x,po.y,po.z],oc(t,xr,yr,Sr,ho))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yi).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Yi).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(qi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),qi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),qi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),qi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),qi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),qi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),qi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),qi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(qi),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const qi=[new X,new X,new X,new X,new X,new X,new X,new X],Yi=new X,br=new lo,xr=new X,yr=new X,Sr=new X,ma=new X,ga=new X,Na=new X,Ss=new X,ho=new X,po=new X,Oa=new X;function oc(n,e,t,i,a){for(let r=0,s=n.length-3;r<=s;r+=3){Oa.fromArray(n,r);const o=a.x*Math.abs(Oa.x)+a.y*Math.abs(Oa.y)+a.z*Math.abs(Oa.z),l=e.dot(Oa),c=t.dot(Oa),u=i.dot(Oa);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>o)return!1}return!0}const Xy=new lo,Ms=new X,lc=new X;class Nu{constructor(e=new X,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Xy.setFromPoints(e).getCenter(i);let a=0;for(let r=0,s=e.length;r<s;r++)a=Math.max(a,i.distanceToSquared(e[r]));return this.radius=Math.sqrt(a),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ms.subVectors(e,this.center);const t=Ms.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),a=(i-this.radius)*.5;this.center.addScaledVector(Ms,a/i),this.radius+=a}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(lc.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ms.copy(e.center).add(lc)),this.expandByPoint(Ms.copy(e.center).sub(lc))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Ki=new X,cc=new X,mo=new X,va=new X,uc=new X,go=new X,dc=new X;class Hp{constructor(e=new X,t=new X(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ki)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ki.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ki.copy(this.origin).addScaledVector(this.direction,t),Ki.distanceToSquared(e))}distanceSqToSegment(e,t,i,a){cc.copy(e).add(t).multiplyScalar(.5),mo.copy(t).sub(e).normalize(),va.copy(this.origin).sub(cc);const r=e.distanceTo(t)*.5,s=-this.direction.dot(mo),o=va.dot(this.direction),l=-va.dot(mo),c=va.lengthSq(),u=Math.abs(1-s*s);let d,p,g,f;if(u>0)if(d=s*l-o,p=s*o-l,f=r*u,d>=0)if(p>=-f)if(p<=f){const v=1/u;d*=v,p*=v,g=d*(d+s*p+2*o)+p*(s*d+p+2*l)+c}else p=r,d=Math.max(0,-(s*p+o)),g=-d*d+p*(p+2*l)+c;else p=-r,d=Math.max(0,-(s*p+o)),g=-d*d+p*(p+2*l)+c;else p<=-f?(d=Math.max(0,-(-s*r+o)),p=d>0?-r:Math.min(Math.max(-r,-l),r),g=-d*d+p*(p+2*l)+c):p<=f?(d=0,p=Math.min(Math.max(-r,-l),r),g=p*(p+2*l)+c):(d=Math.max(0,-(s*r+o)),p=d>0?r:Math.min(Math.max(-r,-l),r),g=-d*d+p*(p+2*l)+c);else p=s>0?-r:r,d=Math.max(0,-(s*p+o)),g=-d*d+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),a&&a.copy(cc).addScaledVector(mo,p),g}intersectSphere(e,t){Ki.subVectors(e.center,this.origin);const i=Ki.dot(this.direction),a=Ki.dot(Ki)-i*i,r=e.radius*e.radius;if(a>r)return null;const s=Math.sqrt(r-a),o=i-s,l=i+s;return l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,a,r,s,o,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,a=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,a=(e.min.x-p.x)*c),u>=0?(r=(e.min.y-p.y)*u,s=(e.max.y-p.y)*u):(r=(e.max.y-p.y)*u,s=(e.min.y-p.y)*u),i>s||r>a||((r>i||isNaN(i))&&(i=r),(s<a||isNaN(a))&&(a=s),d>=0?(o=(e.min.z-p.z)*d,l=(e.max.z-p.z)*d):(o=(e.max.z-p.z)*d,l=(e.min.z-p.z)*d),i>l||o>a)||((o>i||i!==i)&&(i=o),(l<a||a!==a)&&(a=l),a<0)?null:this.at(i>=0?i:a,t)}intersectsBox(e){return this.intersectBox(e,Ki)!==null}intersectTriangle(e,t,i,a,r){uc.subVectors(t,e),go.subVectors(i,e),dc.crossVectors(uc,go);let s=this.direction.dot(dc),o;if(s>0){if(a)return null;o=1}else if(s<0)o=-1,s=-s;else return null;va.subVectors(this.origin,e);const l=o*this.direction.dot(go.crossVectors(va,go));if(l<0)return null;const c=o*this.direction.dot(uc.cross(va));if(c<0||l+c>s)return null;const u=-o*va.dot(dc);return u<0?null:this.at(u/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xt{constructor(e,t,i,a,r,s,o,l,c,u,d,p,g,f,v,h){Xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,a,r,s,o,l,c,u,d,p,g,f,v,h)}set(e,t,i,a,r,s,o,l,c,u,d,p,g,f,v,h){const m=this.elements;return m[0]=e,m[4]=t,m[8]=i,m[12]=a,m[1]=r,m[5]=s,m[9]=o,m[13]=l,m[2]=c,m[6]=u,m[10]=d,m[14]=p,m[3]=g,m[7]=f,m[11]=v,m[15]=h,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,a=1/Mr.setFromMatrixColumn(e,0).length(),r=1/Mr.setFromMatrixColumn(e,1).length(),s=1/Mr.setFromMatrixColumn(e,2).length();return t[0]=i[0]*a,t[1]=i[1]*a,t[2]=i[2]*a,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,a=e.y,r=e.z,s=Math.cos(i),o=Math.sin(i),l=Math.cos(a),c=Math.sin(a),u=Math.cos(r),d=Math.sin(r);if(e.order==="XYZ"){const p=s*u,g=s*d,f=o*u,v=o*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=g+f*c,t[5]=p-v*c,t[9]=-o*l,t[2]=v-p*c,t[6]=f+g*c,t[10]=s*l}else if(e.order==="YXZ"){const p=l*u,g=l*d,f=c*u,v=c*d;t[0]=p+v*o,t[4]=f*o-g,t[8]=s*c,t[1]=s*d,t[5]=s*u,t[9]=-o,t[2]=g*o-f,t[6]=v+p*o,t[10]=s*l}else if(e.order==="ZXY"){const p=l*u,g=l*d,f=c*u,v=c*d;t[0]=p-v*o,t[4]=-s*d,t[8]=f+g*o,t[1]=g+f*o,t[5]=s*u,t[9]=v-p*o,t[2]=-s*c,t[6]=o,t[10]=s*l}else if(e.order==="ZYX"){const p=s*u,g=s*d,f=o*u,v=o*d;t[0]=l*u,t[4]=f*c-g,t[8]=p*c+v,t[1]=l*d,t[5]=v*c+p,t[9]=g*c-f,t[2]=-c,t[6]=o*l,t[10]=s*l}else if(e.order==="YZX"){const p=s*l,g=s*c,f=o*l,v=o*c;t[0]=l*u,t[4]=v-p*d,t[8]=f*d+g,t[1]=d,t[5]=s*u,t[9]=-o*u,t[2]=-c*u,t[6]=g*d+f,t[10]=p-v*d}else if(e.order==="XZY"){const p=s*l,g=s*c,f=o*l,v=o*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=p*d+v,t[5]=s*u,t[9]=g*d-f,t[2]=f*d-g,t[6]=o*u,t[10]=v*d+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(qy,e,Yy)}lookAt(e,t,i){const a=this.elements;return Jn.subVectors(e,t),Jn.lengthSq()===0&&(Jn.z=1),Jn.normalize(),_a.crossVectors(i,Jn),_a.lengthSq()===0&&(Math.abs(i.z)===1?Jn.x+=1e-4:Jn.z+=1e-4,Jn.normalize(),_a.crossVectors(i,Jn)),_a.normalize(),vo.crossVectors(Jn,_a),a[0]=_a.x,a[4]=vo.x,a[8]=Jn.x,a[1]=_a.y,a[5]=vo.y,a[9]=Jn.y,a[2]=_a.z,a[6]=vo.z,a[10]=Jn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,a=t.elements,r=this.elements,s=i[0],o=i[4],l=i[8],c=i[12],u=i[1],d=i[5],p=i[9],g=i[13],f=i[2],v=i[6],h=i[10],m=i[14],M=i[3],b=i[7],w=i[11],R=i[15],P=a[0],A=a[4],G=a[8],x=a[12],E=a[1],W=a[5],q=a[9],D=a[13],I=a[2],F=a[6],J=a[10],O=a[14],j=a[3],ne=a[7],re=a[11],B=a[15];return r[0]=s*P+o*E+l*I+c*j,r[4]=s*A+o*W+l*F+c*ne,r[8]=s*G+o*q+l*J+c*re,r[12]=s*x+o*D+l*O+c*B,r[1]=u*P+d*E+p*I+g*j,r[5]=u*A+d*W+p*F+g*ne,r[9]=u*G+d*q+p*J+g*re,r[13]=u*x+d*D+p*O+g*B,r[2]=f*P+v*E+h*I+m*j,r[6]=f*A+v*W+h*F+m*ne,r[10]=f*G+v*q+h*J+m*re,r[14]=f*x+v*D+h*O+m*B,r[3]=M*P+b*E+w*I+R*j,r[7]=M*A+b*W+w*F+R*ne,r[11]=M*G+b*q+w*J+R*re,r[15]=M*x+b*D+w*O+R*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],a=e[8],r=e[12],s=e[1],o=e[5],l=e[9],c=e[13],u=e[2],d=e[6],p=e[10],g=e[14],f=e[3],v=e[7],h=e[11],m=e[15];return f*(+r*l*d-a*c*d-r*o*p+i*c*p+a*o*g-i*l*g)+v*(+t*l*g-t*c*p+r*s*p-a*s*g+a*c*u-r*l*u)+h*(+t*c*d-t*o*g-r*s*d+i*s*g+r*o*u-i*c*u)+m*(-a*o*u-t*l*d+t*o*p+a*s*d-i*s*p+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const a=this.elements;return e.isVector3?(a[12]=e.x,a[13]=e.y,a[14]=e.z):(a[12]=e,a[13]=t,a[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],a=e[2],r=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],d=e[9],p=e[10],g=e[11],f=e[12],v=e[13],h=e[14],m=e[15],M=d*h*c-v*p*c+v*l*g-o*h*g-d*l*m+o*p*m,b=f*p*c-u*h*c-f*l*g+s*h*g+u*l*m-s*p*m,w=u*v*c-f*d*c+f*o*g-s*v*g-u*o*m+s*d*m,R=f*d*l-u*v*l-f*o*p+s*v*p+u*o*h-s*d*h,P=t*M+i*b+a*w+r*R;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/P;return e[0]=M*A,e[1]=(v*p*r-d*h*r-v*a*g+i*h*g+d*a*m-i*p*m)*A,e[2]=(o*h*r-v*l*r+v*a*c-i*h*c-o*a*m+i*l*m)*A,e[3]=(d*l*r-o*p*r-d*a*c+i*p*c+o*a*g-i*l*g)*A,e[4]=b*A,e[5]=(u*h*r-f*p*r+f*a*g-t*h*g-u*a*m+t*p*m)*A,e[6]=(f*l*r-s*h*r-f*a*c+t*h*c+s*a*m-t*l*m)*A,e[7]=(s*p*r-u*l*r+u*a*c-t*p*c-s*a*g+t*l*g)*A,e[8]=w*A,e[9]=(f*d*r-u*v*r-f*i*g+t*v*g+u*i*m-t*d*m)*A,e[10]=(s*v*r-f*o*r+f*i*c-t*v*c-s*i*m+t*o*m)*A,e[11]=(u*o*r-s*d*r-u*i*c+t*d*c+s*i*g-t*o*g)*A,e[12]=R*A,e[13]=(u*v*a-f*d*a+f*i*p-t*v*p-u*i*h+t*d*h)*A,e[14]=(f*o*a-s*v*a-f*i*l+t*v*l+s*i*h-t*o*h)*A,e[15]=(s*d*a-u*o*a+u*i*l-t*d*l-s*i*p+t*o*p)*A,this}scale(e){const t=this.elements,i=e.x,a=e.y,r=e.z;return t[0]*=i,t[4]*=a,t[8]*=r,t[1]*=i,t[5]*=a,t[9]*=r,t[2]*=i,t[6]*=a,t[10]*=r,t[3]*=i,t[7]*=a,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],a=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,a))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),a=Math.sin(t),r=1-i,s=e.x,o=e.y,l=e.z,c=r*s,u=r*o;return this.set(c*s+i,c*o-a*l,c*l+a*o,0,c*o+a*l,u*o+i,u*l-a*s,0,c*l-a*o,u*l+a*s,r*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,a,r,s){return this.set(1,i,r,0,e,1,s,0,t,a,1,0,0,0,0,1),this}compose(e,t,i){const a=this.elements,r=t._x,s=t._y,o=t._z,l=t._w,c=r+r,u=s+s,d=o+o,p=r*c,g=r*u,f=r*d,v=s*u,h=s*d,m=o*d,M=l*c,b=l*u,w=l*d,R=i.x,P=i.y,A=i.z;return a[0]=(1-(v+m))*R,a[1]=(g+w)*R,a[2]=(f-b)*R,a[3]=0,a[4]=(g-w)*P,a[5]=(1-(p+m))*P,a[6]=(h+M)*P,a[7]=0,a[8]=(f+b)*A,a[9]=(h-M)*A,a[10]=(1-(p+v))*A,a[11]=0,a[12]=e.x,a[13]=e.y,a[14]=e.z,a[15]=1,this}decompose(e,t,i){const a=this.elements;let r=Mr.set(a[0],a[1],a[2]).length();const s=Mr.set(a[4],a[5],a[6]).length(),o=Mr.set(a[8],a[9],a[10]).length();this.determinant()<0&&(r=-r),e.x=a[12],e.y=a[13],e.z=a[14],bi.copy(this);const c=1/r,u=1/s,d=1/o;return bi.elements[0]*=c,bi.elements[1]*=c,bi.elements[2]*=c,bi.elements[4]*=u,bi.elements[5]*=u,bi.elements[6]*=u,bi.elements[8]*=d,bi.elements[9]*=d,bi.elements[10]*=d,t.setFromRotationMatrix(bi),i.x=r,i.y=s,i.z=o,this}makePerspective(e,t,i,a,r,s,o=ia){const l=this.elements,c=2*r/(t-e),u=2*r/(i-a),d=(t+e)/(t-e),p=(i+a)/(i-a);let g,f;if(o===ia)g=-(s+r)/(s-r),f=-2*s*r/(s-r);else if(o===ol)g=-s/(s-r),f=-s*r/(s-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,a,r,s,o=ia){const l=this.elements,c=1/(t-e),u=1/(i-a),d=1/(s-r),p=(t+e)*c,g=(i+a)*u;let f,v;if(o===ia)f=(s+r)*d,v=-2*d;else if(o===ol)f=r*d,v=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=v,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let a=0;a<16;a++)if(t[a]!==i[a])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Mr=new X,bi=new Xt,qy=new X(0,0,0),Yy=new X(1,1,1),_a=new X,vo=new X,Jn=new X,of=new Xt,lf=new rr;class Cl{constructor(e=0,t=0,i=0,a=Cl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=a}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,a=this._order){return this._x=e,this._y=t,this._z=i,this._order=a,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const a=e.elements,r=a[0],s=a[4],o=a[8],l=a[1],c=a[5],u=a[9],d=a[2],p=a[6],g=a[10];switch(t){case"XYZ":this._y=Math.asin(zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-zn(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(o,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,r),this._z=0);break;case"ZXY":this._x=Math.asin(zn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-d,g),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-zn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(zn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,r)):(this._x=0,this._y=Math.atan2(o,g));break;case"XZY":this._z=Math.asin(-zn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return of.makeRotationFromQuaternion(e),this.setFromRotationMatrix(of,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return lf.setFromEuler(this),this.setFromQuaternion(lf,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Cl.DEFAULT_ORDER="XYZ";class Vp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Ky=0;const cf=new X,Er=new rr,Ji=new Xt,_o=new X,Es=new X,Jy=new X,Zy=new rr,uf=new X(1,0,0),df=new X(0,1,0),ff=new X(0,0,1),Qy={type:"added"},eS={type:"removed"};class kn extends fr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ky++}),this.uuid=Da(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kn.DEFAULT_UP.clone();const e=new X,t=new Cl,i=new rr,a=new X(1,1,1);function r(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(r),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new Xt},normalMatrix:{value:new ot}}),this.matrix=new Xt,this.matrixWorld=new Xt,this.matrixAutoUpdate=kn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Vp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Er.setFromAxisAngle(e,t),this.quaternion.multiply(Er),this}rotateOnWorldAxis(e,t){return Er.setFromAxisAngle(e,t),this.quaternion.premultiply(Er),this}rotateX(e){return this.rotateOnAxis(uf,e)}rotateY(e){return this.rotateOnAxis(df,e)}rotateZ(e){return this.rotateOnAxis(ff,e)}translateOnAxis(e,t){return cf.copy(e).applyQuaternion(this.quaternion),this.position.add(cf.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(uf,e)}translateY(e){return this.translateOnAxis(df,e)}translateZ(e){return this.translateOnAxis(ff,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Ji.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?_o.copy(e):_o.set(e,t,i);const a=this.parent;this.updateWorldMatrix(!0,!1),Es.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ji.lookAt(Es,_o,this.up):Ji.lookAt(_o,Es,this.up),this.quaternion.setFromRotationMatrix(Ji),a&&(Ji.extractRotation(a.matrixWorld),Er.setFromRotationMatrix(Ji),this.quaternion.premultiply(Er.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Qy)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(eS)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Ji.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Ji.multiply(e.parent.matrixWorld)),e.applyMatrix4(Ji),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,a=this.children.length;i<a;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let a=0,r=this.children.length;a<r;a++){const s=this.children[a].getObjectsByProperty(e,t);s.length>0&&(i=i.concat(s))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Es,e,Jy),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Es,Zy,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,a=t.length;i<a;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,a=t.length;i<a;i++){const r=t[i];(r.matrixWorldAutoUpdate===!0||e===!0)&&r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const a=this.children;for(let r=0,s=a.length;r<s;r++){const o=a[r];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const a={};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.castShadow===!0&&(a.castShadow=!0),this.receiveShadow===!0&&(a.receiveShadow=!0),this.visible===!1&&(a.visible=!1),this.frustumCulled===!1&&(a.frustumCulled=!1),this.renderOrder!==0&&(a.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),a.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(a.instanceColor=this.instanceColor.toJSON()));function r(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?a.background=this.background.toJSON():this.background.isTexture&&(a.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(a.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){a.geometry=r(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];r(e.shapes,d)}else r(e.shapes,l)}}if(this.isSkinnedMesh&&(a.bindMode=this.bindMode,a.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),a.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,c=this.material.length;l<c;l++)o.push(r(e.materials,this.material[l]));a.material=o}else a.material=r(e.materials,this.material);if(this.children.length>0){a.children=[];for(let o=0;o<this.children.length;o++)a.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){a.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];a.animations.push(r(e.animations,l))}}if(t){const o=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),p=s(e.skeletons),g=s(e.animations),f=s(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),p.length>0&&(i.skeletons=p),g.length>0&&(i.animations=g),f.length>0&&(i.nodes=f)}return i.object=a,i;function s(o){const l=[];for(const c in o){const u=o[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const a=e.children[i];this.add(a.clone())}return this}}kn.DEFAULT_UP=new X(0,1,0);kn.DEFAULT_MATRIX_AUTO_UPDATE=!0;kn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const xi=new X,Zi=new X,fc=new X,Qi=new X,wr=new X,Ar=new X,hf=new X,hc=new X,pc=new X,mc=new X;let bo=!1;class di{constructor(e=new X,t=new X,i=new X){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,a){a.subVectors(i,t),xi.subVectors(e,t),a.cross(xi);const r=a.lengthSq();return r>0?a.multiplyScalar(1/Math.sqrt(r)):a.set(0,0,0)}static getBarycoord(e,t,i,a,r){xi.subVectors(a,t),Zi.subVectors(i,t),fc.subVectors(e,t);const s=xi.dot(xi),o=xi.dot(Zi),l=xi.dot(fc),c=Zi.dot(Zi),u=Zi.dot(fc),d=s*c-o*o;if(d===0)return r.set(-2,-1,-1);const p=1/d,g=(c*l-o*u)*p,f=(s*u-o*l)*p;return r.set(1-g-f,f,g)}static containsPoint(e,t,i,a){return this.getBarycoord(e,t,i,a,Qi),Qi.x>=0&&Qi.y>=0&&Qi.x+Qi.y<=1}static getUV(e,t,i,a,r,s,o,l){return bo===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),bo=!0),this.getInterpolation(e,t,i,a,r,s,o,l)}static getInterpolation(e,t,i,a,r,s,o,l){return this.getBarycoord(e,t,i,a,Qi),l.setScalar(0),l.addScaledVector(r,Qi.x),l.addScaledVector(s,Qi.y),l.addScaledVector(o,Qi.z),l}static isFrontFacing(e,t,i,a){return xi.subVectors(i,t),Zi.subVectors(e,t),xi.cross(Zi).dot(a)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,a){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[a]),this}setFromAttributeAndIndices(e,t,i,a){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,a),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return xi.subVectors(this.c,this.b),Zi.subVectors(this.a,this.b),xi.cross(Zi).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return di.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return di.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,a,r){return bo===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),bo=!0),di.getInterpolation(e,this.a,this.b,this.c,t,i,a,r)}getInterpolation(e,t,i,a,r){return di.getInterpolation(e,this.a,this.b,this.c,t,i,a,r)}containsPoint(e){return di.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return di.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,a=this.b,r=this.c;let s,o;wr.subVectors(a,i),Ar.subVectors(r,i),hc.subVectors(e,i);const l=wr.dot(hc),c=Ar.dot(hc);if(l<=0&&c<=0)return t.copy(i);pc.subVectors(e,a);const u=wr.dot(pc),d=Ar.dot(pc);if(u>=0&&d<=u)return t.copy(a);const p=l*d-u*c;if(p<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(i).addScaledVector(wr,s);mc.subVectors(e,r);const g=wr.dot(mc),f=Ar.dot(mc);if(f>=0&&g<=f)return t.copy(r);const v=g*c-l*f;if(v<=0&&c>=0&&f<=0)return o=c/(c-f),t.copy(i).addScaledVector(Ar,o);const h=u*f-g*d;if(h<=0&&d-u>=0&&g-f>=0)return hf.subVectors(r,a),o=(d-u)/(d-u+(g-f)),t.copy(a).addScaledVector(hf,o);const m=1/(h+v+p);return s=v*m,o=p*m,t.copy(i).addScaledVector(wr,s).addScaledVector(Ar,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let tS=0;class ds extends fr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:tS++}),this.uuid=Da(),this.name="",this.type="Material",this.blending=jr,this.side=Gi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Ap,this.blendDst=Tp,this.blendEquation=Fr,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Wc,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=wy,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=tc,this.stencilZFail=tc,this.stencilZPass=tc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const a=this[t];if(a===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}a&&a.isColor?a.set(i):a&&a.isVector3&&i&&i.isVector3?a.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==jr&&(i.blending=this.blending),this.side!==Gi&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function a(r){const s=[];for(const o in r){const l=r[o];delete l.metadata,s.push(l)}return s}if(t){const r=a(e.textures),s=a(e.images);r.length>0&&(i.textures=r),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const a=t.length;i=new Array(a);for(let r=0;r!==a;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const Wp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},yi={h:0,s:0,l:0},xo={h:0,s:0,l:0};function gc(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class bt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const a=e;a&&a.isColor?this.copy(a):typeof a=="number"?this.setHex(a):typeof a=="string"&&this.setStyle(a)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Nt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,li.toWorkingColorSpace(this,t),this}setRGB(e,t,i,a=li.workingColorSpace){return this.r=e,this.g=t,this.b=i,li.toWorkingColorSpace(this,a),this}setHSL(e,t,i,a=li.workingColorSpace){if(e=Uy(e,1),t=zn(t,0,1),i=zn(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=gc(s,r,e+1/3),this.g=gc(s,r,e),this.b=gc(s,r,e-1/3)}return li.toWorkingColorSpace(this,a),this}setStyle(e,t=Nt){function i(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let a;if(a=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=a[1],o=a[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(a=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=a[1],s=r.length;if(s===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(r,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Nt){const i=Wp[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xr(e.r),this.g=Xr(e.g),this.b=Xr(e.b),this}copyLinearToSRGB(e){return this.r=ac(e.r),this.g=ac(e.g),this.b=ac(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Nt){return li.fromWorkingColorSpace(Tn.copy(this),e),Math.round(zn(Tn.r*255,0,255))*65536+Math.round(zn(Tn.g*255,0,255))*256+Math.round(zn(Tn.b*255,0,255))}getHexString(e=Nt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=li.workingColorSpace){li.fromWorkingColorSpace(Tn.copy(this),t);const i=Tn.r,a=Tn.g,r=Tn.b,s=Math.max(i,a,r),o=Math.min(i,a,r);let l,c;const u=(o+s)/2;if(o===s)l=0,c=0;else{const d=s-o;switch(c=u<=.5?d/(s+o):d/(2-s-o),s){case i:l=(a-r)/d+(a<r?6:0);break;case a:l=(r-i)/d+2;break;case r:l=(i-a)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=li.workingColorSpace){return li.fromWorkingColorSpace(Tn.copy(this),t),e.r=Tn.r,e.g=Tn.g,e.b=Tn.b,e}getStyle(e=Nt){li.fromWorkingColorSpace(Tn.copy(this),e);const t=Tn.r,i=Tn.g,a=Tn.b;return e!==Nt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${a.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(a*255)})`}offsetHSL(e,t,i){return this.getHSL(yi),yi.h+=e,yi.s+=t,yi.l+=i,this.setHSL(yi.h,yi.s,yi.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(yi),e.getHSL(xo);const i=nc(yi.h,xo.h,t),a=nc(yi.s,xo.s,t),r=nc(yi.l,xo.l,t);return this.setHSL(i,a,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,a=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*a,this.g=r[1]*t+r[4]*i+r[7]*a,this.b=r[2]*t+r[5]*i+r[8]*a,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Tn=new bt;bt.NAMES=Wp;class $p extends ds{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const en=new X,yo=new He;class Ai{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=qc,this.updateRange={offset:0,count:-1},this.gpuType=na,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let a=0,r=this.itemSize;a<r;a++)this.array[e+a]=t.array[i+a];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)yo.fromBufferAttribute(this,t),yo.applyMatrix3(e),this.setXY(t,yo.x,yo.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)en.fromBufferAttribute(this,t),en.applyMatrix3(e),this.setXYZ(t,en.x,en.y,en.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)en.fromBufferAttribute(this,t),en.applyMatrix4(e),this.setXYZ(t,en.x,en.y,en.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)en.fromBufferAttribute(this,t),en.applyNormalMatrix(e),this.setXYZ(t,en.x,en.y,en.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)en.fromBufferAttribute(this,t),en.transformDirection(e),this.setXYZ(t,en.x,en.y,en.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=ta(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ct(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ta(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ta(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ta(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ta(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,a){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),a=Ct(a,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this}setXYZW(e,t,i,a,r){return e*=this.itemSize,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),a=Ct(a,this.array),r=Ct(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=a,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==qc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class jp extends Ai{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Xp extends Ai{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class oa extends Ai{constructor(e,t,i){super(new Float32Array(e),t,i)}}let nS=0;const si=new Xt,vc=new kn,Tr=new X,Zn=new lo,ws=new lo,gn=new X;class ha extends fr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:nS++}),this.uuid=Da(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Fp(e)?Xp:jp)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const r=new ot().getNormalMatrix(e);i.applyNormalMatrix(r),i.needsUpdate=!0}const a=this.attributes.tangent;return a!==void 0&&(a.transformDirection(e),a.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return si.makeRotationFromQuaternion(e),this.applyMatrix4(si),this}rotateX(e){return si.makeRotationX(e),this.applyMatrix4(si),this}rotateY(e){return si.makeRotationY(e),this.applyMatrix4(si),this}rotateZ(e){return si.makeRotationZ(e),this.applyMatrix4(si),this}translate(e,t,i){return si.makeTranslation(e,t,i),this.applyMatrix4(si),this}scale(e,t,i){return si.makeScale(e,t,i),this.applyMatrix4(si),this}lookAt(e){return vc.lookAt(e),vc.updateMatrix(),this.applyMatrix4(vc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Tr).negate(),this.translate(Tr.x,Tr.y,Tr.z),this}setFromPoints(e){const t=[];for(let i=0,a=e.length;i<a;i++){const r=e[i];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new oa(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new lo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new X(-1/0,-1/0,-1/0),new X(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,a=t.length;i<a;i++){const r=t[i];Zn.setFromBufferAttribute(r),this.morphTargetsRelative?(gn.addVectors(this.boundingBox.min,Zn.min),this.boundingBox.expandByPoint(gn),gn.addVectors(this.boundingBox.max,Zn.max),this.boundingBox.expandByPoint(gn)):(this.boundingBox.expandByPoint(Zn.min),this.boundingBox.expandByPoint(Zn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Nu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new X,1/0);return}if(e){const i=this.boundingSphere.center;if(Zn.setFromBufferAttribute(e),t)for(let r=0,s=t.length;r<s;r++){const o=t[r];ws.setFromBufferAttribute(o),this.morphTargetsRelative?(gn.addVectors(Zn.min,ws.min),Zn.expandByPoint(gn),gn.addVectors(Zn.max,ws.max),Zn.expandByPoint(gn)):(Zn.expandByPoint(ws.min),Zn.expandByPoint(ws.max))}Zn.getCenter(i);let a=0;for(let r=0,s=e.count;r<s;r++)gn.fromBufferAttribute(e,r),a=Math.max(a,i.distanceToSquared(gn));if(t)for(let r=0,s=t.length;r<s;r++){const o=t[r],l=this.morphTargetsRelative;for(let c=0,u=o.count;c<u;c++)gn.fromBufferAttribute(o,c),l&&(Tr.fromBufferAttribute(e,c),gn.add(Tr)),a=Math.max(a,i.distanceToSquared(gn))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,a=t.position.array,r=t.normal.array,s=t.uv.array,o=a.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Ai(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let E=0;E<o;E++)c[E]=new X,u[E]=new X;const d=new X,p=new X,g=new X,f=new He,v=new He,h=new He,m=new X,M=new X;function b(E,W,q){d.fromArray(a,E*3),p.fromArray(a,W*3),g.fromArray(a,q*3),f.fromArray(s,E*2),v.fromArray(s,W*2),h.fromArray(s,q*2),p.sub(d),g.sub(d),v.sub(f),h.sub(f);const D=1/(v.x*h.y-h.x*v.y);isFinite(D)&&(m.copy(p).multiplyScalar(h.y).addScaledVector(g,-v.y).multiplyScalar(D),M.copy(g).multiplyScalar(v.x).addScaledVector(p,-h.x).multiplyScalar(D),c[E].add(m),c[W].add(m),c[q].add(m),u[E].add(M),u[W].add(M),u[q].add(M))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let E=0,W=w.length;E<W;++E){const q=w[E],D=q.start,I=q.count;for(let F=D,J=D+I;F<J;F+=3)b(i[F+0],i[F+1],i[F+2])}const R=new X,P=new X,A=new X,G=new X;function x(E){A.fromArray(r,E*3),G.copy(A);const W=c[E];R.copy(W),R.sub(A.multiplyScalar(A.dot(W))).normalize(),P.crossVectors(G,W);const D=P.dot(u[E])<0?-1:1;l[E*4]=R.x,l[E*4+1]=R.y,l[E*4+2]=R.z,l[E*4+3]=D}for(let E=0,W=w.length;E<W;++E){const q=w[E],D=q.start,I=q.count;for(let F=D,J=D+I;F<J;F+=3)x(i[F+0]),x(i[F+1]),x(i[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Ai(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,g=i.count;p<g;p++)i.setXYZ(p,0,0,0);const a=new X,r=new X,s=new X,o=new X,l=new X,c=new X,u=new X,d=new X;if(e)for(let p=0,g=e.count;p<g;p+=3){const f=e.getX(p+0),v=e.getX(p+1),h=e.getX(p+2);a.fromBufferAttribute(t,f),r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,h),u.subVectors(s,r),d.subVectors(a,r),u.cross(d),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,v),c.fromBufferAttribute(i,h),o.add(u),l.add(u),c.add(u),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(v,l.x,l.y,l.z),i.setXYZ(h,c.x,c.y,c.z)}else for(let p=0,g=t.count;p<g;p+=3)a.fromBufferAttribute(t,p+0),r.fromBufferAttribute(t,p+1),s.fromBufferAttribute(t,p+2),u.subVectors(s,r),d.subVectors(a,r),u.cross(d),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)gn.fromBufferAttribute(e,t),gn.normalize(),e.setXYZ(t,gn.x,gn.y,gn.z)}toNonIndexed(){function e(o,l){const c=o.array,u=o.itemSize,d=o.normalized,p=new c.constructor(l.length*u);let g=0,f=0;for(let v=0,h=l.length;v<h;v++){o.isInterleavedBufferAttribute?g=l[v]*o.data.stride+o.offset:g=l[v]*u;for(let m=0;m<u;m++)p[f++]=c[g++]}return new Ai(p,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ha,i=this.index.array,a=this.attributes;for(const o in a){const l=a[o],c=e(l,i);t.setAttribute(o,c)}const r=this.morphAttributes;for(const o in r){const l=[],c=r[o];for(let u=0,d=c.length;u<d;u++){const p=c[u],g=e(p,i);l.push(g)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let o=0,l=s.length;o<l;o++){const c=s[o];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const a={};let r=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,p=c.length;d<p;d++){const g=c[d];u.push(g.toJSON(e.data))}u.length>0&&(a[l]=u,r=!0)}r&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const a=e.attributes;for(const c in a){const u=a[c];this.setAttribute(c,u.clone(t))}const r=e.morphAttributes;for(const c in r){const u=[],d=r[c];for(let p=0,g=d.length;p<g;p++)u.push(d[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const pf=new Xt,Fa=new Hp,So=new Nu,mf=new X,Rr=new X,Cr=new X,Pr=new X,_c=new X,Mo=new X,Eo=new He,wo=new He,Ao=new He,gf=new X,vf=new X,_f=new X,To=new X,Ro=new X;class Lt extends kn{constructor(e=new ha,t=new $p){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const a=t[i[0]];if(a!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=a.length;r<s;r++){const o=a[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}getVertexPosition(e,t){const i=this.geometry,a=i.attributes.position,r=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(a,e);const o=this.morphTargetInfluences;if(r&&o){Mo.set(0,0,0);for(let l=0,c=r.length;l<c;l++){const u=o[l],d=r[l];u!==0&&(_c.fromBufferAttribute(d,e),s?Mo.addScaledVector(_c,u):Mo.addScaledVector(_c.sub(t),u))}t.add(Mo)}return t}raycast(e,t){const i=this.geometry,a=this.material,r=this.matrixWorld;a!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),So.copy(i.boundingSphere),So.applyMatrix4(r),Fa.copy(e.ray).recast(e.near),!(So.containsPoint(Fa.origin)===!1&&(Fa.intersectSphere(So,mf)===null||Fa.origin.distanceToSquared(mf)>(e.far-e.near)**2))&&(pf.copy(r).invert(),Fa.copy(e.ray).applyMatrix4(pf),!(i.boundingBox!==null&&Fa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Fa)))}_computeIntersections(e,t,i){let a;const r=this.geometry,s=this.material,o=r.index,l=r.attributes.position,c=r.attributes.uv,u=r.attributes.uv1,d=r.attributes.normal,p=r.groups,g=r.drawRange;if(o!==null)if(Array.isArray(s))for(let f=0,v=p.length;f<v;f++){const h=p[f],m=s[h.materialIndex],M=Math.max(h.start,g.start),b=Math.min(o.count,Math.min(h.start+h.count,g.start+g.count));for(let w=M,R=b;w<R;w+=3){const P=o.getX(w),A=o.getX(w+1),G=o.getX(w+2);a=Co(this,m,e,i,c,u,d,P,A,G),a&&(a.faceIndex=Math.floor(w/3),a.face.materialIndex=h.materialIndex,t.push(a))}}else{const f=Math.max(0,g.start),v=Math.min(o.count,g.start+g.count);for(let h=f,m=v;h<m;h+=3){const M=o.getX(h),b=o.getX(h+1),w=o.getX(h+2);a=Co(this,s,e,i,c,u,d,M,b,w),a&&(a.faceIndex=Math.floor(h/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(s))for(let f=0,v=p.length;f<v;f++){const h=p[f],m=s[h.materialIndex],M=Math.max(h.start,g.start),b=Math.min(l.count,Math.min(h.start+h.count,g.start+g.count));for(let w=M,R=b;w<R;w+=3){const P=w,A=w+1,G=w+2;a=Co(this,m,e,i,c,u,d,P,A,G),a&&(a.faceIndex=Math.floor(w/3),a.face.materialIndex=h.materialIndex,t.push(a))}}else{const f=Math.max(0,g.start),v=Math.min(l.count,g.start+g.count);for(let h=f,m=v;h<m;h+=3){const M=h,b=h+1,w=h+2;a=Co(this,s,e,i,c,u,d,M,b,w),a&&(a.faceIndex=Math.floor(h/3),t.push(a))}}}}function iS(n,e,t,i,a,r,s,o){let l;if(e.side===qn?l=i.intersectTriangle(s,r,a,!0,o):l=i.intersectTriangle(a,r,s,e.side===Gi,o),l===null)return null;Ro.copy(o),Ro.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Ro);return c<t.near||c>t.far?null:{distance:c,point:Ro.clone(),object:n}}function Co(n,e,t,i,a,r,s,o,l,c){n.getVertexPosition(o,Rr),n.getVertexPosition(l,Cr),n.getVertexPosition(c,Pr);const u=iS(n,e,t,i,Rr,Cr,Pr,To);if(u){a&&(Eo.fromBufferAttribute(a,o),wo.fromBufferAttribute(a,l),Ao.fromBufferAttribute(a,c),u.uv=di.getInterpolation(To,Rr,Cr,Pr,Eo,wo,Ao,new He)),r&&(Eo.fromBufferAttribute(r,o),wo.fromBufferAttribute(r,l),Ao.fromBufferAttribute(r,c),u.uv1=di.getInterpolation(To,Rr,Cr,Pr,Eo,wo,Ao,new He),u.uv2=u.uv1),s&&(gf.fromBufferAttribute(s,o),vf.fromBufferAttribute(s,l),_f.fromBufferAttribute(s,c),u.normal=di.getInterpolation(To,Rr,Cr,Pr,gf,vf,_f,new X),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a:o,b:l,c,normal:new X,materialIndex:0};di.getNormal(Rr,Cr,Pr,d.normal),u.face=d}return u}class Wt extends ha{constructor(e=1,t=1,i=1,a=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:a,heightSegments:r,depthSegments:s};const o=this;a=Math.floor(a),r=Math.floor(r),s=Math.floor(s);const l=[],c=[],u=[],d=[];let p=0,g=0;f("z","y","x",-1,-1,i,t,e,s,r,0),f("z","y","x",1,-1,i,t,-e,s,r,1),f("x","z","y",1,1,e,i,t,a,s,2),f("x","z","y",1,-1,e,i,-t,a,s,3),f("x","y","z",1,-1,e,t,i,a,r,4),f("x","y","z",-1,-1,e,t,-i,a,r,5),this.setIndex(l),this.setAttribute("position",new oa(c,3)),this.setAttribute("normal",new oa(u,3)),this.setAttribute("uv",new oa(d,2));function f(v,h,m,M,b,w,R,P,A,G,x){const E=w/A,W=R/G,q=w/2,D=R/2,I=P/2,F=A+1,J=G+1;let O=0,j=0;const ne=new X;for(let re=0;re<J;re++){const B=re*W-D;for(let Z=0;Z<F;Z++){const de=Z*E-q;ne[v]=de*M,ne[h]=B*b,ne[m]=I,c.push(ne.x,ne.y,ne.z),ne[v]=0,ne[h]=0,ne[m]=P>0?1:-1,u.push(ne.x,ne.y,ne.z),d.push(Z/A),d.push(1-re/G),O+=1}}for(let re=0;re<G;re++)for(let B=0;B<A;B++){const Z=p+B+F*re,de=p+B+F*(re+1),me=p+(B+1)+F*(re+1),be=p+(B+1)+F*re;l.push(Z,de,be),l.push(de,me,be),j+=6}o.addGroup(g,j,x),g+=j,p+=O}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wt(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function as(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const a=n[t][i];a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture||a.isQuaternion)?a.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=a.clone():Array.isArray(a)?e[t][i]=a.slice():e[t][i]=a}}return e}function Fn(n){const e={};for(let t=0;t<n.length;t++){const i=as(n[t]);for(const a in i)e[a]=i[a]}return e}function aS(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function qp(n){return n.getRenderTarget()===null?n.outputColorSpace:Hi}const Yp={clone:as,merge:Fn};var rS=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,sS=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ua extends ds{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=rS,this.fragmentShader=sS,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=as(e.uniforms),this.uniformsGroups=aS(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const a in this.uniforms){const s=this.uniforms[a].value;s&&s.isTexture?t.uniforms[a]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[a]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[a]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[a]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[a]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[a]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[a]={type:"m4",value:s.toArray()}:t.uniforms[a]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const a in this.extensions)this.extensions[a]===!0&&(i[a]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Kp extends kn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xt,this.projectionMatrix=new Xt,this.projectionMatrixInverse=new Xt,this.coordinateSystem=ia}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ti extends Kp{constructor(e=50,t=1,i=.1,a=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=a,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Kc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Xo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Kc*2*Math.atan(Math.tan(Xo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,a,r,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Xo*.5*this.fov)/this.zoom,i=2*t,a=this.aspect*i,r=-.5*a;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;r+=s.offsetX*a/l,t-=s.offsetY*i/c,a*=s.width/l,i*=s.height/c}const o=this.filmOffset;o!==0&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+a,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Lr=-90,Dr=1;class oS extends kn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const a=new ti(Lr,Dr,e,t);a.layers=this.layers,this.add(a);const r=new ti(Lr,Dr,e,t);r.layers=this.layers,this.add(r);const s=new ti(Lr,Dr,e,t);s.layers=this.layers,this.add(s);const o=new ti(Lr,Dr,e,t);o.layers=this.layers,this.add(o);const l=new ti(Lr,Dr,e,t);l.layers=this.layers,this.add(l);const c=new ti(Lr,Dr,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,a,r,s,o,l]=t;for(const c of t)this.remove(c);if(e===ia)i.up.set(0,1,0),i.lookAt(1,0,0),a.up.set(0,1,0),a.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ol)i.up.set(0,-1,0),i.lookAt(-1,0,0),a.up.set(0,-1,0),a.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[a,r,s,o,l,c]=this.children,u=e.getRenderTarget(),d=e.xr.enabled;e.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,a),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,s),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=p,e.setRenderTarget(i,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Jp extends Dn{constructor(e,t,i,a,r,s,o,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:es,super(e,t,i,a,r,s,o,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lS extends ca{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},a=[i,i,i,i,i,i];t.encoding!==void 0&&(Is("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===nr?Nt:ir),this.texture=new Jp(a,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ui}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},a=new Wt(5,5,5),r=new ua({name:"CubemapFromEquirect",uniforms:as(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:qn,blending:sa});r.uniforms.tEquirect.value=t;const s=new Lt(a,r),o=t.minFilter;return t.minFilter===qs&&(t.minFilter=ui),new oS(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,a){const r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,a);e.setRenderTarget(r)}}const bc=new X,cS=new X,uS=new ot;class ba{constructor(e=new X(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,a){return this.normal.set(e,t,i),this.constant=a,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const a=bc.subVectors(i,t).cross(cS.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(bc),a=this.normal.dot(i);if(a===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/a;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||uS.getNormalMatrix(e),a=this.coplanarPoint(bc).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ba=new Nu,Po=new X;class Ou{constructor(e=new ba,t=new ba,i=new ba,a=new ba,r=new ba,s=new ba){this.planes=[e,t,i,a,r,s]}set(e,t,i,a,r,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(a),o[4].copy(r),o[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ia){const i=this.planes,a=e.elements,r=a[0],s=a[1],o=a[2],l=a[3],c=a[4],u=a[5],d=a[6],p=a[7],g=a[8],f=a[9],v=a[10],h=a[11],m=a[12],M=a[13],b=a[14],w=a[15];if(i[0].setComponents(l-r,p-c,h-g,w-m).normalize(),i[1].setComponents(l+r,p+c,h+g,w+m).normalize(),i[2].setComponents(l+s,p+u,h+f,w+M).normalize(),i[3].setComponents(l-s,p-u,h-f,w-M).normalize(),i[4].setComponents(l-o,p-d,h-v,w-b).normalize(),t===ia)i[5].setComponents(l+o,p+d,h+v,w+b).normalize();else if(t===ol)i[5].setComponents(o,d,v,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ba.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ba.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ba)}intersectsSprite(e){return Ba.center.set(0,0,0),Ba.radius=.7071067811865476,Ba.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ba)}intersectsSphere(e){const t=this.planes,i=e.center,a=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(i)<a)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const a=t[i];if(Po.x=a.normal.x>0?e.max.x:e.min.x,Po.y=a.normal.y>0?e.max.y:e.min.y,Po.z=a.normal.z>0?e.max.z:e.min.z,a.distanceToPoint(Po)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Zp(){let n=null,e=!1,t=null,i=null;function a(r,s){t(r,s),i=n.requestAnimationFrame(a)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(a),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){n=r}}}function dS(n,e){const t=e.isWebGL2,i=new WeakMap;function a(c,u){const d=c.array,p=c.usage,g=n.createBuffer();n.bindBuffer(u,g),n.bufferData(u,d,p),c.onUploadCallback();let f;if(d instanceof Float32Array)f=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)f=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else f=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)f=n.SHORT;else if(d instanceof Uint32Array)f=n.UNSIGNED_INT;else if(d instanceof Int32Array)f=n.INT;else if(d instanceof Int8Array)f=n.BYTE;else if(d instanceof Uint8Array)f=n.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)f=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:g,type:f,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function r(c,u,d){const p=u.array,g=u.updateRange;n.bindBuffer(d,c),g.count===-1?n.bufferSubData(d,0,p):(t?n.bufferSubData(d,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):n.bufferSubData(d,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1),u.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function o(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const p=i.get(c);(!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,a(c,u)):d.version<c.version&&(r(d.buffer,c,u),d.version=c.version)}return{get:s,remove:o,update:l}}class Fu extends ha{constructor(e=1,t=1,i=1,a=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:a};const r=e/2,s=t/2,o=Math.floor(i),l=Math.floor(a),c=o+1,u=l+1,d=e/o,p=t/l,g=[],f=[],v=[],h=[];for(let m=0;m<u;m++){const M=m*p-s;for(let b=0;b<c;b++){const w=b*d-r;f.push(w,-M,0),v.push(0,0,1),h.push(b/o),h.push(1-m/l)}}for(let m=0;m<l;m++)for(let M=0;M<o;M++){const b=M+c*m,w=M+c*(m+1),R=M+1+c*(m+1),P=M+1+c*m;g.push(b,w,P),g.push(w,R,P)}this.setIndex(g),this.setAttribute("position",new oa(f,3)),this.setAttribute("normal",new oa(v,3)),this.setAttribute("uv",new oa(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fu(e.width,e.height,e.widthSegments,e.heightSegments)}}var fS=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,hS=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,pS=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mS=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gS=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,vS=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,_S=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,bS=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xS=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,yS=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SS=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,MS=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ES=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,wS=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,AS=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,TS=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,RS=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,CS=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,PS=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LS=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,DS=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,kS=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,US=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,IS=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NS=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,OS=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FS=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,BS=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zS="gl_FragColor = linearToOutputTexel( gl_FragColor );",GS=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,HS=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VS=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WS=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$S=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,jS=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XS=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,qS=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,YS=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,KS=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JS=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ZS=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,QS=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eM=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,tM=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,nM=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,iM=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,aM=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rM=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,sM=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,oM=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lM=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,cM=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,uM=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dM=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,fM=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,hM=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,pM=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,mM=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,gM=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,vM=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,_M=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,bM=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xM=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yM=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,SM=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,MM=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,EM=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,wM=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,AM=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,TM=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,RM=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,CM=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PM=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,LM=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,DM=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,kM=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,UM=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,IM=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,NM=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,OM=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,FM=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,BM=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,zM=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,GM=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,HM=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,VM=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,WM=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$M=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,jM=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,XM=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,qM=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,YM=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,KM=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,JM=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ZM=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,QM=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,eE=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tE=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,nE=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iE=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,aE=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,rE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,oE=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lE=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cE=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uE=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fE=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pE=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mE=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,gE=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vE=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,_E=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,bE=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,xE=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,yE=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SE=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ME=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,EE=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wE=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AE=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TE=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,RE=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CE=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,PE=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,LE=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DE=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kE=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,UE=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IE=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NE=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OE=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,FE=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,BE=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zE=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,GE=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HE=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,rt={alphahash_fragment:fS,alphahash_pars_fragment:hS,alphamap_fragment:pS,alphamap_pars_fragment:mS,alphatest_fragment:gS,alphatest_pars_fragment:vS,aomap_fragment:_S,aomap_pars_fragment:bS,begin_vertex:xS,beginnormal_vertex:yS,bsdfs:SS,iridescence_fragment:MS,bumpmap_pars_fragment:ES,clipping_planes_fragment:wS,clipping_planes_pars_fragment:AS,clipping_planes_pars_vertex:TS,clipping_planes_vertex:RS,color_fragment:CS,color_pars_fragment:PS,color_pars_vertex:LS,color_vertex:DS,common:kS,cube_uv_reflection_fragment:US,defaultnormal_vertex:IS,displacementmap_pars_vertex:NS,displacementmap_vertex:OS,emissivemap_fragment:FS,emissivemap_pars_fragment:BS,colorspace_fragment:zS,colorspace_pars_fragment:GS,envmap_fragment:HS,envmap_common_pars_fragment:VS,envmap_pars_fragment:WS,envmap_pars_vertex:$S,envmap_physical_pars_fragment:iM,envmap_vertex:jS,fog_vertex:XS,fog_pars_vertex:qS,fog_fragment:YS,fog_pars_fragment:KS,gradientmap_pars_fragment:JS,lightmap_fragment:ZS,lightmap_pars_fragment:QS,lights_lambert_fragment:eM,lights_lambert_pars_fragment:tM,lights_pars_begin:nM,lights_toon_fragment:aM,lights_toon_pars_fragment:rM,lights_phong_fragment:sM,lights_phong_pars_fragment:oM,lights_physical_fragment:lM,lights_physical_pars_fragment:cM,lights_fragment_begin:uM,lights_fragment_maps:dM,lights_fragment_end:fM,logdepthbuf_fragment:hM,logdepthbuf_pars_fragment:pM,logdepthbuf_pars_vertex:mM,logdepthbuf_vertex:gM,map_fragment:vM,map_pars_fragment:_M,map_particle_fragment:bM,map_particle_pars_fragment:xM,metalnessmap_fragment:yM,metalnessmap_pars_fragment:SM,morphcolor_vertex:MM,morphnormal_vertex:EM,morphtarget_pars_vertex:wM,morphtarget_vertex:AM,normal_fragment_begin:TM,normal_fragment_maps:RM,normal_pars_fragment:CM,normal_pars_vertex:PM,normal_vertex:LM,normalmap_pars_fragment:DM,clearcoat_normal_fragment_begin:kM,clearcoat_normal_fragment_maps:UM,clearcoat_pars_fragment:IM,iridescence_pars_fragment:NM,opaque_fragment:OM,packing:FM,premultiplied_alpha_fragment:BM,project_vertex:zM,dithering_fragment:GM,dithering_pars_fragment:HM,roughnessmap_fragment:VM,roughnessmap_pars_fragment:WM,shadowmap_pars_fragment:$M,shadowmap_pars_vertex:jM,shadowmap_vertex:XM,shadowmask_pars_fragment:qM,skinbase_vertex:YM,skinning_pars_vertex:KM,skinning_vertex:JM,skinnormal_vertex:ZM,specularmap_fragment:QM,specularmap_pars_fragment:eE,tonemapping_fragment:tE,tonemapping_pars_fragment:nE,transmission_fragment:iE,transmission_pars_fragment:aE,uv_pars_fragment:rE,uv_pars_vertex:sE,uv_vertex:oE,worldpos_vertex:lE,background_vert:cE,background_frag:uE,backgroundCube_vert:dE,backgroundCube_frag:fE,cube_vert:hE,cube_frag:pE,depth_vert:mE,depth_frag:gE,distanceRGBA_vert:vE,distanceRGBA_frag:_E,equirect_vert:bE,equirect_frag:xE,linedashed_vert:yE,linedashed_frag:SE,meshbasic_vert:ME,meshbasic_frag:EE,meshlambert_vert:wE,meshlambert_frag:AE,meshmatcap_vert:TE,meshmatcap_frag:RE,meshnormal_vert:CE,meshnormal_frag:PE,meshphong_vert:LE,meshphong_frag:DE,meshphysical_vert:kE,meshphysical_frag:UE,meshtoon_vert:IE,meshtoon_frag:NE,points_vert:OE,points_frag:FE,shadow_vert:BE,shadow_frag:zE,sprite_vert:GE,sprite_frag:HE},Ae={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ot},alphaMap:{value:null},alphaMapTransform:{value:new ot},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ot}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ot}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ot}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ot},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ot},normalScale:{value:new He(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ot},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ot}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ot}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ot}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ot},alphaTest:{value:0},uvTransform:{value:new ot}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new He(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ot},alphaMap:{value:null},alphaMapTransform:{value:new ot},alphaTest:{value:0}}},Ni={basic:{uniforms:Fn([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.fog]),vertexShader:rt.meshbasic_vert,fragmentShader:rt.meshbasic_frag},lambert:{uniforms:Fn([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,Ae.lights,{emissive:{value:new bt(0)}}]),vertexShader:rt.meshlambert_vert,fragmentShader:rt.meshlambert_frag},phong:{uniforms:Fn([Ae.common,Ae.specularmap,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,Ae.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:rt.meshphong_vert,fragmentShader:rt.meshphong_frag},standard:{uniforms:Fn([Ae.common,Ae.envmap,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.roughnessmap,Ae.metalnessmap,Ae.fog,Ae.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:rt.meshphysical_vert,fragmentShader:rt.meshphysical_frag},toon:{uniforms:Fn([Ae.common,Ae.aomap,Ae.lightmap,Ae.emissivemap,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.gradientmap,Ae.fog,Ae.lights,{emissive:{value:new bt(0)}}]),vertexShader:rt.meshtoon_vert,fragmentShader:rt.meshtoon_frag},matcap:{uniforms:Fn([Ae.common,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,Ae.fog,{matcap:{value:null}}]),vertexShader:rt.meshmatcap_vert,fragmentShader:rt.meshmatcap_frag},points:{uniforms:Fn([Ae.points,Ae.fog]),vertexShader:rt.points_vert,fragmentShader:rt.points_frag},dashed:{uniforms:Fn([Ae.common,Ae.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:rt.linedashed_vert,fragmentShader:rt.linedashed_frag},depth:{uniforms:Fn([Ae.common,Ae.displacementmap]),vertexShader:rt.depth_vert,fragmentShader:rt.depth_frag},normal:{uniforms:Fn([Ae.common,Ae.bumpmap,Ae.normalmap,Ae.displacementmap,{opacity:{value:1}}]),vertexShader:rt.meshnormal_vert,fragmentShader:rt.meshnormal_frag},sprite:{uniforms:Fn([Ae.sprite,Ae.fog]),vertexShader:rt.sprite_vert,fragmentShader:rt.sprite_frag},background:{uniforms:{uvTransform:{value:new ot},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:rt.background_vert,fragmentShader:rt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:rt.backgroundCube_vert,fragmentShader:rt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:rt.cube_vert,fragmentShader:rt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:rt.equirect_vert,fragmentShader:rt.equirect_frag},distanceRGBA:{uniforms:Fn([Ae.common,Ae.displacementmap,{referencePosition:{value:new X},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:rt.distanceRGBA_vert,fragmentShader:rt.distanceRGBA_frag},shadow:{uniforms:Fn([Ae.lights,Ae.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:rt.shadow_vert,fragmentShader:rt.shadow_frag}};Ni.physical={uniforms:Fn([Ni.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ot},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ot},clearcoatNormalScale:{value:new He(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ot},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ot},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ot},sheen:{value:0},sheenColor:{value:new bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ot},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ot},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ot},transmissionSamplerSize:{value:new He},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ot},attenuationDistance:{value:0},attenuationColor:{value:new bt(0)},specularColor:{value:new bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ot},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ot},anisotropyVector:{value:new He},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ot}}]),vertexShader:rt.meshphysical_vert,fragmentShader:rt.meshphysical_frag};const Lo={r:0,b:0,g:0};function VE(n,e,t,i,a,r,s){const o=new bt(0);let l=r===!0?0:1,c,u,d=null,p=0,g=null;function f(h,m){let M=!1,b=m.isScene===!0?m.background:null;b&&b.isTexture&&(b=(m.backgroundBlurriness>0?t:e).get(b)),b===null?v(o,l):b&&b.isColor&&(v(b,1),M=!0);const w=n.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,s):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Tl)?(u===void 0&&(u=new Lt(new Wt(1,1,1),new ua({name:"BackgroundCubeMaterial",uniforms:as(Ni.backgroundCube.uniforms),vertexShader:Ni.backgroundCube.vertexShader,fragmentShader:Ni.backgroundCube.fragmentShader,side:qn,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(R,P,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),a.update(u)),u.material.uniforms.envMap.value=b,u.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=b.colorSpace!==Nt,(d!==b||p!==b.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,d=b,p=b.version,g=n.toneMapping),u.layers.enableAll(),h.unshift(u,u.geometry,u.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new Lt(new Fu(2,2),new ua({name:"BackgroundMaterial",uniforms:as(Ni.background.uniforms),vertexShader:Ni.background.vertexShader,fragmentShader:Ni.background.fragmentShader,side:Gi,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),a.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=b.colorSpace!==Nt,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||p!==b.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,d=b,p=b.version,g=n.toneMapping),c.layers.enableAll(),h.unshift(c,c.geometry,c.material,0,0,null))}function v(h,m){h.getRGB(Lo,qp(n)),i.buffers.color.setClear(Lo.r,Lo.g,Lo.b,m,s)}return{getClearColor:function(){return o},setClearColor:function(h,m=1){o.set(h),l=m,v(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(h){l=h,v(o,l)},render:f}}function WE(n,e,t,i){const a=n.getParameter(n.MAX_VERTEX_ATTRIBS),r=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||r!==null,o={},l=h(null);let c=l,u=!1;function d(I,F,J,O,j){let ne=!1;if(s){const re=v(O,J,F);c!==re&&(c=re,g(c.object)),ne=m(I,O,J,j),ne&&M(I,O,J,j)}else{const re=F.wireframe===!0;(c.geometry!==O.id||c.program!==J.id||c.wireframe!==re)&&(c.geometry=O.id,c.program=J.id,c.wireframe=re,ne=!0)}j!==null&&t.update(j,n.ELEMENT_ARRAY_BUFFER),(ne||u)&&(u=!1,G(I,F,J,O),j!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(j).buffer))}function p(){return i.isWebGL2?n.createVertexArray():r.createVertexArrayOES()}function g(I){return i.isWebGL2?n.bindVertexArray(I):r.bindVertexArrayOES(I)}function f(I){return i.isWebGL2?n.deleteVertexArray(I):r.deleteVertexArrayOES(I)}function v(I,F,J){const O=J.wireframe===!0;let j=o[I.id];j===void 0&&(j={},o[I.id]=j);let ne=j[F.id];ne===void 0&&(ne={},j[F.id]=ne);let re=ne[O];return re===void 0&&(re=h(p()),ne[O]=re),re}function h(I){const F=[],J=[],O=[];for(let j=0;j<a;j++)F[j]=0,J[j]=0,O[j]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:J,attributeDivisors:O,object:I,attributes:{},index:null}}function m(I,F,J,O){const j=c.attributes,ne=F.attributes;let re=0;const B=J.getAttributes();for(const Z in B)if(B[Z].location>=0){const me=j[Z];let be=ne[Z];if(be===void 0&&(Z==="instanceMatrix"&&I.instanceMatrix&&(be=I.instanceMatrix),Z==="instanceColor"&&I.instanceColor&&(be=I.instanceColor)),me===void 0||me.attribute!==be||be&&me.data!==be.data)return!0;re++}return c.attributesNum!==re||c.index!==O}function M(I,F,J,O){const j={},ne=F.attributes;let re=0;const B=J.getAttributes();for(const Z in B)if(B[Z].location>=0){let me=ne[Z];me===void 0&&(Z==="instanceMatrix"&&I.instanceMatrix&&(me=I.instanceMatrix),Z==="instanceColor"&&I.instanceColor&&(me=I.instanceColor));const be={};be.attribute=me,me&&me.data&&(be.data=me.data),j[Z]=be,re++}c.attributes=j,c.attributesNum=re,c.index=O}function b(){const I=c.newAttributes;for(let F=0,J=I.length;F<J;F++)I[F]=0}function w(I){R(I,0)}function R(I,F){const J=c.newAttributes,O=c.enabledAttributes,j=c.attributeDivisors;J[I]=1,O[I]===0&&(n.enableVertexAttribArray(I),O[I]=1),j[I]!==F&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](I,F),j[I]=F)}function P(){const I=c.newAttributes,F=c.enabledAttributes;for(let J=0,O=F.length;J<O;J++)F[J]!==I[J]&&(n.disableVertexAttribArray(J),F[J]=0)}function A(I,F,J,O,j,ne,re){re===!0?n.vertexAttribIPointer(I,F,J,j,ne):n.vertexAttribPointer(I,F,J,O,j,ne)}function G(I,F,J,O){if(i.isWebGL2===!1&&(I.isInstancedMesh||O.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const j=O.attributes,ne=J.getAttributes(),re=F.defaultAttributeValues;for(const B in ne){const Z=ne[B];if(Z.location>=0){let de=j[B];if(de===void 0&&(B==="instanceMatrix"&&I.instanceMatrix&&(de=I.instanceMatrix),B==="instanceColor"&&I.instanceColor&&(de=I.instanceColor)),de!==void 0){const me=de.normalized,be=de.itemSize,Re=t.get(de);if(Re===void 0)continue;const Ce=Re.buffer,_e=Re.type,Ie=Re.bytesPerElement,ct=i.isWebGL2===!0&&(_e===n.INT||_e===n.UNSIGNED_INT||de.gpuType===Pp);if(de.isInterleavedBufferAttribute){const ze=de.data,z=ze.stride,Be=de.offset;if(ze.isInstancedInterleavedBuffer){for(let Ee=0;Ee<Z.locationSize;Ee++)R(Z.location+Ee,ze.meshPerAttribute);I.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=ze.meshPerAttribute*ze.count)}else for(let Ee=0;Ee<Z.locationSize;Ee++)w(Z.location+Ee);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let Ee=0;Ee<Z.locationSize;Ee++)A(Z.location+Ee,be/Z.locationSize,_e,me,z*Ie,(Be+be/Z.locationSize*Ee)*Ie,ct)}else{if(de.isInstancedBufferAttribute){for(let ze=0;ze<Z.locationSize;ze++)R(Z.location+ze,de.meshPerAttribute);I.isInstancedMesh!==!0&&O._maxInstanceCount===void 0&&(O._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let ze=0;ze<Z.locationSize;ze++)w(Z.location+ze);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let ze=0;ze<Z.locationSize;ze++)A(Z.location+ze,be/Z.locationSize,_e,me,be*Ie,be/Z.locationSize*ze*Ie,ct)}}else if(re!==void 0){const me=re[B];if(me!==void 0)switch(me.length){case 2:n.vertexAttrib2fv(Z.location,me);break;case 3:n.vertexAttrib3fv(Z.location,me);break;case 4:n.vertexAttrib4fv(Z.location,me);break;default:n.vertexAttrib1fv(Z.location,me)}}}}P()}function x(){q();for(const I in o){const F=o[I];for(const J in F){const O=F[J];for(const j in O)f(O[j].object),delete O[j];delete F[J]}delete o[I]}}function E(I){if(o[I.id]===void 0)return;const F=o[I.id];for(const J in F){const O=F[J];for(const j in O)f(O[j].object),delete O[j];delete F[J]}delete o[I.id]}function W(I){for(const F in o){const J=o[F];if(J[I.id]===void 0)continue;const O=J[I.id];for(const j in O)f(O[j].object),delete O[j];delete J[I.id]}}function q(){D(),u=!0,c!==l&&(c=l,g(c.object))}function D(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:q,resetDefaultState:D,dispose:x,releaseStatesOfGeometry:E,releaseStatesOfProgram:W,initAttributes:b,enableAttribute:w,disableUnusedAttributes:P}}function $E(n,e,t,i){const a=i.isWebGL2;let r;function s(c){r=c}function o(c,u){n.drawArrays(r,c,u),t.update(u,r,1)}function l(c,u,d){if(d===0)return;let p,g;if(a)p=n,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](r,c,u,d),t.update(u,r,d)}this.setMode=s,this.render=o,this.renderInstances=l}function jE(n,e,t){let i;function a(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const A=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(A.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function r(A){if(A==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";A="mediump"}return A==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let o=t.precision!==void 0?t.precision:"highp";const l=r(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const c=s||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=n.getParameter(n.MAX_TEXTURE_SIZE),f=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),h=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),m=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=p>0,w=s||e.has("OES_texture_float"),R=b&&w,P=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:a,getMaxPrecision:r,precision:o,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:f,maxAttributes:v,maxVertexUniforms:h,maxVaryings:m,maxFragmentUniforms:M,vertexTextures:b,floatFragmentTextures:w,floatVertexTextures:R,maxSamples:P}}function XE(n){const e=this;let t=null,i=0,a=!1,r=!1;const s=new ba,o=new ot,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,p){const g=d.length!==0||p||i!==0||a;return a=p,i=d.length,g},this.beginShadows=function(){r=!0,u(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(d,p){t=u(d,p,0)},this.setState=function(d,p,g){const f=d.clippingPlanes,v=d.clipIntersection,h=d.clipShadows,m=n.get(d);if(!a||f===null||f.length===0||r&&!h)r?u(null):c();else{const M=r?0:i,b=M*4;let w=m.clippingState||null;l.value=w,w=u(f,p,b,g);for(let R=0;R!==b;++R)w[R]=t[R];m.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=M}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,p,g,f){const v=d!==null?d.length:0;let h=null;if(v!==0){if(h=l.value,f!==!0||h===null){const m=g+v*4,M=p.matrixWorldInverse;o.getNormalMatrix(M),(h===null||h.length<m)&&(h=new Float32Array(m));for(let b=0,w=g;b!==v;++b,w+=4)s.copy(d[b]).applyMatrix4(M,o),s.normal.toArray(h,w),h[w+3]=s.constant}l.value=h,l.needsUpdate=!0}return e.numPlanes=v,e.numIntersection=0,h}}function qE(n){let e=new WeakMap;function t(s,o){return o===sl?s.mapping=es:o===$c&&(s.mapping=ts),s}function i(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const o=s.mapping;if(o===sl||o===$c)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new lS(l.height/2);return c.fromEquirectangularTexture(n,s),e.set(s,c),s.addEventListener("dispose",a),t(c.texture,s.mapping)}else return null}}return s}function a(s){const o=s.target;o.removeEventListener("dispose",a);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function r(){e=new WeakMap}return{get:i,dispose:r}}class Qp extends Kp{constructor(e=-1,t=1,i=1,a=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=a,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,a,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=a,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,a=(this.top+this.bottom)/2;let r=i-e,s=i+e,o=a+t,l=a-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=c*this.view.offsetX,s=r+c*this.view.width,o-=u*this.view.offsetY,l=o-u*this.view.height}this.projectionMatrix.makeOrthographic(r,s,o,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const zr=4,bf=[.125,.215,.35,.446,.526,.582],Va=20,xc=new Qp,xf=new bt;let yc=null;const Ga=(1+Math.sqrt(5))/2,kr=1/Ga,yf=[new X(1,1,1),new X(-1,1,1),new X(1,1,-1),new X(-1,1,-1),new X(0,Ga,kr),new X(0,Ga,-kr),new X(kr,0,Ga),new X(-kr,0,Ga),new X(Ga,kr,0),new X(-Ga,kr,0)];class Sf{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,a=100){yc=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,a,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wf(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ef(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(yc),e.scissorTest=!1,Do(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===es||e.mapping===ts?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),yc=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ui,minFilter:ui,generateMipmaps:!1,type:ns,format:Ei,colorSpace:Hi,depthBuffer:!1},a=Mf(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Mf(e,t,i);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YE(r)),this._blurMaterial=KE(r,e,t)}return a}_compileMaterial(e){const t=new Lt(this._lodPlanes[0],e);this._renderer.compile(t,xc)}_sceneToCubeUV(e,t,i,a){const o=new ti(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,p=u.toneMapping;u.getClearColor(xf),u.toneMapping=Pa,u.autoClear=!1;const g=new $p({name:"PMREM.Background",side:qn,depthWrite:!1,depthTest:!1}),f=new Lt(new Wt,g);let v=!1;const h=e.background;h?h.isColor&&(g.color.copy(h),e.background=null,v=!0):(g.color.copy(xf),v=!0);for(let m=0;m<6;m++){const M=m%3;M===0?(o.up.set(0,l[m],0),o.lookAt(c[m],0,0)):M===1?(o.up.set(0,0,l[m]),o.lookAt(0,c[m],0)):(o.up.set(0,l[m],0),o.lookAt(0,0,c[m]));const b=this._cubeSize;Do(a,M*b,m>2?b:0,b,b),u.setRenderTarget(a),v&&u.render(f,o),u.render(e,o)}f.geometry.dispose(),f.material.dispose(),u.toneMapping=p,u.autoClear=d,e.background=h}_textureToCubeUV(e,t){const i=this._renderer,a=e.mapping===es||e.mapping===ts;a?(this._cubemapMaterial===null&&(this._cubemapMaterial=wf()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ef());const r=a?this._cubemapMaterial:this._equirectMaterial,s=new Lt(this._lodPlanes[0],r),o=r.uniforms;o.envMap.value=e;const l=this._cubeSize;Do(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,xc)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let a=1;a<this._lodPlanes.length;a++){const r=Math.sqrt(this._sigmas[a]*this._sigmas[a]-this._sigmas[a-1]*this._sigmas[a-1]),s=yf[(a-1)%yf.length];this._blur(e,a-1,a,r,s)}t.autoClear=i}_blur(e,t,i,a,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,a,"latitudinal",r),this._halfBlur(s,e,i,i,a,"longitudinal",r)}_halfBlur(e,t,i,a,r,s,o){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new Lt(this._lodPlanes[a],c),p=c.uniforms,g=this._sizeLods[i]-1,f=isFinite(r)?Math.PI/(2*g):2*Math.PI/(2*Va-1),v=r/f,h=isFinite(r)?1+Math.floor(u*v):Va;h>Va&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${h} samples when the maximum is set to ${Va}`);const m=[];let M=0;for(let A=0;A<Va;++A){const G=A/v,x=Math.exp(-G*G/2);m.push(x),A===0?M+=x:A<h&&(M+=2*x)}for(let A=0;A<m.length;A++)m[A]=m[A]/M;p.envMap.value=e.texture,p.samples.value=h,p.weights.value=m,p.latitudinal.value=s==="latitudinal",o&&(p.poleAxis.value=o);const{_lodMax:b}=this;p.dTheta.value=f,p.mipInt.value=b-i;const w=this._sizeLods[a],R=3*w*(a>b-zr?a-b+zr:0),P=4*(this._cubeSize-w);Do(t,R,P,3*w,2*w),l.setRenderTarget(t),l.render(d,xc)}}function YE(n){const e=[],t=[],i=[];let a=n;const r=n-zr+1+bf.length;for(let s=0;s<r;s++){const o=Math.pow(2,a);t.push(o);let l=1/o;s>n-zr?l=bf[s-n+zr-1]:s===0&&(l=0),i.push(l);const c=1/(o-2),u=-c,d=1+c,p=[u,u,d,u,d,d,u,u,d,d,u,d],g=6,f=6,v=3,h=2,m=1,M=new Float32Array(v*f*g),b=new Float32Array(h*f*g),w=new Float32Array(m*f*g);for(let P=0;P<g;P++){const A=P%3*2/3-1,G=P>2?0:-1,x=[A,G,0,A+2/3,G,0,A+2/3,G+1,0,A,G,0,A+2/3,G+1,0,A,G+1,0];M.set(x,v*f*P),b.set(p,h*f*P);const E=[P,P,P,P,P,P];w.set(E,m*f*P)}const R=new ha;R.setAttribute("position",new Ai(M,v)),R.setAttribute("uv",new Ai(b,h)),R.setAttribute("faceIndex",new Ai(w,m)),e.push(R),a>zr&&a--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function Mf(n,e,t){const i=new ca(n,e,t);return i.texture.mapping=Tl,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Do(n,e,t,i,a){n.viewport.set(e,t,i,a),n.scissor.set(e,t,i,a)}function KE(n,e,t){const i=new Float32Array(Va),a=new X(0,1,0);return new ua({name:"SphericalGaussianBlur",defines:{n:Va,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:a}},vertexShader:Bu(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function Ef(){return new ua({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Bu(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function wf(){return new ua({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Bu(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:sa,depthTest:!1,depthWrite:!1})}function Bu(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function JE(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,c=l===sl||l===$c,u=l===es||l===ts;if(c||u)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let d=e.get(o);return t===null&&(t=new Sf(n)),d=c?t.fromEquirectangular(o,d):t.fromCubemap(o,d),e.set(o,d),d.texture}else{if(e.has(o))return e.get(o).texture;{const d=o.image;if(c&&d&&d.height>0||u&&d&&a(d)){t===null&&(t=new Sf(n));const p=c?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,p),o.addEventListener("dispose",r),p.texture}else return null}}}return o}function a(o){let l=0;const c=6;for(let u=0;u<c;u++)o[u]!==void 0&&l++;return l===c}function r(o){const l=o.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function ZE(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let a;switch(i){case"WEBGL_depth_texture":a=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":a=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":a=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":a=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:a=n.getExtension(i)}return e[i]=a,a}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const a=t(i);return a===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),a}}}function QE(n,e,t,i){const a={},r=new WeakMap;function s(d){const p=d.target;p.index!==null&&e.remove(p.index);for(const f in p.attributes)e.remove(p.attributes[f]);for(const f in p.morphAttributes){const v=p.morphAttributes[f];for(let h=0,m=v.length;h<m;h++)e.remove(v[h])}p.removeEventListener("dispose",s),delete a[p.id];const g=r.get(p);g&&(e.remove(g),r.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function o(d,p){return a[p.id]===!0||(p.addEventListener("dispose",s),a[p.id]=!0,t.memory.geometries++),p}function l(d){const p=d.attributes;for(const f in p)e.update(p[f],n.ARRAY_BUFFER);const g=d.morphAttributes;for(const f in g){const v=g[f];for(let h=0,m=v.length;h<m;h++)e.update(v[h],n.ARRAY_BUFFER)}}function c(d){const p=[],g=d.index,f=d.attributes.position;let v=0;if(g!==null){const M=g.array;v=g.version;for(let b=0,w=M.length;b<w;b+=3){const R=M[b+0],P=M[b+1],A=M[b+2];p.push(R,P,P,A,A,R)}}else if(f!==void 0){const M=f.array;v=f.version;for(let b=0,w=M.length/3-1;b<w;b+=3){const R=b+0,P=b+1,A=b+2;p.push(R,P,P,A,A,R)}}else return;const h=new(Fp(p)?Xp:jp)(p,1);h.version=v;const m=r.get(d);m&&e.remove(m),r.set(d,h)}function u(d){const p=r.get(d);if(p){const g=d.index;g!==null&&p.version<g.version&&c(d)}else c(d);return r.get(d)}return{get:o,update:l,getWireframeAttribute:u}}function ew(n,e,t,i){const a=i.isWebGL2;let r;function s(p){r=p}let o,l;function c(p){o=p.type,l=p.bytesPerElement}function u(p,g){n.drawElements(r,g,o,p*l),t.update(g,r,1)}function d(p,g,f){if(f===0)return;let v,h;if(a)v=n,h="drawElementsInstanced";else if(v=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[h](r,g,o,p*l,f),t.update(g,r,f)}this.setMode=s,this.setIndex=c,this.render=u,this.renderInstances=d}function tw(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(r,s,o){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=o*(r/3);break;case n.LINES:t.lines+=o*(r/2);break;case n.LINE_STRIP:t.lines+=o*(r-1);break;case n.LINE_LOOP:t.lines+=o*r;break;case n.POINTS:t.points+=o*r;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function a(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:a,update:i}}function nw(n,e){return n[0]-e[0]}function iw(n,e){return Math.abs(e[1])-Math.abs(n[1])}function aw(n,e,t){const i={},a=new Float32Array(8),r=new WeakMap,s=new Ft,o=[];for(let c=0;c<8;c++)o[c]=[c,0];function l(c,u,d){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const g=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,f=g!==void 0?g.length:0;let v=r.get(u);if(v===void 0||v.count!==f){let I=function(){q.dispose(),r.delete(u),u.removeEventListener("dispose",I)};v!==void 0&&v.texture.dispose();const M=u.morphAttributes.position!==void 0,b=u.morphAttributes.normal!==void 0,w=u.morphAttributes.color!==void 0,R=u.morphAttributes.position||[],P=u.morphAttributes.normal||[],A=u.morphAttributes.color||[];let G=0;M===!0&&(G=1),b===!0&&(G=2),w===!0&&(G=3);let x=u.attributes.position.count*G,E=1;x>e.maxTextureSize&&(E=Math.ceil(x/e.maxTextureSize),x=e.maxTextureSize);const W=new Float32Array(x*E*4*f),q=new Gp(W,x,E,f);q.type=na,q.needsUpdate=!0;const D=G*4;for(let F=0;F<f;F++){const J=R[F],O=P[F],j=A[F],ne=x*E*4*F;for(let re=0;re<J.count;re++){const B=re*D;M===!0&&(s.fromBufferAttribute(J,re),W[ne+B+0]=s.x,W[ne+B+1]=s.y,W[ne+B+2]=s.z,W[ne+B+3]=0),b===!0&&(s.fromBufferAttribute(O,re),W[ne+B+4]=s.x,W[ne+B+5]=s.y,W[ne+B+6]=s.z,W[ne+B+7]=0),w===!0&&(s.fromBufferAttribute(j,re),W[ne+B+8]=s.x,W[ne+B+9]=s.y,W[ne+B+10]=s.z,W[ne+B+11]=j.itemSize===4?s.w:1)}}v={count:f,texture:q,size:new He(x,E)},r.set(u,v),u.addEventListener("dispose",I)}let h=0;for(let M=0;M<p.length;M++)h+=p[M];const m=u.morphTargetsRelative?1:1-h;d.getUniforms().setValue(n,"morphTargetBaseInfluence",m),d.getUniforms().setValue(n,"morphTargetInfluences",p),d.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const g=p===void 0?0:p.length;let f=i[u.id];if(f===void 0||f.length!==g){f=[];for(let b=0;b<g;b++)f[b]=[b,0];i[u.id]=f}for(let b=0;b<g;b++){const w=f[b];w[0]=b,w[1]=p[b]}f.sort(iw);for(let b=0;b<8;b++)b<g&&f[b][1]?(o[b][0]=f[b][0],o[b][1]=f[b][1]):(o[b][0]=Number.MAX_SAFE_INTEGER,o[b][1]=0);o.sort(nw);const v=u.morphAttributes.position,h=u.morphAttributes.normal;let m=0;for(let b=0;b<8;b++){const w=o[b],R=w[0],P=w[1];R!==Number.MAX_SAFE_INTEGER&&P?(v&&u.getAttribute("morphTarget"+b)!==v[R]&&u.setAttribute("morphTarget"+b,v[R]),h&&u.getAttribute("morphNormal"+b)!==h[R]&&u.setAttribute("morphNormal"+b,h[R]),a[b]=P,m+=P):(v&&u.hasAttribute("morphTarget"+b)===!0&&u.deleteAttribute("morphTarget"+b),h&&u.hasAttribute("morphNormal"+b)===!0&&u.deleteAttribute("morphNormal"+b),a[b]=0)}const M=u.morphTargetsRelative?1:1-m;d.getUniforms().setValue(n,"morphTargetBaseInfluence",M),d.getUniforms().setValue(n,"morphTargetInfluences",a)}}return{update:l}}function rw(n,e,t,i){let a=new WeakMap;function r(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(a.get(d)!==c&&(e.update(d),a.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),a.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),a.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;a.get(p)!==c&&(p.update(),a.set(p,c))}return d}function s(){a=new WeakMap}function o(l){const c=l.target;c.removeEventListener("dispose",o),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:r,dispose:s}}const em=new Dn,tm=new Gp,nm=new jy,im=new Jp,Af=[],Tf=[],Rf=new Float32Array(16),Cf=new Float32Array(9),Pf=new Float32Array(4);function fs(n,e,t){const i=n[0];if(i<=0||i>0)return n;const a=e*t;let r=Af[a];if(r===void 0&&(r=new Float32Array(a),Af[a]=r),e!==0){i.toArray(r,0);for(let s=1,o=0;s!==e;++s)o+=t,n[s].toArray(r,o)}return r}function dn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function fn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Pl(n,e){let t=Tf[e];t===void 0&&(t=new Int32Array(e),Tf[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function sw(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function ow(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dn(t,e))return;n.uniform2fv(this.addr,e),fn(t,e)}}function lw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(dn(t,e))return;n.uniform3fv(this.addr,e),fn(t,e)}}function cw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dn(t,e))return;n.uniform4fv(this.addr,e),fn(t,e)}}function uw(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(dn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),fn(t,e)}else{if(dn(t,i))return;Pf.set(i),n.uniformMatrix2fv(this.addr,!1,Pf),fn(t,i)}}function dw(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(dn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),fn(t,e)}else{if(dn(t,i))return;Cf.set(i),n.uniformMatrix3fv(this.addr,!1,Cf),fn(t,i)}}function fw(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(dn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),fn(t,e)}else{if(dn(t,i))return;Rf.set(i),n.uniformMatrix4fv(this.addr,!1,Rf),fn(t,i)}}function hw(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function pw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dn(t,e))return;n.uniform2iv(this.addr,e),fn(t,e)}}function mw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(dn(t,e))return;n.uniform3iv(this.addr,e),fn(t,e)}}function gw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dn(t,e))return;n.uniform4iv(this.addr,e),fn(t,e)}}function vw(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function _w(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(dn(t,e))return;n.uniform2uiv(this.addr,e),fn(t,e)}}function bw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(dn(t,e))return;n.uniform3uiv(this.addr,e),fn(t,e)}}function xw(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(dn(t,e))return;n.uniform4uiv(this.addr,e),fn(t,e)}}function yw(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture2D(e||em,a)}function Sw(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture3D(e||nm,a)}function Mw(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTextureCube(e||im,a)}function Ew(n,e,t){const i=this.cache,a=t.allocateTextureUnit();i[0]!==a&&(n.uniform1i(this.addr,a),i[0]=a),t.setTexture2DArray(e||tm,a)}function ww(n){switch(n){case 5126:return sw;case 35664:return ow;case 35665:return lw;case 35666:return cw;case 35674:return uw;case 35675:return dw;case 35676:return fw;case 5124:case 35670:return hw;case 35667:case 35671:return pw;case 35668:case 35672:return mw;case 35669:case 35673:return gw;case 5125:return vw;case 36294:return _w;case 36295:return bw;case 36296:return xw;case 35678:case 36198:case 36298:case 36306:case 35682:return yw;case 35679:case 36299:case 36307:return Sw;case 35680:case 36300:case 36308:case 36293:return Mw;case 36289:case 36303:case 36311:case 36292:return Ew}}function Aw(n,e){n.uniform1fv(this.addr,e)}function Tw(n,e){const t=fs(e,this.size,2);n.uniform2fv(this.addr,t)}function Rw(n,e){const t=fs(e,this.size,3);n.uniform3fv(this.addr,t)}function Cw(n,e){const t=fs(e,this.size,4);n.uniform4fv(this.addr,t)}function Pw(n,e){const t=fs(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Lw(n,e){const t=fs(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Dw(n,e){const t=fs(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function kw(n,e){n.uniform1iv(this.addr,e)}function Uw(n,e){n.uniform2iv(this.addr,e)}function Iw(n,e){n.uniform3iv(this.addr,e)}function Nw(n,e){n.uniform4iv(this.addr,e)}function Ow(n,e){n.uniform1uiv(this.addr,e)}function Fw(n,e){n.uniform2uiv(this.addr,e)}function Bw(n,e){n.uniform3uiv(this.addr,e)}function zw(n,e){n.uniform4uiv(this.addr,e)}function Gw(n,e,t){const i=this.cache,a=e.length,r=Pl(t,a);dn(i,r)||(n.uniform1iv(this.addr,r),fn(i,r));for(let s=0;s!==a;++s)t.setTexture2D(e[s]||em,r[s])}function Hw(n,e,t){const i=this.cache,a=e.length,r=Pl(t,a);dn(i,r)||(n.uniform1iv(this.addr,r),fn(i,r));for(let s=0;s!==a;++s)t.setTexture3D(e[s]||nm,r[s])}function Vw(n,e,t){const i=this.cache,a=e.length,r=Pl(t,a);dn(i,r)||(n.uniform1iv(this.addr,r),fn(i,r));for(let s=0;s!==a;++s)t.setTextureCube(e[s]||im,r[s])}function Ww(n,e,t){const i=this.cache,a=e.length,r=Pl(t,a);dn(i,r)||(n.uniform1iv(this.addr,r),fn(i,r));for(let s=0;s!==a;++s)t.setTexture2DArray(e[s]||tm,r[s])}function $w(n){switch(n){case 5126:return Aw;case 35664:return Tw;case 35665:return Rw;case 35666:return Cw;case 35674:return Pw;case 35675:return Lw;case 35676:return Dw;case 5124:case 35670:return kw;case 35667:case 35671:return Uw;case 35668:case 35672:return Iw;case 35669:case 35673:return Nw;case 5125:return Ow;case 36294:return Fw;case 36295:return Bw;case 36296:return zw;case 35678:case 36198:case 36298:case 36306:case 35682:return Gw;case 35679:case 36299:case 36307:return Hw;case 35680:case 36300:case 36308:case 36293:return Vw;case 36289:case 36303:case 36311:case 36292:return Ww}}class jw{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=ww(t.type)}}class Xw{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=$w(t.type)}}class qw{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const a=this.seq;for(let r=0,s=a.length;r!==s;++r){const o=a[r];o.setValue(e,t[o.id],i)}}}const Sc=/(\w+)(\])?(\[|\.)?/g;function Lf(n,e){n.seq.push(e),n.map[e.id]=e}function Yw(n,e,t){const i=n.name,a=i.length;for(Sc.lastIndex=0;;){const r=Sc.exec(i),s=Sc.lastIndex;let o=r[1];const l=r[2]==="]",c=r[3];if(l&&(o=o|0),c===void 0||c==="["&&s+2===a){Lf(t,c===void 0?new jw(o,n,e):new Xw(o,n,e));break}else{let d=t.map[o];d===void 0&&(d=new qw(o),Lf(t,d)),t=d}}}class qo{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let a=0;a<i;++a){const r=e.getActiveUniform(t,a),s=e.getUniformLocation(t,r.name);Yw(r,s,this)}}setValue(e,t,i,a){const r=this.map[t];r!==void 0&&r.setValue(e,i,a)}setOptional(e,t,i){const a=t[i];a!==void 0&&this.setValue(e,i,a)}static upload(e,t,i,a){for(let r=0,s=t.length;r!==s;++r){const o=t[r],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,a)}}static seqWithValue(e,t){const i=[];for(let a=0,r=e.length;a!==r;++a){const s=e[a];s.id in t&&i.push(s)}return i}}function Df(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Kw=0;function Jw(n,e){const t=n.split(`
`),i=[],a=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let s=a;s<r;s++){const o=s+1;i.push(`${o===e?">":" "} ${o}: ${t[s]}`)}return i.join(`
`)}function Zw(n){switch(n){case Hi:return["Linear","( value )"];case Nt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function kf(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),a=n.getShaderInfoLog(e).trim();if(i&&a==="")return"";const r=/ERROR: 0:(\d+)/.exec(a);if(r){const s=parseInt(r[1]);return t.toUpperCase()+`

`+a+`

`+Jw(n.getShaderSource(e),s)}else return a}function Qw(n,e){const t=Zw(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function eA(n,e){let t;switch(e){case oy:t="Linear";break;case ly:t="Reinhard";break;case cy:t="OptimizedCineon";break;case uy:t="ACESFilmic";break;case dy:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function tA(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ls).join(`
`)}function nA(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function iA(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let a=0;a<i;a++){const r=n.getActiveAttrib(e,a),s=r.name;let o=1;r.type===n.FLOAT_MAT2&&(o=2),r.type===n.FLOAT_MAT3&&(o=3),r.type===n.FLOAT_MAT4&&(o=4),t[s]={type:r.type,location:n.getAttribLocation(e,s),locationSize:o}}return t}function Ls(n){return n!==""}function Uf(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function If(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const aA=/^[ \t]*#include +<([\w\d./]+)>/gm;function Zc(n){return n.replace(aA,sA)}const rA=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function sA(n,e){let t=rt[e];if(t===void 0){const i=rA.get(e);if(i!==void 0)t=rt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Zc(t)}const oA=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Nf(n){return n.replace(oA,lA)}function lA(n,e,t,i){let a="";for(let r=parseInt(e);r<parseInt(t);r++)a+=i.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return a}function Of(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cA(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===wp?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Bx?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ea&&(e="SHADOWMAP_TYPE_VSM"),e}function uA(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case es:case ts:e="ENVMAP_TYPE_CUBE";break;case Tl:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dA(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ts:e="ENVMAP_MODE_REFRACTION";break}return e}function fA(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Rp:e="ENVMAP_BLENDING_MULTIPLY";break;case ry:e="ENVMAP_BLENDING_MIX";break;case sy:e="ENVMAP_BLENDING_ADD";break}return e}function hA(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}function pA(n,e,t,i){const a=n.getContext(),r=t.defines;let s=t.vertexShader,o=t.fragmentShader;const l=cA(t),c=uA(t),u=dA(t),d=fA(t),p=hA(t),g=t.isWebGL2?"":tA(t),f=nA(r),v=a.createProgram();let h,m,M=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(h=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f].filter(Ls).join(`
`),h.length>0&&(h+=`
`),m=[g,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f].filter(Ls).join(`
`),m.length>0&&(m+=`
`)):(h=[Of(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ls).join(`
`),m=[g,Of(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Pa?"#define TONE_MAPPING":"",t.toneMapping!==Pa?rt.tonemapping_pars_fragment:"",t.toneMapping!==Pa?eA("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",rt.colorspace_pars_fragment,Qw("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ls).join(`
`)),s=Zc(s),s=Uf(s,t),s=If(s,t),o=Zc(o),o=Uf(o,t),o=If(o,t),s=Nf(s),o=Nf(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(M=`#version 300 es
`,h=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+h,m=["#define varying in",t.glslVersion===nf?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===nf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const b=M+h+s,w=M+m+o,R=Df(a,a.VERTEX_SHADER,b),P=Df(a,a.FRAGMENT_SHADER,w);if(a.attachShader(v,R),a.attachShader(v,P),t.index0AttributeName!==void 0?a.bindAttribLocation(v,0,t.index0AttributeName):t.morphTargets===!0&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),n.debug.checkShaderErrors){const x=a.getProgramInfoLog(v).trim(),E=a.getShaderInfoLog(R).trim(),W=a.getShaderInfoLog(P).trim();let q=!0,D=!0;if(a.getProgramParameter(v,a.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(a,v,R,P);else{const I=kf(a,R,"vertex"),F=kf(a,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(v,a.VALIDATE_STATUS)+`

Program Info Log: `+x+`
`+I+`
`+F)}else x!==""?console.warn("THREE.WebGLProgram: Program Info Log:",x):(E===""||W==="")&&(D=!1);D&&(this.diagnostics={runnable:q,programLog:x,vertexShader:{log:E,prefix:h},fragmentShader:{log:W,prefix:m}})}a.deleteShader(R),a.deleteShader(P);let A;this.getUniforms=function(){return A===void 0&&(A=new qo(a,v)),A};let G;return this.getAttributes=function(){return G===void 0&&(G=iA(a,v)),G},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(v),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Kw++,this.cacheKey=e,this.usedTimes=1,this.program=v,this.vertexShader=R,this.fragmentShader=P,this}let mA=0;class gA{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,a=this._getShaderStage(t),r=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(a)===!1&&(s.add(a),a.usedTimes++),s.has(r)===!1&&(s.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new vA(e),t.set(e,i)),i}}class vA{constructor(e){this.id=mA++,this.code=e,this.usedTimes=0}}function _A(n,e,t,i,a,r,s){const o=new Vp,l=new gA,c=[],u=a.isWebGL2,d=a.logarithmicDepthBuffer,p=a.vertexTextures;let g=a.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(x){return x===0?"uv":`uv${x}`}function h(x,E,W,q,D){const I=q.fog,F=D.geometry,J=x.isMeshStandardMaterial?q.environment:null,O=(x.isMeshStandardMaterial?t:e).get(x.envMap||J),j=O&&O.mapping===Tl?O.image.height:null,ne=f[x.type];x.precision!==null&&(g=a.getMaxPrecision(x.precision),g!==x.precision&&console.warn("THREE.WebGLProgram.getParameters:",x.precision,"not supported, using",g,"instead."));const re=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,B=re!==void 0?re.length:0;let Z=0;F.morphAttributes.position!==void 0&&(Z=1),F.morphAttributes.normal!==void 0&&(Z=2),F.morphAttributes.color!==void 0&&(Z=3);let de,me,be,Re;if(ne){const Qe=Ni[ne];de=Qe.vertexShader,me=Qe.fragmentShader}else de=x.vertexShader,me=x.fragmentShader,l.update(x),be=l.getVertexShaderID(x),Re=l.getFragmentShaderID(x);const Ce=n.getRenderTarget(),_e=D.isInstancedMesh===!0,Ie=!!x.map,ct=!!x.matcap,ze=!!O,z=!!x.aoMap,Be=!!x.lightMap,Ee=!!x.bumpMap,Ue=!!x.normalMap,Fe=!!x.displacementMap,lt=!!x.emissiveMap,ye=!!x.metalnessMap,we=!!x.roughnessMap,Ge=x.anisotropy>0,ut=x.clearcoat>0,Pe=x.iridescence>0,C=x.sheen>0,y=x.transmission>0,H=Ge&&!!x.anisotropyMap,ce=ut&&!!x.clearcoatMap,ue=ut&&!!x.clearcoatNormalMap,ge=ut&&!!x.clearcoatRoughnessMap,ke=Pe&&!!x.iridescenceMap,xe=Pe&&!!x.iridescenceThicknessMap,te=C&&!!x.sheenColorMap,L=C&&!!x.sheenRoughnessMap,$=!!x.specularMap,oe=!!x.specularColorMap,se=!!x.specularIntensityMap,le=y&&!!x.transmissionMap,Le=y&&!!x.thicknessMap,Ne=!!x.gradientMap,k=!!x.alphaMap,pe=x.alphaTest>0,Q=!!x.alphaHash,fe=!!x.extensions,ve=!!F.attributes.uv1,We=!!F.attributes.uv2,Ke=!!F.attributes.uv3;let Ye=Pa;return x.toneMapped&&(Ce===null||Ce.isXRRenderTarget===!0)&&(Ye=n.toneMapping),{isWebGL2:u,shaderID:ne,shaderType:x.type,shaderName:x.name,vertexShader:de,fragmentShader:me,defines:x.defines,customVertexShaderID:be,customFragmentShaderID:Re,isRawShaderMaterial:x.isRawShaderMaterial===!0,glslVersion:x.glslVersion,precision:g,instancing:_e,instancingColor:_e&&D.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:Ce===null?n.outputColorSpace:Ce.isXRRenderTarget===!0?Ce.texture.colorSpace:Hi,map:Ie,matcap:ct,envMap:ze,envMapMode:ze&&O.mapping,envMapCubeUVHeight:j,aoMap:z,lightMap:Be,bumpMap:Ee,normalMap:Ue,displacementMap:p&&Fe,emissiveMap:lt,normalMapObjectSpace:Ue&&x.normalMapType===Ey,normalMapTangentSpace:Ue&&x.normalMapType===Op,metalnessMap:ye,roughnessMap:we,anisotropy:Ge,anisotropyMap:H,clearcoat:ut,clearcoatMap:ce,clearcoatNormalMap:ue,clearcoatRoughnessMap:ge,iridescence:Pe,iridescenceMap:ke,iridescenceThicknessMap:xe,sheen:C,sheenColorMap:te,sheenRoughnessMap:L,specularMap:$,specularColorMap:oe,specularIntensityMap:se,transmission:y,transmissionMap:le,thicknessMap:Le,gradientMap:Ne,opaque:x.transparent===!1&&x.blending===jr,alphaMap:k,alphaTest:pe,alphaHash:Q,combine:x.combine,mapUv:Ie&&v(x.map.channel),aoMapUv:z&&v(x.aoMap.channel),lightMapUv:Be&&v(x.lightMap.channel),bumpMapUv:Ee&&v(x.bumpMap.channel),normalMapUv:Ue&&v(x.normalMap.channel),displacementMapUv:Fe&&v(x.displacementMap.channel),emissiveMapUv:lt&&v(x.emissiveMap.channel),metalnessMapUv:ye&&v(x.metalnessMap.channel),roughnessMapUv:we&&v(x.roughnessMap.channel),anisotropyMapUv:H&&v(x.anisotropyMap.channel),clearcoatMapUv:ce&&v(x.clearcoatMap.channel),clearcoatNormalMapUv:ue&&v(x.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ge&&v(x.clearcoatRoughnessMap.channel),iridescenceMapUv:ke&&v(x.iridescenceMap.channel),iridescenceThicknessMapUv:xe&&v(x.iridescenceThicknessMap.channel),sheenColorMapUv:te&&v(x.sheenColorMap.channel),sheenRoughnessMapUv:L&&v(x.sheenRoughnessMap.channel),specularMapUv:$&&v(x.specularMap.channel),specularColorMapUv:oe&&v(x.specularColorMap.channel),specularIntensityMapUv:se&&v(x.specularIntensityMap.channel),transmissionMapUv:le&&v(x.transmissionMap.channel),thicknessMapUv:Le&&v(x.thicknessMap.channel),alphaMapUv:k&&v(x.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(Ue||Ge),vertexColors:x.vertexColors,vertexAlphas:x.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,vertexUv1s:ve,vertexUv2s:We,vertexUv3s:Ke,pointsUvs:D.isPoints===!0&&!!F.attributes.uv&&(Ie||k),fog:!!I,useFog:x.fog===!0,fogExp2:I&&I.isFogExp2,flatShading:x.flatShading===!0,sizeAttenuation:x.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:D.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:B,morphTextureStride:Z,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:x.dithering,shadowMapEnabled:n.shadowMap.enabled&&W.length>0,shadowMapType:n.shadowMap.type,toneMapping:Ye,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ie&&x.map.isVideoTexture===!0&&x.map.colorSpace===Nt,premultipliedAlpha:x.premultipliedAlpha,doubleSided:x.side===fi,flipSided:x.side===qn,useDepthPacking:x.depthPacking>=0,depthPacking:x.depthPacking||0,index0AttributeName:x.index0AttributeName,extensionDerivatives:fe&&x.extensions.derivatives===!0,extensionFragDepth:fe&&x.extensions.fragDepth===!0,extensionDrawBuffers:fe&&x.extensions.drawBuffers===!0,extensionShaderTextureLOD:fe&&x.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:x.customProgramCacheKey()}}function m(x){const E=[];if(x.shaderID?E.push(x.shaderID):(E.push(x.customVertexShaderID),E.push(x.customFragmentShaderID)),x.defines!==void 0)for(const W in x.defines)E.push(W),E.push(x.defines[W]);return x.isRawShaderMaterial===!1&&(M(E,x),b(E,x),E.push(n.outputColorSpace)),E.push(x.customProgramCacheKey),E.join()}function M(x,E){x.push(E.precision),x.push(E.outputColorSpace),x.push(E.envMapMode),x.push(E.envMapCubeUVHeight),x.push(E.mapUv),x.push(E.alphaMapUv),x.push(E.lightMapUv),x.push(E.aoMapUv),x.push(E.bumpMapUv),x.push(E.normalMapUv),x.push(E.displacementMapUv),x.push(E.emissiveMapUv),x.push(E.metalnessMapUv),x.push(E.roughnessMapUv),x.push(E.anisotropyMapUv),x.push(E.clearcoatMapUv),x.push(E.clearcoatNormalMapUv),x.push(E.clearcoatRoughnessMapUv),x.push(E.iridescenceMapUv),x.push(E.iridescenceThicknessMapUv),x.push(E.sheenColorMapUv),x.push(E.sheenRoughnessMapUv),x.push(E.specularMapUv),x.push(E.specularColorMapUv),x.push(E.specularIntensityMapUv),x.push(E.transmissionMapUv),x.push(E.thicknessMapUv),x.push(E.combine),x.push(E.fogExp2),x.push(E.sizeAttenuation),x.push(E.morphTargetsCount),x.push(E.morphAttributeCount),x.push(E.numDirLights),x.push(E.numPointLights),x.push(E.numSpotLights),x.push(E.numSpotLightMaps),x.push(E.numHemiLights),x.push(E.numRectAreaLights),x.push(E.numDirLightShadows),x.push(E.numPointLightShadows),x.push(E.numSpotLightShadows),x.push(E.numSpotLightShadowsWithMaps),x.push(E.shadowMapType),x.push(E.toneMapping),x.push(E.numClippingPlanes),x.push(E.numClipIntersection),x.push(E.depthPacking)}function b(x,E){o.disableAll(),E.isWebGL2&&o.enable(0),E.supportsVertexTextures&&o.enable(1),E.instancing&&o.enable(2),E.instancingColor&&o.enable(3),E.matcap&&o.enable(4),E.envMap&&o.enable(5),E.normalMapObjectSpace&&o.enable(6),E.normalMapTangentSpace&&o.enable(7),E.clearcoat&&o.enable(8),E.iridescence&&o.enable(9),E.alphaTest&&o.enable(10),E.vertexColors&&o.enable(11),E.vertexAlphas&&o.enable(12),E.vertexUv1s&&o.enable(13),E.vertexUv2s&&o.enable(14),E.vertexUv3s&&o.enable(15),E.vertexTangents&&o.enable(16),E.anisotropy&&o.enable(17),x.push(o.mask),o.disableAll(),E.fog&&o.enable(0),E.useFog&&o.enable(1),E.flatShading&&o.enable(2),E.logarithmicDepthBuffer&&o.enable(3),E.skinning&&o.enable(4),E.morphTargets&&o.enable(5),E.morphNormals&&o.enable(6),E.morphColors&&o.enable(7),E.premultipliedAlpha&&o.enable(8),E.shadowMapEnabled&&o.enable(9),E.useLegacyLights&&o.enable(10),E.doubleSided&&o.enable(11),E.flipSided&&o.enable(12),E.useDepthPacking&&o.enable(13),E.dithering&&o.enable(14),E.transmission&&o.enable(15),E.sheen&&o.enable(16),E.opaque&&o.enable(17),E.pointsUvs&&o.enable(18),E.decodeVideoTexture&&o.enable(19),x.push(o.mask)}function w(x){const E=f[x.type];let W;if(E){const q=Ni[E];W=Yp.clone(q.uniforms)}else W=x.uniforms;return W}function R(x,E){let W;for(let q=0,D=c.length;q<D;q++){const I=c[q];if(I.cacheKey===E){W=I,++W.usedTimes;break}}return W===void 0&&(W=new pA(n,E,x,r),c.push(W)),W}function P(x){if(--x.usedTimes===0){const E=c.indexOf(x);c[E]=c[c.length-1],c.pop(),x.destroy()}}function A(x){l.remove(x)}function G(){l.dispose()}return{getParameters:h,getProgramCacheKey:m,getUniforms:w,acquireProgram:R,releaseProgram:P,releaseShaderCache:A,programs:c,dispose:G}}function bA(){let n=new WeakMap;function e(r){let s=n.get(r);return s===void 0&&(s={},n.set(r,s)),s}function t(r){n.delete(r)}function i(r,s,o){n.get(r)[s]=o}function a(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:a}}function xA(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function Ff(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function Bf(){const n=[];let e=0;const t=[],i=[],a=[];function r(){e=0,t.length=0,i.length=0,a.length=0}function s(d,p,g,f,v,h){let m=n[e];return m===void 0?(m={id:d.id,object:d,geometry:p,material:g,groupOrder:f,renderOrder:d.renderOrder,z:v,group:h},n[e]=m):(m.id=d.id,m.object=d,m.geometry=p,m.material=g,m.groupOrder=f,m.renderOrder=d.renderOrder,m.z=v,m.group=h),e++,m}function o(d,p,g,f,v,h){const m=s(d,p,g,f,v,h);g.transmission>0?i.push(m):g.transparent===!0?a.push(m):t.push(m)}function l(d,p,g,f,v,h){const m=s(d,p,g,f,v,h);g.transmission>0?i.unshift(m):g.transparent===!0?a.unshift(m):t.unshift(m)}function c(d,p){t.length>1&&t.sort(d||xA),i.length>1&&i.sort(p||Ff),a.length>1&&a.sort(p||Ff)}function u(){for(let d=e,p=n.length;d<p;d++){const g=n[d];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:a,init:r,push:o,unshift:l,finish:u,sort:c}}function yA(){let n=new WeakMap;function e(i,a){const r=n.get(i);let s;return r===void 0?(s=new Bf,n.set(i,[s])):a>=r.length?(s=new Bf,r.push(s)):s=r[a],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function SA(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new X,color:new bt};break;case"SpotLight":t={position:new X,direction:new X,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new X,color:new bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new X,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":t={color:new bt,position:new X,halfWidth:new X,halfHeight:new X};break}return n[e.id]=t,t}}}function MA(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new He,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let EA=0;function wA(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function AA(n,e){const t=new SA,i=MA(),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let u=0;u<9;u++)a.probe.push(new X);const r=new X,s=new Xt,o=new Xt;function l(u,d){let p=0,g=0,f=0;for(let W=0;W<9;W++)a.probe[W].set(0,0,0);let v=0,h=0,m=0,M=0,b=0,w=0,R=0,P=0,A=0,G=0;u.sort(wA);const x=d===!0?Math.PI:1;for(let W=0,q=u.length;W<q;W++){const D=u[W],I=D.color,F=D.intensity,J=D.distance,O=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)p+=I.r*F*x,g+=I.g*F*x,f+=I.b*F*x;else if(D.isLightProbe)for(let j=0;j<9;j++)a.probe[j].addScaledVector(D.sh.coefficients[j],F);else if(D.isDirectionalLight){const j=t.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity*x),D.castShadow){const ne=D.shadow,re=i.get(D);re.shadowBias=ne.bias,re.shadowNormalBias=ne.normalBias,re.shadowRadius=ne.radius,re.shadowMapSize=ne.mapSize,a.directionalShadow[v]=re,a.directionalShadowMap[v]=O,a.directionalShadowMatrix[v]=D.shadow.matrix,w++}a.directional[v]=j,v++}else if(D.isSpotLight){const j=t.get(D);j.position.setFromMatrixPosition(D.matrixWorld),j.color.copy(I).multiplyScalar(F*x),j.distance=J,j.coneCos=Math.cos(D.angle),j.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),j.decay=D.decay,a.spot[m]=j;const ne=D.shadow;if(D.map&&(a.spotLightMap[A]=D.map,A++,ne.updateMatrices(D),D.castShadow&&G++),a.spotLightMatrix[m]=ne.matrix,D.castShadow){const re=i.get(D);re.shadowBias=ne.bias,re.shadowNormalBias=ne.normalBias,re.shadowRadius=ne.radius,re.shadowMapSize=ne.mapSize,a.spotShadow[m]=re,a.spotShadowMap[m]=O,P++}m++}else if(D.isRectAreaLight){const j=t.get(D);j.color.copy(I).multiplyScalar(F),j.halfWidth.set(D.width*.5,0,0),j.halfHeight.set(0,D.height*.5,0),a.rectArea[M]=j,M++}else if(D.isPointLight){const j=t.get(D);if(j.color.copy(D.color).multiplyScalar(D.intensity*x),j.distance=D.distance,j.decay=D.decay,D.castShadow){const ne=D.shadow,re=i.get(D);re.shadowBias=ne.bias,re.shadowNormalBias=ne.normalBias,re.shadowRadius=ne.radius,re.shadowMapSize=ne.mapSize,re.shadowCameraNear=ne.camera.near,re.shadowCameraFar=ne.camera.far,a.pointShadow[h]=re,a.pointShadowMap[h]=O,a.pointShadowMatrix[h]=D.shadow.matrix,R++}a.point[h]=j,h++}else if(D.isHemisphereLight){const j=t.get(D);j.skyColor.copy(D.color).multiplyScalar(F*x),j.groundColor.copy(D.groundColor).multiplyScalar(F*x),a.hemi[b]=j,b++}}M>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(a.rectAreaLTC1=Ae.LTC_FLOAT_1,a.rectAreaLTC2=Ae.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(a.rectAreaLTC1=Ae.LTC_HALF_1,a.rectAreaLTC2=Ae.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=p,a.ambient[1]=g,a.ambient[2]=f;const E=a.hash;(E.directionalLength!==v||E.pointLength!==h||E.spotLength!==m||E.rectAreaLength!==M||E.hemiLength!==b||E.numDirectionalShadows!==w||E.numPointShadows!==R||E.numSpotShadows!==P||E.numSpotMaps!==A)&&(a.directional.length=v,a.spot.length=m,a.rectArea.length=M,a.point.length=h,a.hemi.length=b,a.directionalShadow.length=w,a.directionalShadowMap.length=w,a.pointShadow.length=R,a.pointShadowMap.length=R,a.spotShadow.length=P,a.spotShadowMap.length=P,a.directionalShadowMatrix.length=w,a.pointShadowMatrix.length=R,a.spotLightMatrix.length=P+A-G,a.spotLightMap.length=A,a.numSpotLightShadowsWithMaps=G,E.directionalLength=v,E.pointLength=h,E.spotLength=m,E.rectAreaLength=M,E.hemiLength=b,E.numDirectionalShadows=w,E.numPointShadows=R,E.numSpotShadows=P,E.numSpotMaps=A,a.version=EA++)}function c(u,d){let p=0,g=0,f=0,v=0,h=0;const m=d.matrixWorldInverse;for(let M=0,b=u.length;M<b;M++){const w=u[M];if(w.isDirectionalLight){const R=a.directional[p];R.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(m),p++}else if(w.isSpotLight){const R=a.spot[f];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(m),R.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(r),R.direction.transformDirection(m),f++}else if(w.isRectAreaLight){const R=a.rectArea[v];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(m),o.identity(),s.copy(w.matrixWorld),s.premultiply(m),o.extractRotation(s),R.halfWidth.set(w.width*.5,0,0),R.halfHeight.set(0,w.height*.5,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const R=a.point[g];R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(m),g++}else if(w.isHemisphereLight){const R=a.hemi[h];R.direction.setFromMatrixPosition(w.matrixWorld),R.direction.transformDirection(m),h++}}}return{setup:l,setupView:c,state:a}}function zf(n,e){const t=new AA(n,e),i=[],a=[];function r(){i.length=0,a.length=0}function s(d){i.push(d)}function o(d){a.push(d)}function l(d){t.setup(i,d)}function c(d){t.setupView(i,d)}return{init:r,state:{lightsArray:i,shadowsArray:a,lights:t},setupLights:l,setupLightsView:c,pushLight:s,pushShadow:o}}function TA(n,e){let t=new WeakMap;function i(r,s=0){const o=t.get(r);let l;return o===void 0?(l=new zf(n,e),t.set(r,[l])):s>=o.length?(l=new zf(n,e),o.push(l)):l=o[s],l}function a(){t=new WeakMap}return{get:i,dispose:a}}class RA extends ds{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Sy,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class CA extends ds{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const PA=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,LA=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function DA(n,e,t){let i=new Ou;const a=new He,r=new He,s=new Ft,o=new RA({depthPacking:My}),l=new CA,c={},u=t.maxTextureSize,d={[Gi]:qn,[qn]:Gi,[fi]:fi},p=new ua({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new He},radius:{value:4}},vertexShader:PA,fragmentShader:LA}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const f=new ha;f.setAttribute("position",new Ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Lt(f,p),h=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wp;let m=this.type;this.render=function(R,P,A){if(h.enabled===!1||h.autoUpdate===!1&&h.needsUpdate===!1||R.length===0)return;const G=n.getRenderTarget(),x=n.getActiveCubeFace(),E=n.getActiveMipmapLevel(),W=n.state;W.setBlending(sa),W.buffers.color.setClear(1,1,1,1),W.buffers.depth.setTest(!0),W.setScissorTest(!1);const q=m!==ea&&this.type===ea,D=m===ea&&this.type!==ea;for(let I=0,F=R.length;I<F;I++){const J=R[I],O=J.shadow;if(O===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(O.autoUpdate===!1&&O.needsUpdate===!1)continue;a.copy(O.mapSize);const j=O.getFrameExtents();if(a.multiply(j),r.copy(O.mapSize),(a.x>u||a.y>u)&&(a.x>u&&(r.x=Math.floor(u/j.x),a.x=r.x*j.x,O.mapSize.x=r.x),a.y>u&&(r.y=Math.floor(u/j.y),a.y=r.y*j.y,O.mapSize.y=r.y)),O.map===null||q===!0||D===!0){const re=this.type!==ea?{minFilter:zt,magFilter:zt}:{};O.map!==null&&O.map.dispose(),O.map=new ca(a.x,a.y,re),O.map.texture.name=J.name+".shadowMap",O.camera.updateProjectionMatrix()}n.setRenderTarget(O.map),n.clear();const ne=O.getViewportCount();for(let re=0;re<ne;re++){const B=O.getViewport(re);s.set(r.x*B.x,r.y*B.y,r.x*B.z,r.y*B.w),W.viewport(s),O.updateMatrices(J,re),i=O.getFrustum(),w(P,A,O.camera,J,this.type)}O.isPointLightShadow!==!0&&this.type===ea&&M(O,A),O.needsUpdate=!1}m=this.type,h.needsUpdate=!1,n.setRenderTarget(G,x,E)};function M(R,P){const A=e.update(v);p.defines.VSM_SAMPLES!==R.blurSamples&&(p.defines.VSM_SAMPLES=R.blurSamples,g.defines.VSM_SAMPLES=R.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new ca(a.x,a.y)),p.uniforms.shadow_pass.value=R.map.texture,p.uniforms.resolution.value=R.mapSize,p.uniforms.radius.value=R.radius,n.setRenderTarget(R.mapPass),n.clear(),n.renderBufferDirect(P,null,A,p,v,null),g.uniforms.shadow_pass.value=R.mapPass.texture,g.uniforms.resolution.value=R.mapSize,g.uniforms.radius.value=R.radius,n.setRenderTarget(R.map),n.clear(),n.renderBufferDirect(P,null,A,g,v,null)}function b(R,P,A,G){let x=null;const E=A.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(E!==void 0)x=E;else if(x=A.isPointLight===!0?l:o,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const W=x.uuid,q=P.uuid;let D=c[W];D===void 0&&(D={},c[W]=D);let I=D[q];I===void 0&&(I=x.clone(),D[q]=I),x=I}if(x.visible=P.visible,x.wireframe=P.wireframe,G===ea?x.side=P.shadowSide!==null?P.shadowSide:P.side:x.side=P.shadowSide!==null?P.shadowSide:d[P.side],x.alphaMap=P.alphaMap,x.alphaTest=P.alphaTest,x.map=P.map,x.clipShadows=P.clipShadows,x.clippingPlanes=P.clippingPlanes,x.clipIntersection=P.clipIntersection,x.displacementMap=P.displacementMap,x.displacementScale=P.displacementScale,x.displacementBias=P.displacementBias,x.wireframeLinewidth=P.wireframeLinewidth,x.linewidth=P.linewidth,A.isPointLight===!0&&x.isMeshDistanceMaterial===!0){const W=n.properties.get(x);W.light=A}return x}function w(R,P,A,G,x){if(R.visible===!1)return;if(R.layers.test(P.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&x===ea)&&(!R.frustumCulled||i.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(A.matrixWorldInverse,R.matrixWorld);const q=e.update(R),D=R.material;if(Array.isArray(D)){const I=q.groups;for(let F=0,J=I.length;F<J;F++){const O=I[F],j=D[O.materialIndex];if(j&&j.visible){const ne=b(R,j,G,x);n.renderBufferDirect(A,null,q,ne,R,O)}}}else if(D.visible){const I=b(R,D,G,x);n.renderBufferDirect(A,null,q,I,R,null)}}const W=R.children;for(let q=0,D=W.length;q<D;q++)w(W[q],P,A,G,x)}}function kA(n,e,t){const i=t.isWebGL2;function a(){let k=!1;const pe=new Ft;let Q=null;const fe=new Ft(0,0,0,0);return{setMask:function(ve){Q!==ve&&!k&&(n.colorMask(ve,ve,ve,ve),Q=ve)},setLocked:function(ve){k=ve},setClear:function(ve,We,Ke,Ye,mt){mt===!0&&(ve*=Ye,We*=Ye,Ke*=Ye),pe.set(ve,We,Ke,Ye),fe.equals(pe)===!1&&(n.clearColor(ve,We,Ke,Ye),fe.copy(pe))},reset:function(){k=!1,Q=null,fe.set(-1,0,0,0)}}}function r(){let k=!1,pe=null,Q=null,fe=null;return{setTest:function(ve){ve?Ce(n.DEPTH_TEST):_e(n.DEPTH_TEST)},setMask:function(ve){pe!==ve&&!k&&(n.depthMask(ve),pe=ve)},setFunc:function(ve){if(Q!==ve){switch(ve){case Zx:n.depthFunc(n.NEVER);break;case Qx:n.depthFunc(n.ALWAYS);break;case ey:n.depthFunc(n.LESS);break;case Wc:n.depthFunc(n.LEQUAL);break;case ty:n.depthFunc(n.EQUAL);break;case ny:n.depthFunc(n.GEQUAL);break;case iy:n.depthFunc(n.GREATER);break;case ay:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Q=ve}},setLocked:function(ve){k=ve},setClear:function(ve){fe!==ve&&(n.clearDepth(ve),fe=ve)},reset:function(){k=!1,pe=null,Q=null,fe=null}}}function s(){let k=!1,pe=null,Q=null,fe=null,ve=null,We=null,Ke=null,Ye=null,mt=null;return{setTest:function(Qe){k||(Qe?Ce(n.STENCIL_TEST):_e(n.STENCIL_TEST))},setMask:function(Qe){pe!==Qe&&!k&&(n.stencilMask(Qe),pe=Qe)},setFunc:function(Qe,kt,xt){(Q!==Qe||fe!==kt||ve!==xt)&&(n.stencilFunc(Qe,kt,xt),Q=Qe,fe=kt,ve=xt)},setOp:function(Qe,kt,xt){(We!==Qe||Ke!==kt||Ye!==xt)&&(n.stencilOp(Qe,kt,xt),We=Qe,Ke=kt,Ye=xt)},setLocked:function(Qe){k=Qe},setClear:function(Qe){mt!==Qe&&(n.clearStencil(Qe),mt=Qe)},reset:function(){k=!1,pe=null,Q=null,fe=null,ve=null,We=null,Ke=null,Ye=null,mt=null}}}const o=new a,l=new r,c=new s,u=new WeakMap,d=new WeakMap;let p={},g={},f=new WeakMap,v=[],h=null,m=!1,M=null,b=null,w=null,R=null,P=null,A=null,G=null,x=!1,E=null,W=null,q=null,D=null,I=null;const F=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,O=0;const j=n.getParameter(n.VERSION);j.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL (\d)/.exec(j)[1]),J=O>=1):j.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL ES (\d)/.exec(j)[1]),J=O>=2);let ne=null,re={};const B=n.getParameter(n.SCISSOR_BOX),Z=n.getParameter(n.VIEWPORT),de=new Ft().fromArray(B),me=new Ft().fromArray(Z);function be(k,pe,Q,fe){const ve=new Uint8Array(4),We=n.createTexture();n.bindTexture(k,We),n.texParameteri(k,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(k,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ke=0;Ke<Q;Ke++)i&&(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)?n.texImage3D(pe,0,n.RGBA,1,1,fe,0,n.RGBA,n.UNSIGNED_BYTE,ve):n.texImage2D(pe+Ke,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,ve);return We}const Re={};Re[n.TEXTURE_2D]=be(n.TEXTURE_2D,n.TEXTURE_2D,1),Re[n.TEXTURE_CUBE_MAP]=be(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Re[n.TEXTURE_2D_ARRAY]=be(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Re[n.TEXTURE_3D]=be(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),o.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Ce(n.DEPTH_TEST),l.setFunc(Wc),Fe(!1),lt(Ed),Ce(n.CULL_FACE),Ee(sa);function Ce(k){p[k]!==!0&&(n.enable(k),p[k]=!0)}function _e(k){p[k]!==!1&&(n.disable(k),p[k]=!1)}function Ie(k,pe){return g[k]!==pe?(n.bindFramebuffer(k,pe),g[k]=pe,i&&(k===n.DRAW_FRAMEBUFFER&&(g[n.FRAMEBUFFER]=pe),k===n.FRAMEBUFFER&&(g[n.DRAW_FRAMEBUFFER]=pe)),!0):!1}function ct(k,pe){let Q=v,fe=!1;if(k)if(Q=f.get(pe),Q===void 0&&(Q=[],f.set(pe,Q)),k.isWebGLMultipleRenderTargets){const ve=k.texture;if(Q.length!==ve.length||Q[0]!==n.COLOR_ATTACHMENT0){for(let We=0,Ke=ve.length;We<Ke;We++)Q[We]=n.COLOR_ATTACHMENT0+We;Q.length=ve.length,fe=!0}}else Q[0]!==n.COLOR_ATTACHMENT0&&(Q[0]=n.COLOR_ATTACHMENT0,fe=!0);else Q[0]!==n.BACK&&(Q[0]=n.BACK,fe=!0);fe&&(t.isWebGL2?n.drawBuffers(Q):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Q))}function ze(k){return h!==k?(n.useProgram(k),h=k,!0):!1}const z={[Fr]:n.FUNC_ADD,[Gx]:n.FUNC_SUBTRACT,[Hx]:n.FUNC_REVERSE_SUBTRACT};if(i)z[Rd]=n.MIN,z[Cd]=n.MAX;else{const k=e.get("EXT_blend_minmax");k!==null&&(z[Rd]=k.MIN_EXT,z[Cd]=k.MAX_EXT)}const Be={[Vx]:n.ZERO,[Wx]:n.ONE,[$x]:n.SRC_COLOR,[Ap]:n.SRC_ALPHA,[Jx]:n.SRC_ALPHA_SATURATE,[Yx]:n.DST_COLOR,[Xx]:n.DST_ALPHA,[jx]:n.ONE_MINUS_SRC_COLOR,[Tp]:n.ONE_MINUS_SRC_ALPHA,[Kx]:n.ONE_MINUS_DST_COLOR,[qx]:n.ONE_MINUS_DST_ALPHA};function Ee(k,pe,Q,fe,ve,We,Ke,Ye){if(k===sa){m===!0&&(_e(n.BLEND),m=!1);return}if(m===!1&&(Ce(n.BLEND),m=!0),k!==zx){if(k!==M||Ye!==x){if((b!==Fr||P!==Fr)&&(n.blendEquation(n.FUNC_ADD),b=Fr,P=Fr),Ye)switch(k){case jr:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case wd:n.blendFunc(n.ONE,n.ONE);break;case Ad:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Td:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}else switch(k){case jr:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case wd:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Ad:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Td:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",k);break}w=null,R=null,A=null,G=null,M=k,x=Ye}return}ve=ve||pe,We=We||Q,Ke=Ke||fe,(pe!==b||ve!==P)&&(n.blendEquationSeparate(z[pe],z[ve]),b=pe,P=ve),(Q!==w||fe!==R||We!==A||Ke!==G)&&(n.blendFuncSeparate(Be[Q],Be[fe],Be[We],Be[Ke]),w=Q,R=fe,A=We,G=Ke),M=k,x=!1}function Ue(k,pe){k.side===fi?_e(n.CULL_FACE):Ce(n.CULL_FACE);let Q=k.side===qn;pe&&(Q=!Q),Fe(Q),k.blending===jr&&k.transparent===!1?Ee(sa):Ee(k.blending,k.blendEquation,k.blendSrc,k.blendDst,k.blendEquationAlpha,k.blendSrcAlpha,k.blendDstAlpha,k.premultipliedAlpha),l.setFunc(k.depthFunc),l.setTest(k.depthTest),l.setMask(k.depthWrite),o.setMask(k.colorWrite);const fe=k.stencilWrite;c.setTest(fe),fe&&(c.setMask(k.stencilWriteMask),c.setFunc(k.stencilFunc,k.stencilRef,k.stencilFuncMask),c.setOp(k.stencilFail,k.stencilZFail,k.stencilZPass)),we(k.polygonOffset,k.polygonOffsetFactor,k.polygonOffsetUnits),k.alphaToCoverage===!0?Ce(n.SAMPLE_ALPHA_TO_COVERAGE):_e(n.SAMPLE_ALPHA_TO_COVERAGE)}function Fe(k){E!==k&&(k?n.frontFace(n.CW):n.frontFace(n.CCW),E=k)}function lt(k){k!==Ox?(Ce(n.CULL_FACE),k!==W&&(k===Ed?n.cullFace(n.BACK):k===Fx?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):_e(n.CULL_FACE),W=k}function ye(k){k!==q&&(J&&n.lineWidth(k),q=k)}function we(k,pe,Q){k?(Ce(n.POLYGON_OFFSET_FILL),(D!==pe||I!==Q)&&(n.polygonOffset(pe,Q),D=pe,I=Q)):_e(n.POLYGON_OFFSET_FILL)}function Ge(k){k?Ce(n.SCISSOR_TEST):_e(n.SCISSOR_TEST)}function ut(k){k===void 0&&(k=n.TEXTURE0+F-1),ne!==k&&(n.activeTexture(k),ne=k)}function Pe(k,pe,Q){Q===void 0&&(ne===null?Q=n.TEXTURE0+F-1:Q=ne);let fe=re[Q];fe===void 0&&(fe={type:void 0,texture:void 0},re[Q]=fe),(fe.type!==k||fe.texture!==pe)&&(ne!==Q&&(n.activeTexture(Q),ne=Q),n.bindTexture(k,pe||Re[k]),fe.type=k,fe.texture=pe)}function C(){const k=re[ne];k!==void 0&&k.type!==void 0&&(n.bindTexture(k.type,null),k.type=void 0,k.texture=void 0)}function y(){try{n.compressedTexImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function H(){try{n.compressedTexImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ce(){try{n.texSubImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ue(){try{n.texSubImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function ke(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function xe(){try{n.texStorage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function te(){try{n.texStorage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function L(){try{n.texImage2D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function $(){try{n.texImage3D.apply(n,arguments)}catch(k){console.error("THREE.WebGLState:",k)}}function oe(k){de.equals(k)===!1&&(n.scissor(k.x,k.y,k.z,k.w),de.copy(k))}function se(k){me.equals(k)===!1&&(n.viewport(k.x,k.y,k.z,k.w),me.copy(k))}function le(k,pe){let Q=d.get(pe);Q===void 0&&(Q=new WeakMap,d.set(pe,Q));let fe=Q.get(k);fe===void 0&&(fe=n.getUniformBlockIndex(pe,k.name),Q.set(k,fe))}function Le(k,pe){const fe=d.get(pe).get(k);u.get(pe)!==fe&&(n.uniformBlockBinding(pe,fe,k.__bindingPointIndex),u.set(pe,fe))}function Ne(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},ne=null,re={},g={},f=new WeakMap,v=[],h=null,m=!1,M=null,b=null,w=null,R=null,P=null,A=null,G=null,x=!1,E=null,W=null,q=null,D=null,I=null,de.set(0,0,n.canvas.width,n.canvas.height),me.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),c.reset()}return{buffers:{color:o,depth:l,stencil:c},enable:Ce,disable:_e,bindFramebuffer:Ie,drawBuffers:ct,useProgram:ze,setBlending:Ee,setMaterial:Ue,setFlipSided:Fe,setCullFace:lt,setLineWidth:ye,setPolygonOffset:we,setScissorTest:Ge,activeTexture:ut,bindTexture:Pe,unbindTexture:C,compressedTexImage2D:y,compressedTexImage3D:H,texImage2D:L,texImage3D:$,updateUBOMapping:le,uniformBlockBinding:Le,texStorage2D:xe,texStorage3D:te,texSubImage2D:ce,texSubImage3D:ue,compressedTexSubImage2D:ge,compressedTexSubImage3D:ke,scissor:oe,viewport:se,reset:Ne}}function UA(n,e,t,i,a,r,s){const o=a.isWebGL2,l=a.maxTextures,c=a.maxCubemapSize,u=a.maxTextureSize,d=a.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let v;const h=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(C,y){return m?new OffscreenCanvas(C,y):ll("canvas")}function b(C,y,H,ce){let ue=1;if((C.width>ce||C.height>ce)&&(ue=ce/Math.max(C.width,C.height)),ue<1||y===!0)if(typeof HTMLImageElement<"u"&&C instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&C instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&C instanceof ImageBitmap){const ge=y?Jc:Math.floor,ke=ge(ue*C.width),xe=ge(ue*C.height);v===void 0&&(v=M(ke,xe));const te=H?M(ke,xe):v;return te.width=ke,te.height=xe,te.getContext("2d").drawImage(C,0,0,ke,xe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+C.width+"x"+C.height+") to ("+ke+"x"+xe+")."),te}else return"data"in C&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+C.width+"x"+C.height+")."),C;return C}function w(C){return af(C.width)&&af(C.height)}function R(C){return o?!1:C.wrapS!==Mi||C.wrapT!==Mi||C.minFilter!==zt&&C.minFilter!==ui}function P(C,y){return C.generateMipmaps&&y&&C.minFilter!==zt&&C.minFilter!==ui}function A(C){n.generateMipmap(C)}function G(C,y,H,ce,ue=!1){if(o===!1)return y;if(C!==null){if(n[C]!==void 0)return n[C];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+C+"'")}let ge=y;return y===n.RED&&(H===n.FLOAT&&(ge=n.R32F),H===n.HALF_FLOAT&&(ge=n.R16F),H===n.UNSIGNED_BYTE&&(ge=n.R8)),y===n.RED_INTEGER&&(H===n.UNSIGNED_BYTE&&(ge=n.R8UI),H===n.UNSIGNED_SHORT&&(ge=n.R16UI),H===n.UNSIGNED_INT&&(ge=n.R32UI),H===n.BYTE&&(ge=n.R8I),H===n.SHORT&&(ge=n.R16I),H===n.INT&&(ge=n.R32I)),y===n.RG&&(H===n.FLOAT&&(ge=n.RG32F),H===n.HALF_FLOAT&&(ge=n.RG16F),H===n.UNSIGNED_BYTE&&(ge=n.RG8)),y===n.RGBA&&(H===n.FLOAT&&(ge=n.RGBA32F),H===n.HALF_FLOAT&&(ge=n.RGBA16F),H===n.UNSIGNED_BYTE&&(ge=ce===Nt&&ue===!1?n.SRGB8_ALPHA8:n.RGBA8),H===n.UNSIGNED_SHORT_4_4_4_4&&(ge=n.RGBA4),H===n.UNSIGNED_SHORT_5_5_5_1&&(ge=n.RGB5_A1)),(ge===n.R16F||ge===n.R32F||ge===n.RG16F||ge===n.RG32F||ge===n.RGBA16F||ge===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ge}function x(C,y,H){return P(C,H)===!0||C.isFramebufferTexture&&C.minFilter!==zt&&C.minFilter!==ui?Math.log2(Math.max(y.width,y.height))+1:C.mipmaps!==void 0&&C.mipmaps.length>0?C.mipmaps.length:C.isCompressedTexture&&Array.isArray(C.image)?y.mipmaps.length:1}function E(C){return C===zt||C===Pd||C===Yl?n.NEAREST:n.LINEAR}function W(C){const y=C.target;y.removeEventListener("dispose",W),D(y),y.isVideoTexture&&f.delete(y)}function q(C){const y=C.target;y.removeEventListener("dispose",q),F(y)}function D(C){const y=i.get(C);if(y.__webglInit===void 0)return;const H=C.source,ce=h.get(H);if(ce){const ue=ce[y.__cacheKey];ue.usedTimes--,ue.usedTimes===0&&I(C),Object.keys(ce).length===0&&h.delete(H)}i.remove(C)}function I(C){const y=i.get(C);n.deleteTexture(y.__webglTexture);const H=C.source,ce=h.get(H);delete ce[y.__cacheKey],s.memory.textures--}function F(C){const y=C.texture,H=i.get(C),ce=i.get(y);if(ce.__webglTexture!==void 0&&(n.deleteTexture(ce.__webglTexture),s.memory.textures--),C.depthTexture&&C.depthTexture.dispose(),C.isWebGLCubeRenderTarget)for(let ue=0;ue<6;ue++){if(Array.isArray(H.__webglFramebuffer[ue]))for(let ge=0;ge<H.__webglFramebuffer[ue].length;ge++)n.deleteFramebuffer(H.__webglFramebuffer[ue][ge]);else n.deleteFramebuffer(H.__webglFramebuffer[ue]);H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer[ue])}else{if(Array.isArray(H.__webglFramebuffer))for(let ue=0;ue<H.__webglFramebuffer.length;ue++)n.deleteFramebuffer(H.__webglFramebuffer[ue]);else n.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&n.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&n.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let ue=0;ue<H.__webglColorRenderbuffer.length;ue++)H.__webglColorRenderbuffer[ue]&&n.deleteRenderbuffer(H.__webglColorRenderbuffer[ue]);H.__webglDepthRenderbuffer&&n.deleteRenderbuffer(H.__webglDepthRenderbuffer)}if(C.isWebGLMultipleRenderTargets)for(let ue=0,ge=y.length;ue<ge;ue++){const ke=i.get(y[ue]);ke.__webglTexture&&(n.deleteTexture(ke.__webglTexture),s.memory.textures--),i.remove(y[ue])}i.remove(y),i.remove(C)}let J=0;function O(){J=0}function j(){const C=J;return C>=l&&console.warn("THREE.WebGLTextures: Trying to use "+C+" texture units while this GPU supports only "+l),J+=1,C}function ne(C){const y=[];return y.push(C.wrapS),y.push(C.wrapT),y.push(C.wrapR||0),y.push(C.magFilter),y.push(C.minFilter),y.push(C.anisotropy),y.push(C.internalFormat),y.push(C.format),y.push(C.type),y.push(C.generateMipmaps),y.push(C.premultiplyAlpha),y.push(C.flipY),y.push(C.unpackAlignment),y.push(C.colorSpace),y.join()}function re(C,y){const H=i.get(C);if(C.isVideoTexture&&ut(C),C.isRenderTargetTexture===!1&&C.version>0&&H.__version!==C.version){const ce=C.image;if(ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ie(H,C,y);return}}t.bindTexture(n.TEXTURE_2D,H.__webglTexture,n.TEXTURE0+y)}function B(C,y){const H=i.get(C);if(C.version>0&&H.__version!==C.version){Ie(H,C,y);return}t.bindTexture(n.TEXTURE_2D_ARRAY,H.__webglTexture,n.TEXTURE0+y)}function Z(C,y){const H=i.get(C);if(C.version>0&&H.__version!==C.version){Ie(H,C,y);return}t.bindTexture(n.TEXTURE_3D,H.__webglTexture,n.TEXTURE0+y)}function de(C,y){const H=i.get(C);if(C.version>0&&H.__version!==C.version){ct(H,C,y);return}t.bindTexture(n.TEXTURE_CUBE_MAP,H.__webglTexture,n.TEXTURE0+y)}const me={[jc]:n.REPEAT,[Mi]:n.CLAMP_TO_EDGE,[Xc]:n.MIRRORED_REPEAT},be={[zt]:n.NEAREST,[Pd]:n.NEAREST_MIPMAP_NEAREST,[Yl]:n.NEAREST_MIPMAP_LINEAR,[ui]:n.LINEAR,[fy]:n.LINEAR_MIPMAP_NEAREST,[qs]:n.LINEAR_MIPMAP_LINEAR},Re={[Ay]:n.NEVER,[ky]:n.ALWAYS,[Ty]:n.LESS,[Cy]:n.LEQUAL,[Ry]:n.EQUAL,[Dy]:n.GEQUAL,[Py]:n.GREATER,[Ly]:n.NOTEQUAL};function Ce(C,y,H){if(H?(n.texParameteri(C,n.TEXTURE_WRAP_S,me[y.wrapS]),n.texParameteri(C,n.TEXTURE_WRAP_T,me[y.wrapT]),(C===n.TEXTURE_3D||C===n.TEXTURE_2D_ARRAY)&&n.texParameteri(C,n.TEXTURE_WRAP_R,me[y.wrapR]),n.texParameteri(C,n.TEXTURE_MAG_FILTER,be[y.magFilter]),n.texParameteri(C,n.TEXTURE_MIN_FILTER,be[y.minFilter])):(n.texParameteri(C,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(C,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(C===n.TEXTURE_3D||C===n.TEXTURE_2D_ARRAY)&&n.texParameteri(C,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(y.wrapS!==Mi||y.wrapT!==Mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(C,n.TEXTURE_MAG_FILTER,E(y.magFilter)),n.texParameteri(C,n.TEXTURE_MIN_FILTER,E(y.minFilter)),y.minFilter!==zt&&y.minFilter!==ui&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),y.compareFunction&&(n.texParameteri(C,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(C,n.TEXTURE_COMPARE_FUNC,Re[y.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ce=e.get("EXT_texture_filter_anisotropic");if(y.magFilter===zt||y.minFilter!==Yl&&y.minFilter!==qs||y.type===na&&e.has("OES_texture_float_linear")===!1||o===!1&&y.type===ns&&e.has("OES_texture_half_float_linear")===!1)return;(y.anisotropy>1||i.get(y).__currentAnisotropy)&&(n.texParameterf(C,ce.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(y.anisotropy,a.getMaxAnisotropy())),i.get(y).__currentAnisotropy=y.anisotropy)}}function _e(C,y){let H=!1;C.__webglInit===void 0&&(C.__webglInit=!0,y.addEventListener("dispose",W));const ce=y.source;let ue=h.get(ce);ue===void 0&&(ue={},h.set(ce,ue));const ge=ne(y);if(ge!==C.__cacheKey){ue[ge]===void 0&&(ue[ge]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,H=!0),ue[ge].usedTimes++;const ke=ue[C.__cacheKey];ke!==void 0&&(ue[C.__cacheKey].usedTimes--,ke.usedTimes===0&&I(y)),C.__cacheKey=ge,C.__webglTexture=ue[ge].texture}return H}function Ie(C,y,H){let ce=n.TEXTURE_2D;(y.isDataArrayTexture||y.isCompressedArrayTexture)&&(ce=n.TEXTURE_2D_ARRAY),y.isData3DTexture&&(ce=n.TEXTURE_3D);const ue=_e(C,y),ge=y.source;t.bindTexture(ce,C.__webglTexture,n.TEXTURE0+H);const ke=i.get(ge);if(ge.version!==ke.__version||ue===!0){t.activeTexture(n.TEXTURE0+H),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const xe=R(y)&&w(y.image)===!1;let te=b(y.image,xe,!1,u);te=Pe(y,te);const L=w(te)||o,$=r.convert(y.format,y.colorSpace);let oe=r.convert(y.type),se=G(y.internalFormat,$,oe,y.colorSpace,y.isVideoTexture);Ce(ce,y,L);let le;const Le=y.mipmaps,Ne=o&&y.isVideoTexture!==!0,k=ke.__version===void 0||ue===!0,pe=x(y,te,L);if(y.isDepthTexture)se=n.DEPTH_COMPONENT,o?y.type===na?se=n.DEPTH_COMPONENT32F:y.type===wa?se=n.DEPTH_COMPONENT24:y.type===er?se=n.DEPTH24_STENCIL8:se=n.DEPTH_COMPONENT16:y.type===na&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),y.format===tr&&se===n.DEPTH_COMPONENT&&y.type!==Iu&&y.type!==wa&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),y.type=wa,oe=r.convert(y.type)),y.format===is&&se===n.DEPTH_COMPONENT&&(se=n.DEPTH_STENCIL,y.type!==er&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),y.type=er,oe=r.convert(y.type))),k&&(Ne?t.texStorage2D(n.TEXTURE_2D,1,se,te.width,te.height):t.texImage2D(n.TEXTURE_2D,0,se,te.width,te.height,0,$,oe,null));else if(y.isDataTexture)if(Le.length>0&&L){Ne&&k&&t.texStorage2D(n.TEXTURE_2D,pe,se,Le[0].width,Le[0].height);for(let Q=0,fe=Le.length;Q<fe;Q++)le=Le[Q],Ne?t.texSubImage2D(n.TEXTURE_2D,Q,0,0,le.width,le.height,$,oe,le.data):t.texImage2D(n.TEXTURE_2D,Q,se,le.width,le.height,0,$,oe,le.data);y.generateMipmaps=!1}else Ne?(k&&t.texStorage2D(n.TEXTURE_2D,pe,se,te.width,te.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,te.width,te.height,$,oe,te.data)):t.texImage2D(n.TEXTURE_2D,0,se,te.width,te.height,0,$,oe,te.data);else if(y.isCompressedTexture)if(y.isCompressedArrayTexture){Ne&&k&&t.texStorage3D(n.TEXTURE_2D_ARRAY,pe,se,Le[0].width,Le[0].height,te.depth);for(let Q=0,fe=Le.length;Q<fe;Q++)le=Le[Q],y.format!==Ei?$!==null?Ne?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Q,0,0,0,le.width,le.height,te.depth,$,le.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Q,se,le.width,le.height,te.depth,0,le.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ne?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Q,0,0,0,le.width,le.height,te.depth,$,oe,le.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Q,se,le.width,le.height,te.depth,0,$,oe,le.data)}else{Ne&&k&&t.texStorage2D(n.TEXTURE_2D,pe,se,Le[0].width,Le[0].height);for(let Q=0,fe=Le.length;Q<fe;Q++)le=Le[Q],y.format!==Ei?$!==null?Ne?t.compressedTexSubImage2D(n.TEXTURE_2D,Q,0,0,le.width,le.height,$,le.data):t.compressedTexImage2D(n.TEXTURE_2D,Q,se,le.width,le.height,0,le.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ne?t.texSubImage2D(n.TEXTURE_2D,Q,0,0,le.width,le.height,$,oe,le.data):t.texImage2D(n.TEXTURE_2D,Q,se,le.width,le.height,0,$,oe,le.data)}else if(y.isDataArrayTexture)Ne?(k&&t.texStorage3D(n.TEXTURE_2D_ARRAY,pe,se,te.width,te.height,te.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,te.width,te.height,te.depth,$,oe,te.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,se,te.width,te.height,te.depth,0,$,oe,te.data);else if(y.isData3DTexture)Ne?(k&&t.texStorage3D(n.TEXTURE_3D,pe,se,te.width,te.height,te.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,te.width,te.height,te.depth,$,oe,te.data)):t.texImage3D(n.TEXTURE_3D,0,se,te.width,te.height,te.depth,0,$,oe,te.data);else if(y.isFramebufferTexture){if(k)if(Ne)t.texStorage2D(n.TEXTURE_2D,pe,se,te.width,te.height);else{let Q=te.width,fe=te.height;for(let ve=0;ve<pe;ve++)t.texImage2D(n.TEXTURE_2D,ve,se,Q,fe,0,$,oe,null),Q>>=1,fe>>=1}}else if(Le.length>0&&L){Ne&&k&&t.texStorage2D(n.TEXTURE_2D,pe,se,Le[0].width,Le[0].height);for(let Q=0,fe=Le.length;Q<fe;Q++)le=Le[Q],Ne?t.texSubImage2D(n.TEXTURE_2D,Q,0,0,$,oe,le):t.texImage2D(n.TEXTURE_2D,Q,se,$,oe,le);y.generateMipmaps=!1}else Ne?(k&&t.texStorage2D(n.TEXTURE_2D,pe,se,te.width,te.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,$,oe,te)):t.texImage2D(n.TEXTURE_2D,0,se,$,oe,te);P(y,L)&&A(ce),ke.__version=ge.version,y.onUpdate&&y.onUpdate(y)}C.__version=y.version}function ct(C,y,H){if(y.image.length!==6)return;const ce=_e(C,y),ue=y.source;t.bindTexture(n.TEXTURE_CUBE_MAP,C.__webglTexture,n.TEXTURE0+H);const ge=i.get(ue);if(ue.version!==ge.__version||ce===!0){t.activeTexture(n.TEXTURE0+H),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,y.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,y.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const ke=y.isCompressedTexture||y.image[0].isCompressedTexture,xe=y.image[0]&&y.image[0].isDataTexture,te=[];for(let Q=0;Q<6;Q++)!ke&&!xe?te[Q]=b(y.image[Q],!1,!0,c):te[Q]=xe?y.image[Q].image:y.image[Q],te[Q]=Pe(y,te[Q]);const L=te[0],$=w(L)||o,oe=r.convert(y.format,y.colorSpace),se=r.convert(y.type),le=G(y.internalFormat,oe,se,y.colorSpace),Le=o&&y.isVideoTexture!==!0,Ne=ge.__version===void 0||ce===!0;let k=x(y,L,$);Ce(n.TEXTURE_CUBE_MAP,y,$);let pe;if(ke){Le&&Ne&&t.texStorage2D(n.TEXTURE_CUBE_MAP,k,le,L.width,L.height);for(let Q=0;Q<6;Q++){pe=te[Q].mipmaps;for(let fe=0;fe<pe.length;fe++){const ve=pe[fe];y.format!==Ei?oe!==null?Le?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe,0,0,ve.width,ve.height,oe,ve.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe,le,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Le?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe,0,0,ve.width,ve.height,oe,se,ve.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe,le,ve.width,ve.height,0,oe,se,ve.data)}}}else{pe=y.mipmaps,Le&&Ne&&(pe.length>0&&k++,t.texStorage2D(n.TEXTURE_CUBE_MAP,k,le,te[0].width,te[0].height));for(let Q=0;Q<6;Q++)if(xe){Le?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,0,0,te[Q].width,te[Q].height,oe,se,te[Q].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,le,te[Q].width,te[Q].height,0,oe,se,te[Q].data);for(let fe=0;fe<pe.length;fe++){const We=pe[fe].image[Q].image;Le?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe+1,0,0,We.width,We.height,oe,se,We.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe+1,le,We.width,We.height,0,oe,se,We.data)}}else{Le?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,0,0,oe,se,te[Q]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,0,le,oe,se,te[Q]);for(let fe=0;fe<pe.length;fe++){const ve=pe[fe];Le?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe+1,0,0,oe,se,ve.image[Q]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Q,fe+1,le,oe,se,ve.image[Q])}}}P(y,$)&&A(n.TEXTURE_CUBE_MAP),ge.__version=ue.version,y.onUpdate&&y.onUpdate(y)}C.__version=y.version}function ze(C,y,H,ce,ue,ge){const ke=r.convert(H.format,H.colorSpace),xe=r.convert(H.type),te=G(H.internalFormat,ke,xe,H.colorSpace);if(!i.get(y).__hasExternalTextures){const $=Math.max(1,y.width>>ge),oe=Math.max(1,y.height>>ge);ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY?t.texImage3D(ue,ge,te,$,oe,y.depth,0,ke,xe,null):t.texImage2D(ue,ge,te,$,oe,0,ke,xe,null)}t.bindFramebuffer(n.FRAMEBUFFER,C),Ge(y)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ce,ue,i.get(H).__webglTexture,0,we(y)):(ue===n.TEXTURE_2D||ue>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ue<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ce,ue,i.get(H).__webglTexture,ge),t.bindFramebuffer(n.FRAMEBUFFER,null)}function z(C,y,H){if(n.bindRenderbuffer(n.RENDERBUFFER,C),y.depthBuffer&&!y.stencilBuffer){let ce=n.DEPTH_COMPONENT16;if(H||Ge(y)){const ue=y.depthTexture;ue&&ue.isDepthTexture&&(ue.type===na?ce=n.DEPTH_COMPONENT32F:ue.type===wa&&(ce=n.DEPTH_COMPONENT24));const ge=we(y);Ge(y)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,ce,y.width,y.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,ce,y.width,y.height)}else n.renderbufferStorage(n.RENDERBUFFER,ce,y.width,y.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,C)}else if(y.depthBuffer&&y.stencilBuffer){const ce=we(y);H&&Ge(y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ce,n.DEPTH24_STENCIL8,y.width,y.height):Ge(y)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ce,n.DEPTH24_STENCIL8,y.width,y.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,y.width,y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,C)}else{const ce=y.isWebGLMultipleRenderTargets===!0?y.texture:[y.texture];for(let ue=0;ue<ce.length;ue++){const ge=ce[ue],ke=r.convert(ge.format,ge.colorSpace),xe=r.convert(ge.type),te=G(ge.internalFormat,ke,xe,ge.colorSpace),L=we(y);H&&Ge(y)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,L,te,y.width,y.height):Ge(y)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,L,te,y.width,y.height):n.renderbufferStorage(n.RENDERBUFFER,te,y.width,y.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Be(C,y){if(y&&y.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,C),!(y.depthTexture&&y.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(y.depthTexture).__webglTexture||y.depthTexture.image.width!==y.width||y.depthTexture.image.height!==y.height)&&(y.depthTexture.image.width=y.width,y.depthTexture.image.height=y.height,y.depthTexture.needsUpdate=!0),re(y.depthTexture,0);const ce=i.get(y.depthTexture).__webglTexture,ue=we(y);if(y.depthTexture.format===tr)Ge(y)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ce,0,ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ce,0);else if(y.depthTexture.format===is)Ge(y)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ce,0,ue):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ce,0);else throw new Error("Unknown depthTexture format")}function Ee(C){const y=i.get(C),H=C.isWebGLCubeRenderTarget===!0;if(C.depthTexture&&!y.__autoAllocateDepthBuffer){if(H)throw new Error("target.depthTexture not supported in Cube render targets");Be(y.__webglFramebuffer,C)}else if(H){y.__webglDepthbuffer=[];for(let ce=0;ce<6;ce++)t.bindFramebuffer(n.FRAMEBUFFER,y.__webglFramebuffer[ce]),y.__webglDepthbuffer[ce]=n.createRenderbuffer(),z(y.__webglDepthbuffer[ce],C,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,y.__webglFramebuffer),y.__webglDepthbuffer=n.createRenderbuffer(),z(y.__webglDepthbuffer,C,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ue(C,y,H){const ce=i.get(C);y!==void 0&&ze(ce.__webglFramebuffer,C,C.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),H!==void 0&&Ee(C)}function Fe(C){const y=C.texture,H=i.get(C),ce=i.get(y);C.addEventListener("dispose",q),C.isWebGLMultipleRenderTargets!==!0&&(ce.__webglTexture===void 0&&(ce.__webglTexture=n.createTexture()),ce.__version=y.version,s.memory.textures++);const ue=C.isWebGLCubeRenderTarget===!0,ge=C.isWebGLMultipleRenderTargets===!0,ke=w(C)||o;if(ue){H.__webglFramebuffer=[];for(let xe=0;xe<6;xe++)if(o&&y.mipmaps&&y.mipmaps.length>0){H.__webglFramebuffer[xe]=[];for(let te=0;te<y.mipmaps.length;te++)H.__webglFramebuffer[xe][te]=n.createFramebuffer()}else H.__webglFramebuffer[xe]=n.createFramebuffer()}else{if(o&&y.mipmaps&&y.mipmaps.length>0){H.__webglFramebuffer=[];for(let xe=0;xe<y.mipmaps.length;xe++)H.__webglFramebuffer[xe]=n.createFramebuffer()}else H.__webglFramebuffer=n.createFramebuffer();if(ge)if(a.drawBuffers){const xe=C.texture;for(let te=0,L=xe.length;te<L;te++){const $=i.get(xe[te]);$.__webglTexture===void 0&&($.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&C.samples>0&&Ge(C)===!1){const xe=ge?y:[y];H.__webglMultisampledFramebuffer=n.createFramebuffer(),H.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,H.__webglMultisampledFramebuffer);for(let te=0;te<xe.length;te++){const L=xe[te];H.__webglColorRenderbuffer[te]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,H.__webglColorRenderbuffer[te]);const $=r.convert(L.format,L.colorSpace),oe=r.convert(L.type),se=G(L.internalFormat,$,oe,L.colorSpace,C.isXRRenderTarget===!0),le=we(C);n.renderbufferStorageMultisample(n.RENDERBUFFER,le,se,C.width,C.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+te,n.RENDERBUFFER,H.__webglColorRenderbuffer[te])}n.bindRenderbuffer(n.RENDERBUFFER,null),C.depthBuffer&&(H.__webglDepthRenderbuffer=n.createRenderbuffer(),z(H.__webglDepthRenderbuffer,C,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ue){t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture),Ce(n.TEXTURE_CUBE_MAP,y,ke);for(let xe=0;xe<6;xe++)if(o&&y.mipmaps&&y.mipmaps.length>0)for(let te=0;te<y.mipmaps.length;te++)ze(H.__webglFramebuffer[xe][te],C,y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,te);else ze(H.__webglFramebuffer[xe],C,y,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+xe,0);P(y,ke)&&A(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ge){const xe=C.texture;for(let te=0,L=xe.length;te<L;te++){const $=xe[te],oe=i.get($);t.bindTexture(n.TEXTURE_2D,oe.__webglTexture),Ce(n.TEXTURE_2D,$,ke),ze(H.__webglFramebuffer,C,$,n.COLOR_ATTACHMENT0+te,n.TEXTURE_2D,0),P($,ke)&&A(n.TEXTURE_2D)}t.unbindTexture()}else{let xe=n.TEXTURE_2D;if((C.isWebGL3DRenderTarget||C.isWebGLArrayRenderTarget)&&(o?xe=C.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(xe,ce.__webglTexture),Ce(xe,y,ke),o&&y.mipmaps&&y.mipmaps.length>0)for(let te=0;te<y.mipmaps.length;te++)ze(H.__webglFramebuffer[te],C,y,n.COLOR_ATTACHMENT0,xe,te);else ze(H.__webglFramebuffer,C,y,n.COLOR_ATTACHMENT0,xe,0);P(y,ke)&&A(xe),t.unbindTexture()}C.depthBuffer&&Ee(C)}function lt(C){const y=w(C)||o,H=C.isWebGLMultipleRenderTargets===!0?C.texture:[C.texture];for(let ce=0,ue=H.length;ce<ue;ce++){const ge=H[ce];if(P(ge,y)){const ke=C.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,xe=i.get(ge).__webglTexture;t.bindTexture(ke,xe),A(ke),t.unbindTexture()}}}function ye(C){if(o&&C.samples>0&&Ge(C)===!1){const y=C.isWebGLMultipleRenderTargets?C.texture:[C.texture],H=C.width,ce=C.height;let ue=n.COLOR_BUFFER_BIT;const ge=[],ke=C.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=i.get(C),te=C.isWebGLMultipleRenderTargets===!0;if(te)for(let L=0;L<y.length;L++)t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+L,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+L,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,xe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xe.__webglFramebuffer);for(let L=0;L<y.length;L++){ge.push(n.COLOR_ATTACHMENT0+L),C.depthBuffer&&ge.push(ke);const $=xe.__ignoreDepthValues!==void 0?xe.__ignoreDepthValues:!1;if($===!1&&(C.depthBuffer&&(ue|=n.DEPTH_BUFFER_BIT),C.stencilBuffer&&(ue|=n.STENCIL_BUFFER_BIT)),te&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,xe.__webglColorRenderbuffer[L]),$===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[ke]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ke])),te){const oe=i.get(y[L]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,oe,0)}n.blitFramebuffer(0,0,H,ce,0,0,H,ce,ue,n.NEAREST),g&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ge)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),te)for(let L=0;L<y.length;L++){t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+L,n.RENDERBUFFER,xe.__webglColorRenderbuffer[L]);const $=i.get(y[L]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,xe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+L,n.TEXTURE_2D,$,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,xe.__webglMultisampledFramebuffer)}}function we(C){return Math.min(d,C.samples)}function Ge(C){const y=i.get(C);return o&&C.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&y.__useRenderToTexture!==!1}function ut(C){const y=s.render.frame;f.get(C)!==y&&(f.set(C,y),C.update())}function Pe(C,y){const H=C.colorSpace,ce=C.format,ue=C.type;return C.isCompressedTexture===!0||C.isVideoTexture===!0||C.format===Yc||H!==Hi&&H!==ir&&(H===Nt||H===Rl?o===!1?e.has("EXT_sRGB")===!0&&ce===Ei?(C.format=Yc,C.minFilter=ui,C.generateMipmaps=!1):y=Bp.sRGBToLinear(y):(ce!==Ei||ue!==La)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",H)),y}this.allocateTextureUnit=j,this.resetTextureUnits=O,this.setTexture2D=re,this.setTexture2DArray=B,this.setTexture3D=Z,this.setTextureCube=de,this.rebindTextures=Ue,this.setupRenderTarget=Fe,this.updateRenderTargetMipmap=lt,this.updateMultisampleRenderTarget=ye,this.setupDepthRenderbuffer=Ee,this.setupFrameBufferTexture=ze,this.useMultisampledRTT=Ge}const IA=0,cn=1;function NA(n,e,t){const i=t.isWebGL2;function a(r,s=ir){let o;const l=s===Nt||s===Rl?cn:IA;if(r===La)return n.UNSIGNED_BYTE;if(r===Lp)return n.UNSIGNED_SHORT_4_4_4_4;if(r===Dp)return n.UNSIGNED_SHORT_5_5_5_1;if(r===hy)return n.BYTE;if(r===py)return n.SHORT;if(r===Iu)return n.UNSIGNED_SHORT;if(r===Pp)return n.INT;if(r===wa)return n.UNSIGNED_INT;if(r===na)return n.FLOAT;if(r===ns)return i?n.HALF_FLOAT:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(r===my)return n.ALPHA;if(r===Ei)return n.RGBA;if(r===gy)return n.LUMINANCE;if(r===vy)return n.LUMINANCE_ALPHA;if(r===tr)return n.DEPTH_COMPONENT;if(r===is)return n.DEPTH_STENCIL;if(r===Yc)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(r===_y)return n.RED;if(r===kp)return n.RED_INTEGER;if(r===by)return n.RG;if(r===Up)return n.RG_INTEGER;if(r===Ip)return n.RGBA_INTEGER;if(r===Kl||r===Jl||r===Zl||r===Ql)if(l===cn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(r===Kl)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Jl)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Zl)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Ql)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(r===Kl)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Jl)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Zl)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Ql)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(r===Ld||r===Dd||r===kd||r===Ud)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(r===Ld)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(r===Dd)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===kd)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(r===Ud)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(r===xy)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(r===Id||r===Nd)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(r===Id)return l===cn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(r===Nd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(r===Od||r===Fd||r===Bd||r===zd||r===Gd||r===Hd||r===Vd||r===Wd||r===$d||r===jd||r===Xd||r===qd||r===Yd||r===Kd)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(r===Od)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(r===Fd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(r===Bd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(r===zd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(r===Gd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(r===Hd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(r===Vd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(r===Wd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(r===$d)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(r===jd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(r===Xd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(r===qd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(r===Yd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(r===Kd)return l===cn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(r===ec||r===Jd||r===Zd)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(r===ec)return l===cn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(r===Jd)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(r===Zd)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(r===yy||r===Qd||r===ef||r===tf)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(r===ec)return o.COMPRESSED_RED_RGTC1_EXT;if(r===Qd)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(r===ef)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(r===tf)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return r===er?i?n.UNSIGNED_INT_24_8:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[r]!==void 0?n[r]:null}return{convert:a}}class OA extends ti{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class xn extends kn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const FA={type:"move"};class Mc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new xn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new xn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new X,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new X),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new xn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new X,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new X),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let a=null,r=null,s=null;const o=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const v of e.hand.values()){const h=t.getJointPose(v,i),m=this._getHandJoint(c,v);h!==null&&(m.matrix.fromArray(h.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=h.radius),m.visible=h!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],p=u.position.distanceTo(d.position),g=.02,f=.005;c.inputState.pinching&&p>g+f?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=g-f&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(a=t.getPose(e.targetRaySpace,i),a===null&&r!==null&&(a=r),a!==null&&(o.matrix.fromArray(a.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,a.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(a.linearVelocity)):o.hasLinearVelocity=!1,a.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(a.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(FA)))}return o!==null&&(o.visible=a!==null),l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new xn;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class am extends Dn{constructor(e,t,i,a,r,s,o,l,c,u){if(u=u!==void 0?u:tr,u!==tr&&u!==is)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===tr&&(i=wa),i===void 0&&u===is&&(i=er),super(null,a,r,s,o,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:zt,this.minFilter=l!==void 0?l:zt,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class BA extends fr{constructor(e,t){super();const i=this;let a=null,r=1,s=null,o="local-floor",l=1,c=null,u=null,d=null,p=null,g=null,f=null;const v=t.getContextAttributes();let h=null,m=null;const M=[],b=[],w=new ti;w.layers.enable(1),w.viewport=new Ft;const R=new ti;R.layers.enable(2),R.viewport=new Ft;const P=[w,R],A=new OA;A.layers.enable(1),A.layers.enable(2);let G=null,x=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(B){let Z=M[B];return Z===void 0&&(Z=new Mc,M[B]=Z),Z.getTargetRaySpace()},this.getControllerGrip=function(B){let Z=M[B];return Z===void 0&&(Z=new Mc,M[B]=Z),Z.getGripSpace()},this.getHand=function(B){let Z=M[B];return Z===void 0&&(Z=new Mc,M[B]=Z),Z.getHandSpace()};function E(B){const Z=b.indexOf(B.inputSource);if(Z===-1)return;const de=M[Z];de!==void 0&&(de.update(B.inputSource,B.frame,c||s),de.dispatchEvent({type:B.type,data:B.inputSource}))}function W(){a.removeEventListener("select",E),a.removeEventListener("selectstart",E),a.removeEventListener("selectend",E),a.removeEventListener("squeeze",E),a.removeEventListener("squeezestart",E),a.removeEventListener("squeezeend",E),a.removeEventListener("end",W),a.removeEventListener("inputsourceschange",q);for(let B=0;B<M.length;B++){const Z=b[B];Z!==null&&(b[B]=null,M[B].disconnect(Z))}G=null,x=null,e.setRenderTarget(h),g=null,p=null,d=null,a=null,m=null,re.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(B){r=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(B){o=B,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(B){c=B},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return a},this.setSession=async function(B){if(a=B,a!==null){if(h=e.getRenderTarget(),a.addEventListener("select",E),a.addEventListener("selectstart",E),a.addEventListener("selectend",E),a.addEventListener("squeeze",E),a.addEventListener("squeezestart",E),a.addEventListener("squeezeend",E),a.addEventListener("end",W),a.addEventListener("inputsourceschange",q),v.xrCompatible!==!0&&await t.makeXRCompatible(),a.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Z={antialias:a.renderState.layers===void 0?v.antialias:!0,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:r};g=new XRWebGLLayer(a,t,Z),a.updateRenderState({baseLayer:g}),m=new ca(g.framebufferWidth,g.framebufferHeight,{format:Ei,type:La,colorSpace:e.outputColorSpace,stencilBuffer:v.stencil})}else{let Z=null,de=null,me=null;v.depth&&(me=v.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Z=v.stencil?is:tr,de=v.stencil?er:wa);const be={colorFormat:t.RGBA8,depthFormat:me,scaleFactor:r};d=new XRWebGLBinding(a,t),p=d.createProjectionLayer(be),a.updateRenderState({layers:[p]}),m=new ca(p.textureWidth,p.textureHeight,{format:Ei,type:La,depthTexture:new am(p.textureWidth,p.textureHeight,de,void 0,void 0,void 0,void 0,void 0,void 0,Z),stencilBuffer:v.stencil,colorSpace:e.outputColorSpace,samples:v.antialias?4:0});const Re=e.properties.get(m);Re.__ignoreDepthValues=p.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await a.requestReferenceSpace(o),re.setContext(a),re.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(a!==null)return a.environmentBlendMode};function q(B){for(let Z=0;Z<B.removed.length;Z++){const de=B.removed[Z],me=b.indexOf(de);me>=0&&(b[me]=null,M[me].disconnect(de))}for(let Z=0;Z<B.added.length;Z++){const de=B.added[Z];let me=b.indexOf(de);if(me===-1){for(let Re=0;Re<M.length;Re++)if(Re>=b.length){b.push(de),me=Re;break}else if(b[Re]===null){b[Re]=de,me=Re;break}if(me===-1)break}const be=M[me];be&&be.connect(de)}}const D=new X,I=new X;function F(B,Z,de){D.setFromMatrixPosition(Z.matrixWorld),I.setFromMatrixPosition(de.matrixWorld);const me=D.distanceTo(I),be=Z.projectionMatrix.elements,Re=de.projectionMatrix.elements,Ce=be[14]/(be[10]-1),_e=be[14]/(be[10]+1),Ie=(be[9]+1)/be[5],ct=(be[9]-1)/be[5],ze=(be[8]-1)/be[0],z=(Re[8]+1)/Re[0],Be=Ce*ze,Ee=Ce*z,Ue=me/(-ze+z),Fe=Ue*-ze;Z.matrixWorld.decompose(B.position,B.quaternion,B.scale),B.translateX(Fe),B.translateZ(Ue),B.matrixWorld.compose(B.position,B.quaternion,B.scale),B.matrixWorldInverse.copy(B.matrixWorld).invert();const lt=Ce+Ue,ye=_e+Ue,we=Be-Fe,Ge=Ee+(me-Fe),ut=Ie*_e/ye*lt,Pe=ct*_e/ye*lt;B.projectionMatrix.makePerspective(we,Ge,ut,Pe,lt,ye),B.projectionMatrixInverse.copy(B.projectionMatrix).invert()}function J(B,Z){Z===null?B.matrixWorld.copy(B.matrix):B.matrixWorld.multiplyMatrices(Z.matrixWorld,B.matrix),B.matrixWorldInverse.copy(B.matrixWorld).invert()}this.updateCamera=function(B){if(a===null)return;A.near=R.near=w.near=B.near,A.far=R.far=w.far=B.far,(G!==A.near||x!==A.far)&&(a.updateRenderState({depthNear:A.near,depthFar:A.far}),G=A.near,x=A.far);const Z=B.parent,de=A.cameras;J(A,Z);for(let me=0;me<de.length;me++)J(de[me],Z);de.length===2?F(A,w,R):A.projectionMatrix.copy(w.projectionMatrix),O(B,A,Z)};function O(B,Z,de){de===null?B.matrix.copy(Z.matrixWorld):(B.matrix.copy(de.matrixWorld),B.matrix.invert(),B.matrix.multiply(Z.matrixWorld)),B.matrix.decompose(B.position,B.quaternion,B.scale),B.updateMatrixWorld(!0),B.projectionMatrix.copy(Z.projectionMatrix),B.projectionMatrixInverse.copy(Z.projectionMatrixInverse),B.isPerspectiveCamera&&(B.fov=Kc*2*Math.atan(1/B.projectionMatrix.elements[5]),B.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(B){l=B,p!==null&&(p.fixedFoveation=B),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=B)};let j=null;function ne(B,Z){if(u=Z.getViewerPose(c||s),f=Z,u!==null){const de=u.views;g!==null&&(e.setRenderTargetFramebuffer(m,g.framebuffer),e.setRenderTarget(m));let me=!1;de.length!==A.cameras.length&&(A.cameras.length=0,me=!0);for(let be=0;be<de.length;be++){const Re=de[be];let Ce=null;if(g!==null)Ce=g.getViewport(Re);else{const Ie=d.getViewSubImage(p,Re);Ce=Ie.viewport,be===0&&(e.setRenderTargetTextures(m,Ie.colorTexture,p.ignoreDepthValues?void 0:Ie.depthStencilTexture),e.setRenderTarget(m))}let _e=P[be];_e===void 0&&(_e=new ti,_e.layers.enable(be),_e.viewport=new Ft,P[be]=_e),_e.matrix.fromArray(Re.transform.matrix),_e.matrix.decompose(_e.position,_e.quaternion,_e.scale),_e.projectionMatrix.fromArray(Re.projectionMatrix),_e.projectionMatrixInverse.copy(_e.projectionMatrix).invert(),_e.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),be===0&&(A.matrix.copy(_e.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),me===!0&&A.cameras.push(_e)}}for(let de=0;de<M.length;de++){const me=b[de],be=M[de];me!==null&&be!==void 0&&be.update(me,Z,c||s)}j&&j(B,Z),Z.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Z}),f=null}const re=new Zp;re.setAnimationLoop(ne),this.setAnimationLoop=function(B){j=B},this.dispose=function(){}}}function zA(n,e){function t(h,m){h.matrixAutoUpdate===!0&&h.updateMatrix(),m.value.copy(h.matrix)}function i(h,m){m.color.getRGB(h.fogColor.value,qp(n)),m.isFog?(h.fogNear.value=m.near,h.fogFar.value=m.far):m.isFogExp2&&(h.fogDensity.value=m.density)}function a(h,m,M,b,w){m.isMeshBasicMaterial||m.isMeshLambertMaterial?r(h,m):m.isMeshToonMaterial?(r(h,m),d(h,m)):m.isMeshPhongMaterial?(r(h,m),u(h,m)):m.isMeshStandardMaterial?(r(h,m),p(h,m),m.isMeshPhysicalMaterial&&g(h,m,w)):m.isMeshMatcapMaterial?(r(h,m),f(h,m)):m.isMeshDepthMaterial?r(h,m):m.isMeshDistanceMaterial?(r(h,m),v(h,m)):m.isMeshNormalMaterial?r(h,m):m.isLineBasicMaterial?(s(h,m),m.isLineDashedMaterial&&o(h,m)):m.isPointsMaterial?l(h,m,M,b):m.isSpriteMaterial?c(h,m):m.isShadowMaterial?(h.color.value.copy(m.color),h.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function r(h,m){h.opacity.value=m.opacity,m.color&&h.diffuse.value.copy(m.color),m.emissive&&h.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(h.map.value=m.map,t(m.map,h.mapTransform)),m.alphaMap&&(h.alphaMap.value=m.alphaMap,t(m.alphaMap,h.alphaMapTransform)),m.bumpMap&&(h.bumpMap.value=m.bumpMap,t(m.bumpMap,h.bumpMapTransform),h.bumpScale.value=m.bumpScale,m.side===qn&&(h.bumpScale.value*=-1)),m.normalMap&&(h.normalMap.value=m.normalMap,t(m.normalMap,h.normalMapTransform),h.normalScale.value.copy(m.normalScale),m.side===qn&&h.normalScale.value.negate()),m.displacementMap&&(h.displacementMap.value=m.displacementMap,t(m.displacementMap,h.displacementMapTransform),h.displacementScale.value=m.displacementScale,h.displacementBias.value=m.displacementBias),m.emissiveMap&&(h.emissiveMap.value=m.emissiveMap,t(m.emissiveMap,h.emissiveMapTransform)),m.specularMap&&(h.specularMap.value=m.specularMap,t(m.specularMap,h.specularMapTransform)),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest);const M=e.get(m).envMap;if(M&&(h.envMap.value=M,h.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,h.reflectivity.value=m.reflectivity,h.ior.value=m.ior,h.refractionRatio.value=m.refractionRatio),m.lightMap){h.lightMap.value=m.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;h.lightMapIntensity.value=m.lightMapIntensity*b,t(m.lightMap,h.lightMapTransform)}m.aoMap&&(h.aoMap.value=m.aoMap,h.aoMapIntensity.value=m.aoMapIntensity,t(m.aoMap,h.aoMapTransform))}function s(h,m){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,m.map&&(h.map.value=m.map,t(m.map,h.mapTransform))}function o(h,m){h.dashSize.value=m.dashSize,h.totalSize.value=m.dashSize+m.gapSize,h.scale.value=m.scale}function l(h,m,M,b){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,h.size.value=m.size*M,h.scale.value=b*.5,m.map&&(h.map.value=m.map,t(m.map,h.uvTransform)),m.alphaMap&&(h.alphaMap.value=m.alphaMap,t(m.alphaMap,h.alphaMapTransform)),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest)}function c(h,m){h.diffuse.value.copy(m.color),h.opacity.value=m.opacity,h.rotation.value=m.rotation,m.map&&(h.map.value=m.map,t(m.map,h.mapTransform)),m.alphaMap&&(h.alphaMap.value=m.alphaMap,t(m.alphaMap,h.alphaMapTransform)),m.alphaTest>0&&(h.alphaTest.value=m.alphaTest)}function u(h,m){h.specular.value.copy(m.specular),h.shininess.value=Math.max(m.shininess,1e-4)}function d(h,m){m.gradientMap&&(h.gradientMap.value=m.gradientMap)}function p(h,m){h.metalness.value=m.metalness,m.metalnessMap&&(h.metalnessMap.value=m.metalnessMap,t(m.metalnessMap,h.metalnessMapTransform)),h.roughness.value=m.roughness,m.roughnessMap&&(h.roughnessMap.value=m.roughnessMap,t(m.roughnessMap,h.roughnessMapTransform)),e.get(m).envMap&&(h.envMapIntensity.value=m.envMapIntensity)}function g(h,m,M){h.ior.value=m.ior,m.sheen>0&&(h.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),h.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(h.sheenColorMap.value=m.sheenColorMap,t(m.sheenColorMap,h.sheenColorMapTransform)),m.sheenRoughnessMap&&(h.sheenRoughnessMap.value=m.sheenRoughnessMap,t(m.sheenRoughnessMap,h.sheenRoughnessMapTransform))),m.clearcoat>0&&(h.clearcoat.value=m.clearcoat,h.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(h.clearcoatMap.value=m.clearcoatMap,t(m.clearcoatMap,h.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(h.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,t(m.clearcoatRoughnessMap,h.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(h.clearcoatNormalMap.value=m.clearcoatNormalMap,t(m.clearcoatNormalMap,h.clearcoatNormalMapTransform),h.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===qn&&h.clearcoatNormalScale.value.negate())),m.iridescence>0&&(h.iridescence.value=m.iridescence,h.iridescenceIOR.value=m.iridescenceIOR,h.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],h.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(h.iridescenceMap.value=m.iridescenceMap,t(m.iridescenceMap,h.iridescenceMapTransform)),m.iridescenceThicknessMap&&(h.iridescenceThicknessMap.value=m.iridescenceThicknessMap,t(m.iridescenceThicknessMap,h.iridescenceThicknessMapTransform))),m.transmission>0&&(h.transmission.value=m.transmission,h.transmissionSamplerMap.value=M.texture,h.transmissionSamplerSize.value.set(M.width,M.height),m.transmissionMap&&(h.transmissionMap.value=m.transmissionMap,t(m.transmissionMap,h.transmissionMapTransform)),h.thickness.value=m.thickness,m.thicknessMap&&(h.thicknessMap.value=m.thicknessMap,t(m.thicknessMap,h.thicknessMapTransform)),h.attenuationDistance.value=m.attenuationDistance,h.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(h.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(h.anisotropyMap.value=m.anisotropyMap,t(m.anisotropyMap,h.anisotropyMapTransform))),h.specularIntensity.value=m.specularIntensity,h.specularColor.value.copy(m.specularColor),m.specularColorMap&&(h.specularColorMap.value=m.specularColorMap,t(m.specularColorMap,h.specularColorMapTransform)),m.specularIntensityMap&&(h.specularIntensityMap.value=m.specularIntensityMap,t(m.specularIntensityMap,h.specularIntensityMapTransform))}function f(h,m){m.matcap&&(h.matcap.value=m.matcap)}function v(h,m){const M=e.get(m).light;h.referencePosition.value.setFromMatrixPosition(M.matrixWorld),h.nearDistance.value=M.shadow.camera.near,h.farDistance.value=M.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:a}}function GA(n,e,t,i){let a={},r={},s=[];const o=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(M,b){const w=b.program;i.uniformBlockBinding(M,w)}function c(M,b){let w=a[M.id];w===void 0&&(f(M),w=u(M),a[M.id]=w,M.addEventListener("dispose",h));const R=b.program;i.updateUBOMapping(M,R);const P=e.render.frame;r[M.id]!==P&&(p(M),r[M.id]=P)}function u(M){const b=d();M.__bindingPointIndex=b;const w=n.createBuffer(),R=M.__size,P=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,w),n.bufferData(n.UNIFORM_BUFFER,R,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,w),w}function d(){for(let M=0;M<o;M++)if(s.indexOf(M)===-1)return s.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(M){const b=a[M.id],w=M.uniforms,R=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let P=0,A=w.length;P<A;P++){const G=w[P];if(g(G,P,R)===!0){const x=G.__offset,E=Array.isArray(G.value)?G.value:[G.value];let W=0;for(let q=0;q<E.length;q++){const D=E[q],I=v(D);typeof D=="number"?(G.__data[0]=D,n.bufferSubData(n.UNIFORM_BUFFER,x+W,G.__data)):D.isMatrix3?(G.__data[0]=D.elements[0],G.__data[1]=D.elements[1],G.__data[2]=D.elements[2],G.__data[3]=D.elements[0],G.__data[4]=D.elements[3],G.__data[5]=D.elements[4],G.__data[6]=D.elements[5],G.__data[7]=D.elements[0],G.__data[8]=D.elements[6],G.__data[9]=D.elements[7],G.__data[10]=D.elements[8],G.__data[11]=D.elements[0]):(D.toArray(G.__data,W),W+=I.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,x,G.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(M,b,w){const R=M.value;if(w[b]===void 0){if(typeof R=="number")w[b]=R;else{const P=Array.isArray(R)?R:[R],A=[];for(let G=0;G<P.length;G++)A.push(P[G].clone());w[b]=A}return!0}else if(typeof R=="number"){if(w[b]!==R)return w[b]=R,!0}else{const P=Array.isArray(w[b])?w[b]:[w[b]],A=Array.isArray(R)?R:[R];for(let G=0;G<P.length;G++){const x=P[G];if(x.equals(A[G])===!1)return x.copy(A[G]),!0}}return!1}function f(M){const b=M.uniforms;let w=0;const R=16;let P=0;for(let A=0,G=b.length;A<G;A++){const x=b[A],E={boundary:0,storage:0},W=Array.isArray(x.value)?x.value:[x.value];for(let q=0,D=W.length;q<D;q++){const I=W[q],F=v(I);E.boundary+=F.boundary,E.storage+=F.storage}if(x.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),x.__offset=w,A>0){P=w%R;const q=R-P;P!==0&&q-E.boundary<0&&(w+=R-P,x.__offset=w)}w+=E.storage}return P=w%R,P>0&&(w+=R-P),M.__size=w,M.__cache={},this}function v(M){const b={boundary:0,storage:0};return typeof M=="number"?(b.boundary=4,b.storage=4):M.isVector2?(b.boundary=8,b.storage=8):M.isVector3||M.isColor?(b.boundary=16,b.storage=12):M.isVector4?(b.boundary=16,b.storage=16):M.isMatrix3?(b.boundary=48,b.storage=48):M.isMatrix4?(b.boundary=64,b.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),b}function h(M){const b=M.target;b.removeEventListener("dispose",h);const w=s.indexOf(b.__bindingPointIndex);s.splice(w,1),n.deleteBuffer(a[b.id]),delete a[b.id],delete r[b.id]}function m(){for(const M in a)n.deleteBuffer(a[M]);s=[],a={},r={}}return{bind:l,update:c,dispose:m}}class rm{constructor(e={}){const{canvas:t=Ny(),context:i=null,depth:a=!0,stencil:r=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=s;const g=new Uint32Array(4),f=new Int32Array(4);let v=null,h=null;const m=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Nt,this._useLegacyLights=!1,this.toneMapping=Pa,this.toneMappingExposure=1;const b=this;let w=!1,R=0,P=0,A=null,G=-1,x=null;const E=new Ft,W=new Ft;let q=null;const D=new bt(0);let I=0,F=t.width,J=t.height,O=1,j=null,ne=null;const re=new Ft(0,0,F,J),B=new Ft(0,0,F,J);let Z=!1;const de=new Ou;let me=!1,be=!1,Re=null;const Ce=new Xt,_e=new He,Ie=new X,ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ze(){return A===null?O:1}let z=i;function Be(T,V){for(let K=0;K<T.length;K++){const Y=T[K],ee=t.getContext(Y,V);if(ee!==null)return ee}return null}try{const T={alpha:!0,depth:a,stencil:r,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Uu}`),t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",Q,!1),t.addEventListener("webglcontextcreationerror",fe,!1),z===null){const V=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&V.shift(),z=Be(V,T),z===null)throw Be(V)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),z.getShaderPrecisionFormat===void 0&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(T){throw console.error("THREE.WebGLRenderer: "+T.message),T}let Ee,Ue,Fe,lt,ye,we,Ge,ut,Pe,C,y,H,ce,ue,ge,ke,xe,te,L,$,oe,se,le,Le;function Ne(){Ee=new ZE(z),Ue=new jE(z,Ee,e),Ee.init(Ue),se=new NA(z,Ee,Ue),Fe=new kA(z,Ee,Ue),lt=new tw(z),ye=new bA,we=new UA(z,Ee,Fe,ye,Ue,se,lt),Ge=new qE(b),ut=new JE(b),Pe=new dS(z,Ue),le=new WE(z,Ee,Pe,Ue),C=new QE(z,Pe,lt,le),y=new rw(z,C,Pe,lt),L=new aw(z,Ue,we),ke=new XE(ye),H=new _A(b,Ge,ut,Ee,Ue,le,ke),ce=new zA(b,ye),ue=new yA,ge=new TA(Ee,Ue),te=new VE(b,Ge,ut,Fe,y,p,l),xe=new DA(b,y,Ue),Le=new GA(z,lt,Ue,Fe),$=new $E(z,Ee,lt,Ue),oe=new ew(z,Ee,lt,Ue),lt.programs=H.programs,b.capabilities=Ue,b.extensions=Ee,b.properties=ye,b.renderLists=ue,b.shadowMap=xe,b.state=Fe,b.info=lt}Ne();const k=new BA(b,z);this.xr=k,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const T=Ee.get("WEBGL_lose_context");T&&T.loseContext()},this.forceContextRestore=function(){const T=Ee.get("WEBGL_lose_context");T&&T.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(T){T!==void 0&&(O=T,this.setSize(F,J,!1))},this.getSize=function(T){return T.set(F,J)},this.setSize=function(T,V,K=!0){if(k.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=T,J=V,t.width=Math.floor(T*O),t.height=Math.floor(V*O),K===!0&&(t.style.width=T+"px",t.style.height=V+"px"),this.setViewport(0,0,T,V)},this.getDrawingBufferSize=function(T){return T.set(F*O,J*O).floor()},this.setDrawingBufferSize=function(T,V,K){F=T,J=V,O=K,t.width=Math.floor(T*K),t.height=Math.floor(V*K),this.setViewport(0,0,T,V)},this.getCurrentViewport=function(T){return T.copy(E)},this.getViewport=function(T){return T.copy(re)},this.setViewport=function(T,V,K,Y){T.isVector4?re.set(T.x,T.y,T.z,T.w):re.set(T,V,K,Y),Fe.viewport(E.copy(re).multiplyScalar(O).floor())},this.getScissor=function(T){return T.copy(B)},this.setScissor=function(T,V,K,Y){T.isVector4?B.set(T.x,T.y,T.z,T.w):B.set(T,V,K,Y),Fe.scissor(W.copy(B).multiplyScalar(O).floor())},this.getScissorTest=function(){return Z},this.setScissorTest=function(T){Fe.setScissorTest(Z=T)},this.setOpaqueSort=function(T){j=T},this.setTransparentSort=function(T){ne=T},this.getClearColor=function(T){return T.copy(te.getClearColor())},this.setClearColor=function(){te.setClearColor.apply(te,arguments)},this.getClearAlpha=function(){return te.getClearAlpha()},this.setClearAlpha=function(){te.setClearAlpha.apply(te,arguments)},this.clear=function(T=!0,V=!0,K=!0){let Y=0;if(T){let ee=!1;if(A!==null){const Te=A.texture.format;ee=Te===Ip||Te===Up||Te===kp}if(ee){const Te=A.texture.type,Oe=Te===La||Te===wa||Te===Iu||Te===er||Te===Lp||Te===Dp,$e=te.getClearColor(),Xe=te.getClearAlpha(),et=$e.r,qe=$e.g,Je=$e.b;Oe?(g[0]=et,g[1]=qe,g[2]=Je,g[3]=Xe,z.clearBufferuiv(z.COLOR,0,g)):(f[0]=et,f[1]=qe,f[2]=Je,f[3]=Xe,z.clearBufferiv(z.COLOR,0,f))}else Y|=z.COLOR_BUFFER_BIT}V&&(Y|=z.DEPTH_BUFFER_BIT),K&&(Y|=z.STENCIL_BUFFER_BIT),z.clear(Y)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",Q,!1),t.removeEventListener("webglcontextcreationerror",fe,!1),ue.dispose(),ge.dispose(),ye.dispose(),Ge.dispose(),ut.dispose(),y.dispose(),le.dispose(),Le.dispose(),H.dispose(),k.dispose(),k.removeEventListener("sessionstart",Qe),k.removeEventListener("sessionend",kt),Re&&(Re.dispose(),Re=null),xt.stop()};function pe(T){T.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Q(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const T=lt.autoReset,V=xe.enabled,K=xe.autoUpdate,Y=xe.needsUpdate,ee=xe.type;Ne(),lt.autoReset=T,xe.enabled=V,xe.autoUpdate=K,xe.needsUpdate=Y,xe.type=ee}function fe(T){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",T.statusMessage)}function ve(T){const V=T.target;V.removeEventListener("dispose",ve),We(V)}function We(T){Ke(T),ye.remove(T)}function Ke(T){const V=ye.get(T).programs;V!==void 0&&(V.forEach(function(K){H.releaseProgram(K)}),T.isShaderMaterial&&H.releaseShaderCache(T))}this.renderBufferDirect=function(T,V,K,Y,ee,Te){V===null&&(V=ct);const Oe=ee.isMesh&&ee.matrixWorld.determinant()<0,$e=Yn(T,V,K,Y,ee);Fe.setMaterial(Y,Oe);let Xe=K.index,et=1;if(Y.wireframe===!0){if(Xe=C.getWireframeAttribute(K),Xe===void 0)return;et=2}const qe=K.drawRange,Je=K.attributes.position;let yt=qe.start*et,Mt=(qe.start+qe.count)*et;Te!==null&&(yt=Math.max(yt,Te.start*et),Mt=Math.min(Mt,(Te.start+Te.count)*et)),Xe!==null?(yt=Math.max(yt,0),Mt=Math.min(Mt,Xe.count)):Je!=null&&(yt=Math.max(yt,0),Mt=Math.min(Mt,Je.count));const sn=Mt-yt;if(sn<0||sn===1/0)return;le.setup(ee,Y,$e,K,Xe);let En,Pt=$;if(Xe!==null&&(En=Pe.get(Xe),Pt=oe,Pt.setIndex(En)),ee.isMesh)Y.wireframe===!0?(Fe.setLineWidth(Y.wireframeLinewidth*ze()),Pt.setMode(z.LINES)):Pt.setMode(z.TRIANGLES);else if(ee.isLine){let tt=Y.linewidth;tt===void 0&&(tt=1),Fe.setLineWidth(tt*ze()),ee.isLineSegments?Pt.setMode(z.LINES):ee.isLineLoop?Pt.setMode(z.LINE_LOOP):Pt.setMode(z.LINE_STRIP)}else ee.isPoints?Pt.setMode(z.POINTS):ee.isSprite&&Pt.setMode(z.TRIANGLES);if(ee.isInstancedMesh)Pt.renderInstances(yt,sn,ee.count);else if(K.isInstancedBufferGeometry){const tt=K._maxInstanceCount!==void 0?K._maxInstanceCount:1/0,Li=Math.min(K.instanceCount,tt);Pt.renderInstances(yt,sn,Li)}else Pt.render(yt,sn)},this.compile=function(T,V){function K(Y,ee,Te){Y.transparent===!0&&Y.side===fi&&Y.forceSinglePass===!1?(Y.side=qn,Y.needsUpdate=!0,st(Y,ee,Te),Y.side=Gi,Y.needsUpdate=!0,st(Y,ee,Te),Y.side=fi):st(Y,ee,Te)}h=ge.get(T),h.init(),M.push(h),T.traverseVisible(function(Y){Y.isLight&&Y.layers.test(V.layers)&&(h.pushLight(Y),Y.castShadow&&h.pushShadow(Y))}),h.setupLights(b._useLegacyLights),T.traverse(function(Y){const ee=Y.material;if(ee)if(Array.isArray(ee))for(let Te=0;Te<ee.length;Te++){const Oe=ee[Te];K(Oe,T,Y)}else K(ee,T,Y)}),M.pop(),h=null};let Ye=null;function mt(T){Ye&&Ye(T)}function Qe(){xt.stop()}function kt(){xt.start()}const xt=new Zp;xt.setAnimationLoop(mt),typeof self<"u"&&xt.setContext(self),this.setAnimationLoop=function(T){Ye=T,k.setAnimationLoop(T),T===null?xt.stop():xt.start()},k.addEventListener("sessionstart",Qe),k.addEventListener("sessionend",kt),this.render=function(T,V){if(V!==void 0&&V.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;T.matrixWorldAutoUpdate===!0&&T.updateMatrixWorld(),V.parent===null&&V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),k.enabled===!0&&k.isPresenting===!0&&(k.cameraAutoUpdate===!0&&k.updateCamera(V),V=k.getCamera()),T.isScene===!0&&T.onBeforeRender(b,T,V,A),h=ge.get(T,M.length),h.init(),M.push(h),Ce.multiplyMatrices(V.projectionMatrix,V.matrixWorldInverse),de.setFromProjectionMatrix(Ce),be=this.localClippingEnabled,me=ke.init(this.clippingPlanes,be),v=ue.get(T,m.length),v.init(),m.push(v),Sn(T,V,0,b.sortObjects),v.finish(),b.sortObjects===!0&&v.sort(j,ne),this.info.render.frame++,me===!0&&ke.beginShadows();const K=h.state.shadowsArray;if(xe.render(K,T,V),me===!0&&ke.endShadows(),this.info.autoReset===!0&&this.info.reset(),te.render(v,T),h.setupLights(b._useLegacyLights),V.isArrayCamera){const Y=V.cameras;for(let ee=0,Te=Y.length;ee<Te;ee++){const Oe=Y[ee];Un(v,T,Oe,Oe.viewport)}}else Un(v,T,V);A!==null&&(we.updateMultisampleRenderTarget(A),we.updateRenderTargetMipmap(A)),T.isScene===!0&&T.onAfterRender(b,T,V),le.resetDefaultState(),G=-1,x=null,M.pop(),M.length>0?h=M[M.length-1]:h=null,m.pop(),m.length>0?v=m[m.length-1]:v=null};function Sn(T,V,K,Y){if(T.visible===!1)return;if(T.layers.test(V.layers)){if(T.isGroup)K=T.renderOrder;else if(T.isLOD)T.autoUpdate===!0&&T.update(V);else if(T.isLight)h.pushLight(T),T.castShadow&&h.pushShadow(T);else if(T.isSprite){if(!T.frustumCulled||de.intersectsSprite(T)){Y&&Ie.setFromMatrixPosition(T.matrixWorld).applyMatrix4(Ce);const Oe=y.update(T),$e=T.material;$e.visible&&v.push(T,Oe,$e,K,Ie.z,null)}}else if((T.isMesh||T.isLine||T.isPoints)&&(!T.frustumCulled||de.intersectsObject(T))){const Oe=y.update(T),$e=T.material;if(Y&&(T.boundingSphere!==void 0?(T.boundingSphere===null&&T.computeBoundingSphere(),Ie.copy(T.boundingSphere.center)):(Oe.boundingSphere===null&&Oe.computeBoundingSphere(),Ie.copy(Oe.boundingSphere.center)),Ie.applyMatrix4(T.matrixWorld).applyMatrix4(Ce)),Array.isArray($e)){const Xe=Oe.groups;for(let et=0,qe=Xe.length;et<qe;et++){const Je=Xe[et],yt=$e[Je.materialIndex];yt&&yt.visible&&v.push(T,Oe,yt,K,Ie.z,Je)}}else $e.visible&&v.push(T,Oe,$e,K,Ie.z,null)}}const Te=T.children;for(let Oe=0,$e=Te.length;Oe<$e;Oe++)Sn(Te[Oe],V,K,Y)}function Un(T,V,K,Y){const ee=T.opaque,Te=T.transmissive,Oe=T.transparent;h.setupLightsView(K),me===!0&&ke.setGlobalState(b.clippingPlanes,K),Te.length>0&&hn(ee,Te,V,K),Y&&Fe.viewport(E.copy(Y)),ee.length>0&&rn(ee,V,K),Te.length>0&&rn(Te,V,K),Oe.length>0&&rn(Oe,V,K),Fe.buffers.depth.setTest(!0),Fe.buffers.depth.setMask(!0),Fe.buffers.color.setMask(!0),Fe.setPolygonOffset(!1)}function hn(T,V,K,Y){const ee=Ue.isWebGL2;Re===null&&(Re=new ca(1,1,{generateMipmaps:!0,type:Ee.has("EXT_color_buffer_half_float")?ns:La,minFilter:qs,samples:ee?4:0})),b.getDrawingBufferSize(_e),ee?Re.setSize(_e.x,_e.y):Re.setSize(Jc(_e.x),Jc(_e.y));const Te=b.getRenderTarget();b.setRenderTarget(Re),b.getClearColor(D),I=b.getClearAlpha(),I<1&&b.setClearColor(16777215,.5),b.clear();const Oe=b.toneMapping;b.toneMapping=Pa,rn(T,K,Y),we.updateMultisampleRenderTarget(Re),we.updateRenderTargetMipmap(Re);let $e=!1;for(let Xe=0,et=V.length;Xe<et;Xe++){const qe=V[Xe],Je=qe.object,yt=qe.geometry,Mt=qe.material,sn=qe.group;if(Mt.side===fi&&Je.layers.test(Y.layers)){const En=Mt.side;Mt.side=qn,Mt.needsUpdate=!0,Mn(Je,K,Y,yt,Mt,sn),Mt.side=En,Mt.needsUpdate=!0,$e=!0}}$e===!0&&(we.updateMultisampleRenderTarget(Re),we.updateRenderTargetMipmap(Re)),b.setRenderTarget(Te),b.setClearColor(D,I),b.toneMapping=Oe}function rn(T,V,K){const Y=V.isScene===!0?V.overrideMaterial:null;for(let ee=0,Te=T.length;ee<Te;ee++){const Oe=T[ee],$e=Oe.object,Xe=Oe.geometry,et=Y===null?Oe.material:Y,qe=Oe.group;$e.layers.test(K.layers)&&Mn($e,V,K,Xe,et,qe)}}function Mn(T,V,K,Y,ee,Te){T.onBeforeRender(b,V,K,Y,ee,Te),T.modelViewMatrix.multiplyMatrices(K.matrixWorldInverse,T.matrixWorld),T.normalMatrix.getNormalMatrix(T.modelViewMatrix),ee.onBeforeRender(b,V,K,Y,T,Te),ee.transparent===!0&&ee.side===fi&&ee.forceSinglePass===!1?(ee.side=qn,ee.needsUpdate=!0,b.renderBufferDirect(K,V,Y,ee,T,Te),ee.side=Gi,ee.needsUpdate=!0,b.renderBufferDirect(K,V,Y,ee,T,Te),ee.side=fi):b.renderBufferDirect(K,V,Y,ee,T,Te),T.onAfterRender(b,V,K,Y,ee,Te)}function st(T,V,K){V.isScene!==!0&&(V=ct);const Y=ye.get(T),ee=h.state.lights,Te=h.state.shadowsArray,Oe=ee.state.version,$e=H.getParameters(T,ee.state,Te,V,K),Xe=H.getProgramCacheKey($e);let et=Y.programs;Y.environment=T.isMeshStandardMaterial?V.environment:null,Y.fog=V.fog,Y.envMap=(T.isMeshStandardMaterial?ut:Ge).get(T.envMap||Y.environment),et===void 0&&(T.addEventListener("dispose",ve),et=new Map,Y.programs=et);let qe=et.get(Xe);if(qe!==void 0){if(Y.currentProgram===qe&&Y.lightsStateVersion===Oe)return In(T,$e),qe}else $e.uniforms=H.getUniforms(T),T.onBuild(K,$e,b),T.onBeforeCompile($e,b),qe=H.acquireProgram($e,Xe),et.set(Xe,qe),Y.uniforms=$e.uniforms;const Je=Y.uniforms;(!T.isShaderMaterial&&!T.isRawShaderMaterial||T.clipping===!0)&&(Je.clippingPlanes=ke.uniform),In(T,$e),Y.needsLights=mn(T),Y.lightsStateVersion=Oe,Y.needsLights&&(Je.ambientLightColor.value=ee.state.ambient,Je.lightProbe.value=ee.state.probe,Je.directionalLights.value=ee.state.directional,Je.directionalLightShadows.value=ee.state.directionalShadow,Je.spotLights.value=ee.state.spot,Je.spotLightShadows.value=ee.state.spotShadow,Je.rectAreaLights.value=ee.state.rectArea,Je.ltc_1.value=ee.state.rectAreaLTC1,Je.ltc_2.value=ee.state.rectAreaLTC2,Je.pointLights.value=ee.state.point,Je.pointLightShadows.value=ee.state.pointShadow,Je.hemisphereLights.value=ee.state.hemi,Je.directionalShadowMap.value=ee.state.directionalShadowMap,Je.directionalShadowMatrix.value=ee.state.directionalShadowMatrix,Je.spotShadowMap.value=ee.state.spotShadowMap,Je.spotLightMatrix.value=ee.state.spotLightMatrix,Je.spotLightMap.value=ee.state.spotLightMap,Je.pointShadowMap.value=ee.state.pointShadowMap,Je.pointShadowMatrix.value=ee.state.pointShadowMatrix);const yt=qe.getUniforms(),Mt=qo.seqWithValue(yt.seq,Je);return Y.currentProgram=qe,Y.uniformsList=Mt,qe}function In(T,V){const K=ye.get(T);K.outputColorSpace=V.outputColorSpace,K.instancing=V.instancing,K.instancingColor=V.instancingColor,K.skinning=V.skinning,K.morphTargets=V.morphTargets,K.morphNormals=V.morphNormals,K.morphColors=V.morphColors,K.morphTargetsCount=V.morphTargetsCount,K.numClippingPlanes=V.numClippingPlanes,K.numIntersection=V.numClipIntersection,K.vertexAlphas=V.vertexAlphas,K.vertexTangents=V.vertexTangents,K.toneMapping=V.toneMapping}function Yn(T,V,K,Y,ee){V.isScene!==!0&&(V=ct),we.resetTextureUnits();const Te=V.fog,Oe=Y.isMeshStandardMaterial?V.environment:null,$e=A===null?b.outputColorSpace:A.isXRRenderTarget===!0?A.texture.colorSpace:Hi,Xe=(Y.isMeshStandardMaterial?ut:Ge).get(Y.envMap||Oe),et=Y.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,qe=!!K.attributes.tangent&&(!!Y.normalMap||Y.anisotropy>0),Je=!!K.morphAttributes.position,yt=!!K.morphAttributes.normal,Mt=!!K.morphAttributes.color;let sn=Pa;Y.toneMapped&&(A===null||A.isXRRenderTarget===!0)&&(sn=b.toneMapping);const En=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,Pt=En!==void 0?En.length:0,tt=ye.get(Y),Li=h.state.lights;if(me===!0&&(be===!0||T!==x)){const Qt=T===x&&Y.id===G;ke.setState(Y,T,Qt)}let Et=!1;Y.version===tt.__version?(tt.needsLights&&tt.lightsStateVersion!==Li.state.version||tt.outputColorSpace!==$e||ee.isInstancedMesh&&tt.instancing===!1||!ee.isInstancedMesh&&tt.instancing===!0||ee.isSkinnedMesh&&tt.skinning===!1||!ee.isSkinnedMesh&&tt.skinning===!0||ee.isInstancedMesh&&tt.instancingColor===!0&&ee.instanceColor===null||ee.isInstancedMesh&&tt.instancingColor===!1&&ee.instanceColor!==null||tt.envMap!==Xe||Y.fog===!0&&tt.fog!==Te||tt.numClippingPlanes!==void 0&&(tt.numClippingPlanes!==ke.numPlanes||tt.numIntersection!==ke.numIntersection)||tt.vertexAlphas!==et||tt.vertexTangents!==qe||tt.morphTargets!==Je||tt.morphNormals!==yt||tt.morphColors!==Mt||tt.toneMapping!==sn||Ue.isWebGL2===!0&&tt.morphTargetsCount!==Pt)&&(Et=!0):(Et=!0,tt.__version=Y.version);let wn=tt.currentProgram;Et===!0&&(wn=st(Y,V,ee));let Wi=!1,mi=!1,$i=!1;const wt=wn.getUniforms(),Zt=tt.uniforms;if(Fe.useProgram(wn.program)&&(Wi=!0,mi=!0,$i=!0),Y.id!==G&&(G=Y.id,mi=!0),Wi||x!==T){wt.setValue(z,"projectionMatrix",T.projectionMatrix),wt.setValue(z,"viewMatrix",T.matrixWorldInverse);const Qt=wt.map.cameraPosition;Qt!==void 0&&Qt.setValue(z,Ie.setFromMatrixPosition(T.matrixWorld)),Ue.logarithmicDepthBuffer&&wt.setValue(z,"logDepthBufFC",2/(Math.log(T.far+1)/Math.LN2)),(Y.isMeshPhongMaterial||Y.isMeshToonMaterial||Y.isMeshLambertMaterial||Y.isMeshBasicMaterial||Y.isMeshStandardMaterial||Y.isShaderMaterial)&&wt.setValue(z,"isOrthographic",T.isOrthographicCamera===!0),x!==T&&(x=T,mi=!0,$i=!0)}if(ee.isSkinnedMesh){wt.setOptional(z,ee,"bindMatrix"),wt.setOptional(z,ee,"bindMatrixInverse");const Qt=ee.skeleton;Qt&&(Ue.floatVertexTextures?(Qt.boneTexture===null&&Qt.computeBoneTexture(),wt.setValue(z,"boneTexture",Qt.boneTexture,we),wt.setValue(z,"boneTextureSize",Qt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Kn=K.morphAttributes;if((Kn.position!==void 0||Kn.normal!==void 0||Kn.color!==void 0&&Ue.isWebGL2===!0)&&L.update(ee,K,wn),(mi||tt.receiveShadow!==ee.receiveShadow)&&(tt.receiveShadow=ee.receiveShadow,wt.setValue(z,"receiveShadow",ee.receiveShadow)),Y.isMeshGouraudMaterial&&Y.envMap!==null&&(Zt.envMap.value=Xe,Zt.flipEnvMap.value=Xe.isCubeTexture&&Xe.isRenderTargetTexture===!1?-1:1),mi&&(wt.setValue(z,"toneMappingExposure",b.toneMappingExposure),tt.needsLights&&pn(Zt,$i),Te&&Y.fog===!0&&ce.refreshFogUniforms(Zt,Te),ce.refreshMaterialUniforms(Zt,Y,O,J,Re),qo.upload(z,tt.uniformsList,Zt,we)),Y.isShaderMaterial&&Y.uniformsNeedUpdate===!0&&(qo.upload(z,tt.uniformsList,Zt,we),Y.uniformsNeedUpdate=!1),Y.isSpriteMaterial&&wt.setValue(z,"center",ee.center),wt.setValue(z,"modelViewMatrix",ee.modelViewMatrix),wt.setValue(z,"normalMatrix",ee.normalMatrix),wt.setValue(z,"modelMatrix",ee.matrixWorld),Y.isShaderMaterial||Y.isRawShaderMaterial){const Qt=Y.uniformsGroups;for(let Di=0,Ua=Qt.length;Di<Ua;Di++)if(Ue.isWebGL2){const ji=Qt[Di];Le.update(ji,wn),Le.bind(ji,wn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return wn}function pn(T,V){T.ambientLightColor.needsUpdate=V,T.lightProbe.needsUpdate=V,T.directionalLights.needsUpdate=V,T.directionalLightShadows.needsUpdate=V,T.pointLights.needsUpdate=V,T.pointLightShadows.needsUpdate=V,T.spotLights.needsUpdate=V,T.spotLightShadows.needsUpdate=V,T.rectAreaLights.needsUpdate=V,T.hemisphereLights.needsUpdate=V}function mn(T){return T.isMeshLambertMaterial||T.isMeshToonMaterial||T.isMeshPhongMaterial||T.isMeshStandardMaterial||T.isShadowMaterial||T.isShaderMaterial&&T.lights===!0}this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(T,V,K){ye.get(T.texture).__webglTexture=V,ye.get(T.depthTexture).__webglTexture=K;const Y=ye.get(T);Y.__hasExternalTextures=!0,Y.__hasExternalTextures&&(Y.__autoAllocateDepthBuffer=K===void 0,Y.__autoAllocateDepthBuffer||Ee.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Y.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(T,V){const K=ye.get(T);K.__webglFramebuffer=V,K.__useDefaultFramebuffer=V===void 0},this.setRenderTarget=function(T,V=0,K=0){A=T,R=V,P=K;let Y=!0,ee=null,Te=!1,Oe=!1;if(T){const Xe=ye.get(T);Xe.__useDefaultFramebuffer!==void 0?(Fe.bindFramebuffer(z.FRAMEBUFFER,null),Y=!1):Xe.__webglFramebuffer===void 0?we.setupRenderTarget(T):Xe.__hasExternalTextures&&we.rebindTextures(T,ye.get(T.texture).__webglTexture,ye.get(T.depthTexture).__webglTexture);const et=T.texture;(et.isData3DTexture||et.isDataArrayTexture||et.isCompressedArrayTexture)&&(Oe=!0);const qe=ye.get(T).__webglFramebuffer;T.isWebGLCubeRenderTarget?(Array.isArray(qe[V])?ee=qe[V][K]:ee=qe[V],Te=!0):Ue.isWebGL2&&T.samples>0&&we.useMultisampledRTT(T)===!1?ee=ye.get(T).__webglMultisampledFramebuffer:Array.isArray(qe)?ee=qe[K]:ee=qe,E.copy(T.viewport),W.copy(T.scissor),q=T.scissorTest}else E.copy(re).multiplyScalar(O).floor(),W.copy(B).multiplyScalar(O).floor(),q=Z;if(Fe.bindFramebuffer(z.FRAMEBUFFER,ee)&&Ue.drawBuffers&&Y&&Fe.drawBuffers(T,ee),Fe.viewport(E),Fe.scissor(W),Fe.setScissorTest(q),Te){const Xe=ye.get(T.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+V,Xe.__webglTexture,K)}else if(Oe){const Xe=ye.get(T.texture),et=V||0;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,Xe.__webglTexture,K||0,et)}G=-1},this.readRenderTargetPixels=function(T,V,K,Y,ee,Te,Oe){if(!(T&&T.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let $e=ye.get(T).__webglFramebuffer;if(T.isWebGLCubeRenderTarget&&Oe!==void 0&&($e=$e[Oe]),$e){Fe.bindFramebuffer(z.FRAMEBUFFER,$e);try{const Xe=T.texture,et=Xe.format,qe=Xe.type;if(et!==Ei&&se.convert(et)!==z.getParameter(z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Je=qe===ns&&(Ee.has("EXT_color_buffer_half_float")||Ue.isWebGL2&&Ee.has("EXT_color_buffer_float"));if(qe!==La&&se.convert(qe)!==z.getParameter(z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(qe===na&&(Ue.isWebGL2||Ee.has("OES_texture_float")||Ee.has("WEBGL_color_buffer_float")))&&!Je){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}V>=0&&V<=T.width-Y&&K>=0&&K<=T.height-ee&&z.readPixels(V,K,Y,ee,se.convert(et),se.convert(qe),Te)}finally{const Xe=A!==null?ye.get(A).__webglFramebuffer:null;Fe.bindFramebuffer(z.FRAMEBUFFER,Xe)}}},this.copyFramebufferToTexture=function(T,V,K=0){const Y=Math.pow(2,-K),ee=Math.floor(V.image.width*Y),Te=Math.floor(V.image.height*Y);we.setTexture2D(V,0),z.copyTexSubImage2D(z.TEXTURE_2D,K,0,0,T.x,T.y,ee,Te),Fe.unbindTexture()},this.copyTextureToTexture=function(T,V,K,Y=0){const ee=V.image.width,Te=V.image.height,Oe=se.convert(K.format),$e=se.convert(K.type);we.setTexture2D(K,0),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,K.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,K.unpackAlignment),V.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,Y,T.x,T.y,ee,Te,Oe,$e,V.image.data):V.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,Y,T.x,T.y,V.mipmaps[0].width,V.mipmaps[0].height,Oe,V.mipmaps[0].data):z.texSubImage2D(z.TEXTURE_2D,Y,T.x,T.y,Oe,$e,V.image),Y===0&&K.generateMipmaps&&z.generateMipmap(z.TEXTURE_2D),Fe.unbindTexture()},this.copyTextureToTexture3D=function(T,V,K,Y,ee=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Te=T.max.x-T.min.x+1,Oe=T.max.y-T.min.y+1,$e=T.max.z-T.min.z+1,Xe=se.convert(Y.format),et=se.convert(Y.type);let qe;if(Y.isData3DTexture)we.setTexture3D(Y,0),qe=z.TEXTURE_3D;else if(Y.isDataArrayTexture)we.setTexture2DArray(Y,0),qe=z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,Y.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,Y.unpackAlignment);const Je=z.getParameter(z.UNPACK_ROW_LENGTH),yt=z.getParameter(z.UNPACK_IMAGE_HEIGHT),Mt=z.getParameter(z.UNPACK_SKIP_PIXELS),sn=z.getParameter(z.UNPACK_SKIP_ROWS),En=z.getParameter(z.UNPACK_SKIP_IMAGES),Pt=K.isCompressedTexture?K.mipmaps[0]:K.image;z.pixelStorei(z.UNPACK_ROW_LENGTH,Pt.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Pt.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,T.min.x),z.pixelStorei(z.UNPACK_SKIP_ROWS,T.min.y),z.pixelStorei(z.UNPACK_SKIP_IMAGES,T.min.z),K.isDataTexture||K.isData3DTexture?z.texSubImage3D(qe,ee,V.x,V.y,V.z,Te,Oe,$e,Xe,et,Pt.data):K.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(qe,ee,V.x,V.y,V.z,Te,Oe,$e,Xe,Pt.data)):z.texSubImage3D(qe,ee,V.x,V.y,V.z,Te,Oe,$e,Xe,et,Pt),z.pixelStorei(z.UNPACK_ROW_LENGTH,Je),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,yt),z.pixelStorei(z.UNPACK_SKIP_PIXELS,Mt),z.pixelStorei(z.UNPACK_SKIP_ROWS,sn),z.pixelStorei(z.UNPACK_SKIP_IMAGES,En),ee===0&&Y.generateMipmaps&&z.generateMipmap(qe),Fe.unbindTexture()},this.initTexture=function(T){T.isCubeTexture?we.setTextureCube(T,0):T.isData3DTexture?we.setTexture3D(T,0):T.isDataArrayTexture||T.isCompressedArrayTexture?we.setTexture2DArray(T,0):we.setTexture2D(T,0),Fe.unbindTexture()},this.resetState=function(){R=0,P=0,A=null,Fe.reset(),le.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ia}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Nt?nr:Np}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===nr?Nt:Hi}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class HA extends rm{}HA.prototype.isWebGL1Renderer=!0;class VA extends kn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class WA{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=qc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Da()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let a=0,r=this.stride;a<r;a++)this.array[e+a]=t.array[i+a];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Da()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Da()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const On=new X;class cl{constructor(e,t,i,a=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=a}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)On.fromBufferAttribute(this,t),On.applyMatrix4(e),this.setXYZ(t,On.x,On.y,On.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)On.fromBufferAttribute(this,t),On.applyNormalMatrix(e),this.setXYZ(t,On.x,On.y,On.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)On.fromBufferAttribute(this,t),On.transformDirection(e),this.setXYZ(t,On.x,On.y,On.z);return this}setX(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ct(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ta(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ta(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ta(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ta(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,a){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),a=Ct(a,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this}setXYZW(e,t,i,a,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ct(t,this.array),i=Ct(i,this.array),a=Ct(a,this.array),r=Ct(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=a,this.data.array[e+3]=r,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return new Ai(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new cl(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const a=i*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[a+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class sm extends ds{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ur;const As=new X,Ir=new X,Nr=new X,Or=new He,Ts=new He,om=new Xt,ko=new X,Rs=new X,Uo=new X,Gf=new He,Ec=new He,Hf=new He;class $A extends kn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Ur===void 0){Ur=new ha;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new WA(t,5);Ur.setIndex([0,1,2,0,2,3]),Ur.setAttribute("position",new cl(i,3,0,!1)),Ur.setAttribute("uv",new cl(i,2,3,!1))}this.geometry=Ur,this.material=e!==void 0?e:new sm,this.center=new He(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ir.setFromMatrixScale(this.matrixWorld),om.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Nr.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ir.multiplyScalar(-Nr.z);const i=this.material.rotation;let a,r;i!==0&&(r=Math.cos(i),a=Math.sin(i));const s=this.center;Io(ko.set(-.5,-.5,0),Nr,s,Ir,a,r),Io(Rs.set(.5,-.5,0),Nr,s,Ir,a,r),Io(Uo.set(.5,.5,0),Nr,s,Ir,a,r),Gf.set(0,0),Ec.set(1,0),Hf.set(1,1);let o=e.ray.intersectTriangle(ko,Rs,Uo,!1,As);if(o===null&&(Io(Rs.set(-.5,.5,0),Nr,s,Ir,a,r),Ec.set(0,1),o=e.ray.intersectTriangle(ko,Uo,Rs,!1,As),o===null))return;const l=e.ray.origin.distanceTo(As);l<e.near||l>e.far||t.push({distance:l,point:As.clone(),uv:di.getInterpolation(As,ko,Rs,Uo,Gf,Ec,Hf,new He),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Io(n,e,t,i,a,r){Or.subVectors(n,t).addScalar(.5).multiply(i),a!==void 0?(Ts.x=r*Or.x-a*Or.y,Ts.y=a*Or.x+r*Or.y):Ts.copy(Or),n.copy(e),n.x+=Ts.x,n.y+=Ts.y,n.applyMatrix4(om)}class Yo extends Dn{constructor(e,t,i,a,r,s,o,l,c){super(e,t,i,a,r,s,o,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ys extends ds{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Op,this.normalScale=new He(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lm extends kn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}const wc=new Xt,Vf=new X,Wf=new X;class jA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new He(512,512),this.map=null,this.mapPass=null,this.matrix=new Xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ou,this._frameExtents=new He(1,1),this._viewportCount=1,this._viewports=[new Ft(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Vf.setFromMatrixPosition(e.matrixWorld),t.position.copy(Vf),Wf.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Wf),t.updateMatrixWorld(),wc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wc),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(wc)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}const $f=new Xt,Cs=new X,Ac=new X;class XA extends jA{constructor(){super(new ti(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new He(4,2),this._viewportCount=6,this._viewports=[new Ft(2,1,1,1),new Ft(0,1,1,1),new Ft(3,1,1,1),new Ft(1,1,1,1),new Ft(3,0,1,1),new Ft(1,0,1,1)],this._cubeDirections=[new X(1,0,0),new X(-1,0,0),new X(0,0,1),new X(0,0,-1),new X(0,1,0),new X(0,-1,0)],this._cubeUps=[new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,1,0),new X(0,0,1),new X(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,a=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),Cs.setFromMatrixPosition(e.matrixWorld),i.position.copy(Cs),Ac.copy(i.position),Ac.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Ac),i.updateMatrixWorld(),a.makeTranslation(-Cs.x,-Cs.y,-Cs.z),$f.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($f)}}class qA extends lm{constructor(e,t,i=0,a=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=a,this.shadow=new XA}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class YA extends lm{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class cm{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=jf(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=jf();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function jf(){return(typeof performance>"u"?Date:performance).now()}class Xf{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(zn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Uu}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Uu);function zu(n,e,t,i,a,r,s,o){const l=(A,G,x,E)=>[new He(A/s,1-E/o),new He(x/s,1-E/o),new He(x/s,1-G/o),new He(A/s,1-G/o)],c=l(e+r,t,e+i+r,t+r),u=l(e+i+r,t,e+i*2+r,t+r),d=l(e,t+r,e+r,t+r+a),p=l(e+r,t+r,e+i+r,t+r+a),g=l(e+i+r,t+r,e+i+r*2,t+a+r),f=l(e+i+r*2,t+r,e+i*2+r*2,t+a+r),v=n.attributes.uv,h=[g[3],g[2],g[0],g[1]],m=[d[3],d[2],d[0],d[1]],M=[c[3],c[2],c[0],c[1]],b=[u[0],u[1],u[3],u[2]],w=[p[3],p[2],p[0],p[1]],R=[f[3],f[2],f[0],f[1]],P=[];for(const A of[h,m,M,b,w,R])for(const G of A)P.push(G.x,G.y);v.set(new Float32Array(P)),v.needsUpdate=!0}function oi(n,e,t,i,a,r){zu(n,e,t,i,a,r,64,64)}function Qc(n,e,t,i,a,r){zu(n,e,t,i,a,r,64,32)}class za extends xn{constructor(e,t){super(),Object.defineProperty(this,"innerLayer",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"outerLayer",{enumerable:!0,configurable:!0,writable:!0,value:t}),e.name="inner",t.name="outer"}}class KA extends xn{constructor(){super(),Object.defineProperty(this,"head",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rightArm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftArm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rightLeg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftLeg",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelListeners",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"slim",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_map",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"layer1Material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layer1MaterialBiased",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layer2Material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layer2MaterialBiased",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.layer1Material=new Ys({side:Gi}),this.layer2Material=new Ys({side:fi,transparent:!0,alphaTest:1e-5}),this.layer1MaterialBiased=this.layer1Material.clone(),this.layer1MaterialBiased.polygonOffset=!0,this.layer1MaterialBiased.polygonOffsetFactor=1,this.layer1MaterialBiased.polygonOffsetUnits=1,this.layer2MaterialBiased=this.layer2Material.clone(),this.layer2MaterialBiased.polygonOffset=!0,this.layer2MaterialBiased.polygonOffsetFactor=1,this.layer2MaterialBiased.polygonOffsetUnits=1;const e=new Wt(8,8,8);oi(e,0,0,8,8,8);const t=new Lt(e,this.layer1Material),i=new Wt(9,9,9);oi(i,32,0,8,8,8);const a=new Lt(i,this.layer2Material);this.head=new za(t,a),this.head.name="head",this.head.add(t,a),t.position.y=4,a.position.y=4,this.add(this.head);const r=new Wt(8,12,4);oi(r,16,16,8,12,4);const s=new Lt(r,this.layer1Material),o=new Wt(8.5,12.5,4.5);oi(o,16,32,8,12,4);const l=new Lt(o,this.layer2Material);this.body=new za(s,l),this.body.name="body",this.body.add(s,l),this.body.position.y=-6,this.add(this.body);const c=new Wt,u=new Lt(c,this.layer1MaterialBiased);this.modelListeners.push(()=>{u.scale.x=this.slim?3:4,u.scale.y=12,u.scale.z=4,oi(c,40,16,this.slim?3:4,12,4)});const d=new Wt,p=new Lt(d,this.layer2MaterialBiased);this.modelListeners.push(()=>{p.scale.x=this.slim?3.5:4.5,p.scale.y=12.5,p.scale.z=4.5,oi(d,40,32,this.slim?3:4,12,4)});const g=new xn;g.add(u,p),this.modelListeners.push(()=>{g.position.x=this.slim?-.5:-1}),g.position.y=-4,this.rightArm=new za(u,p),this.rightArm.name="rightArm",this.rightArm.add(g),this.rightArm.position.x=-5,this.rightArm.position.y=-2,this.add(this.rightArm);const f=new Wt,v=new Lt(f,this.layer1MaterialBiased);this.modelListeners.push(()=>{v.scale.x=this.slim?3:4,v.scale.y=12,v.scale.z=4,oi(f,32,48,this.slim?3:4,12,4)});const h=new Wt,m=new Lt(h,this.layer2MaterialBiased);this.modelListeners.push(()=>{m.scale.x=this.slim?3.5:4.5,m.scale.y=12.5,m.scale.z=4.5,oi(h,48,48,this.slim?3:4,12,4)});const M=new xn;M.add(v,m),this.modelListeners.push(()=>{M.position.x=this.slim?.5:1}),M.position.y=-4,this.leftArm=new za(v,m),this.leftArm.name="leftArm",this.leftArm.add(M),this.leftArm.position.x=5,this.leftArm.position.y=-2,this.add(this.leftArm);const b=new Wt(4,12,4);oi(b,0,16,4,12,4);const w=new Lt(b,this.layer1MaterialBiased),R=new Wt(4.5,12.5,4.5);oi(R,0,32,4,12,4);const P=new Lt(R,this.layer2MaterialBiased),A=new xn;A.add(w,P),A.position.y=-6,this.rightLeg=new za(w,P),this.rightLeg.name="rightLeg",this.rightLeg.add(A),this.rightLeg.position.x=-1.9,this.rightLeg.position.y=-12,this.rightLeg.position.z=-.1,this.add(this.rightLeg);const G=new Wt(4,12,4);oi(G,16,48,4,12,4);const x=new Lt(G,this.layer1MaterialBiased),E=new Wt(4.5,12.5,4.5);oi(E,0,48,4,12,4);const W=new Lt(E,this.layer2MaterialBiased),q=new xn;q.add(x,W),q.position.y=-6,this.leftLeg=new za(x,W),this.leftLeg.name="leftLeg",this.leftLeg.add(q),this.leftLeg.position.x=1.9,this.leftLeg.position.y=-12,this.leftLeg.position.z=-.1,this.add(this.leftLeg),this.modelType="default"}get map(){return this._map}set map(e){this._map=e,this.layer1Material.map=e,this.layer1Material.needsUpdate=!0,this.layer1MaterialBiased.map=e,this.layer1MaterialBiased.needsUpdate=!0,this.layer2Material.map=e,this.layer2Material.needsUpdate=!0,this.layer2MaterialBiased.map=e,this.layer2MaterialBiased.needsUpdate=!0}get modelType(){return this.slim?"slim":"default"}set modelType(e){this.slim=e==="slim",this.modelListeners.forEach(t=>t())}getBodyParts(){return this.children.filter(e=>e instanceof za)}setInnerLayerVisible(e){this.getBodyParts().forEach(t=>t.innerLayer.visible=e)}setOuterLayerVisible(e){this.getBodyParts().forEach(t=>t.outerLayer.visible=e)}resetJoints(){this.head.rotation.set(0,0,0),this.leftArm.rotation.set(0,0,0),this.rightArm.rotation.set(0,0,0),this.leftLeg.rotation.set(0,0,0),this.rightLeg.rotation.set(0,0,0),this.body.rotation.set(0,0,0),this.head.position.y=0,this.body.position.y=-6,this.body.position.z=0,this.rightArm.position.x=-5,this.rightArm.position.y=-2,this.rightArm.position.z=0,this.leftArm.position.x=5,this.leftArm.position.y=-2,this.leftArm.position.z=0,this.rightLeg.position.x=-1.9,this.rightLeg.position.y=-12,this.rightLeg.position.z=-.1,this.leftLeg.position.x=1.9,this.leftLeg.position.y=-12,this.leftLeg.position.z=-.1}}class JA extends xn{constructor(){super(),Object.defineProperty(this,"cape",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.material=new Ys({side:fi,transparent:!0,alphaTest:1e-5});const e=new Wt(10,16,1);Qc(e,0,0,10,16,1),this.cape=new Lt(e,this.material),this.cape.position.y=-8,this.cape.position.z=.5,this.add(this.cape)}get map(){return this.material.map}set map(e){this.material.map=e,this.material.needsUpdate=!0}}class ZA extends xn{constructor(){super(),Object.defineProperty(this,"leftWing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"rightWing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.material=new Ys({side:fi,transparent:!0,alphaTest:1e-5});const e=new Wt(12,22,4);Qc(e,22,0,10,20,2);const t=new Lt(e,this.material);t.position.x=-5,t.position.y=-10,t.position.z=-1,this.leftWing=new xn,this.leftWing.add(t),this.add(this.leftWing);const i=new Wt(12,22,4);Qc(i,22,0,10,20,2);const a=new Lt(i,this.material);a.scale.x=-1,a.position.x=5,a.position.y=-10,a.position.z=-1,this.rightWing=new xn,this.rightWing.add(a),this.add(this.rightWing),this.leftWing.position.x=5,this.leftWing.rotation.x=.2617994,this.resetJoints()}resetJoints(){this.leftWing.rotation.y=.01,this.leftWing.rotation.z=.2617994,this.updateRightWing()}updateRightWing(){this.rightWing.position.x=-this.leftWing.position.x,this.rightWing.position.y=this.leftWing.position.y,this.rightWing.rotation.x=this.leftWing.rotation.x,this.rightWing.rotation.y=-this.leftWing.rotation.y,this.rightWing.rotation.z=-this.leftWing.rotation.z}get map(){return this.material.map}set map(e){this.material.map=e,this.material.needsUpdate=!0}}class QA extends xn{constructor(){super(),Object.defineProperty(this,"rightEar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"leftEar",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"material",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.material=new Ys({side:Gi});const e=new Wt(8,8,4/3);zu(e,0,0,6,6,1,14,7),this.rightEar=new Lt(e,this.material),this.rightEar.name="rightEar",this.rightEar.position.x=-6,this.add(this.rightEar),this.leftEar=new Lt(e,this.material),this.leftEar.name="leftEar",this.leftEar.position.x=6,this.add(this.leftEar)}get map(){return this.material.map}set map(e){this.material.map=e,this.material.needsUpdate=!0}}const qf=10.8*Math.PI/180;class eT extends xn{constructor(){super(),Object.defineProperty(this,"skin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cape",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"elytra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ears",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.skin=new KA,this.skin.name="skin",this.skin.position.y=8,this.add(this.skin),this.cape=new JA,this.cape.name="cape",this.cape.position.y=8,this.cape.position.z=-2,this.cape.rotation.x=qf,this.cape.rotation.y=Math.PI,this.add(this.cape),this.elytra=new ZA,this.elytra.name="elytra",this.elytra.position.y=8,this.elytra.position.z=-2,this.elytra.visible=!1,this.add(this.elytra),this.ears=new QA,this.ears.name="ears",this.ears.position.y=10,this.ears.position.z=2/3,this.ears.visible=!1,this.skin.head.add(this.ears)}get backEquipment(){return this.cape.visible?"cape":this.elytra.visible?"elytra":null}set backEquipment(e){this.cape.visible=e==="cape",this.elytra.visible=e==="elytra"}resetJoints(){this.skin.resetJoints(),this.cape.rotation.x=qf,this.cape.position.y=8,this.cape.position.z=-2,this.elytra.position.y=8,this.elytra.position.z=-2,this.elytra.rotation.x=0,this.elytra.resetJoints()}}function No(n){return n instanceof HTMLImageElement||n instanceof HTMLVideoElement||n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas}function eu(n,e,t,i,a){const r=n.getImageData(e,t,i,a);for(let s=0;s<i;s++)for(let o=0;o<a;o++){const l=(s+o*i)*4;if(r.data[l+3]!==255)return!0}return!1}function Ll(n){return n/64}function Yf(n,e,t){if(t){if(eu(n,0,0,e,e))return}else if(eu(n,0,0,e,e/2))return;const i=Ll(e),a=(r,s,o,l)=>n.clearRect(r*i,s*i,o*i,l*i);a(40,0,8,8),a(48,0,8,8),a(32,8,8,8),a(40,8,8,8),a(48,8,8,8),a(56,8,8,8),t&&(a(4,32,4,4),a(8,32,4,4),a(0,36,4,12),a(4,36,4,12),a(8,36,4,12),a(12,36,4,12),a(20,32,8,4),a(28,32,8,4),a(16,36,4,12),a(20,36,8,12),a(28,36,4,12),a(32,36,8,12),a(44,32,4,4),a(48,32,4,4),a(40,36,4,12),a(44,36,4,12),a(48,36,4,12),a(52,36,12,12),a(4,48,4,4),a(8,48,4,4),a(0,52,4,12),a(4,52,4,12),a(8,52,4,12),a(12,52,4,12),a(52,48,4,4),a(56,48,4,4),a(48,52,4,12),a(52,52,4,12),a(56,52,4,12),a(60,52,4,12))}function tT(n,e){n.save(),n.scale(-1,1);const t=Ll(e),i=(a,r,s,o,l,c)=>n.drawImage(n.canvas,a*t,r*t,s*t,o*t,-l*t,c*t,-s*t,o*t);i(4,16,4,4,20,48),i(8,16,4,4,24,48),i(0,20,4,12,24,52),i(4,20,4,12,20,52),i(8,20,4,12,16,52),i(12,20,4,12,28,52),i(44,16,4,4,36,48),i(48,16,4,4,40,48),i(40,20,4,12,40,52),i(44,20,4,12,36,52),i(48,20,4,12,32,52),i(52,20,4,12,44,52),n.restore()}function nT(n,e){let t=!1;if(e.width!==e.height)if(e.width===2*e.height)t=!0;else throw new Error(`Bad skin size: ${e.width}x${e.height}`);const i=n.getContext("2d",{willReadFrequently:!0});if(t){const a=e.width;n.width=a,n.height=a,i.clearRect(0,0,a,a),i.drawImage(e,0,0,a,a/2),tT(i,a),Yf(i,n.width,!1)}else n.width=e.width,n.height=e.height,i.clearRect(0,0,e.width,e.height),i.drawImage(e,0,0,n.width,n.height),Yf(i,n.width,!0)}function iT(n){if(n.width===2*n.height)return n.width/64;if(n.width*17===n.height*22)return n.width/22;if(n.width*11===n.height*23)return n.width/46;throw new Error(`Bad cape size: ${n.width}x${n.height}`)}function aT(n,e){const t=iT(e);n.width=64*t,n.height=32*t;const i=n.getContext("2d",{willReadFrequently:!0});i.clearRect(0,0,n.width,n.height),i.drawImage(e,0,0,e.width,e.height)}function rT(n,e,t,i,a){const r=n.getImageData(e,t,i,a);for(let s=0;s<i;s++)for(let o=0;o<a;o++){const l=(s+o*i)*4;if(!(r.data[l+0]===0&&r.data[l+1]===0&&r.data[l+2]===0&&r.data[l+3]===255))return!1}return!0}function sT(n,e,t,i,a){const r=n.getImageData(e,t,i,a);for(let s=0;s<i;s++)for(let o=0;o<a;o++){const l=(s+o*i)*4;if(!(r.data[l+0]===255&&r.data[l+1]===255&&r.data[l+2]===255&&r.data[l+3]===255))return!1}return!0}function oT(n){const e=Ll(n.width),t=n.getContext("2d",{willReadFrequently:!0}),i=(o,l,c,u)=>eu(t,o*e,l*e,c*e,u*e),a=(o,l,c,u)=>rT(t,o*e,l*e,c*e,u*e),r=(o,l,c,u)=>sT(t,o*e,l*e,c*e,u*e);return i(50,16,2,4)||i(54,20,2,12)||i(42,48,2,4)||i(46,52,2,12)||a(50,16,2,4)&&a(54,20,2,12)&&a(42,48,2,4)&&a(46,52,2,12)||r(50,16,2,4)&&r(54,20,2,12)&&r(42,48,2,4)&&r(46,52,2,12)?"slim":"default"}function lT(n){if(n.width===n.height*2&&n.height%7===0)return n.height/7;throw new Error(`Bad ears size: ${n.width}x${n.height}`)}function cT(n,e){const t=lT(e);n.width=14*t,n.height=7*t;const i=n.getContext("2d",{willReadFrequently:!0});i.clearRect(0,0,n.width,n.height),i.drawImage(e,0,0,e.width,e.height)}function Kf(n,e){if(e.width!==e.height&&e.width!==2*e.height)throw new Error(`Bad skin size: ${e.width}x${e.height}`);const t=Ll(e.width),i=14*t,a=7*t;n.width=i,n.height=a;const r=n.getContext("2d",{willReadFrequently:!0});r.clearRect(0,0,i,a),r.drawImage(e,24*t,0,i,a,0,0,i,a)}async function Oo(n){const e=document.createElement("img");return new Promise((t,i)=>{e.onload=()=>t(e),e.onerror=i,e.crossOrigin="anonymous",typeof n=="string"?e.src=n:(n.crossOrigin!==void 0&&(e.crossOrigin=n.crossOrigin),n.referrerPolicy!==void 0&&(e.referrerPolicy=n.referrerPolicy),e.src=n.src)})}const Jf={type:"change"},Tc={type:"start"},Zf={type:"end"},Fo=new Hp,Qf=new ba,uT=Math.cos(70*Iy.DEG2RAD);class dT extends fr{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new X,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:gr.ROTATE,MIDDLE:gr.DOLLY,RIGHT:gr.PAN},this.touches={ONE:vr.ROTATE,TWO:vr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return o.phi},this.getAzimuthalAngle=function(){return o.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(L){L.addEventListener("keydown",y),this._domElementKeyEvents=L},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",y),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(Jf),i.update(),r=a.NONE},this.update=(function(){const L=new X,$=new rr().setFromUnitVectors(e.up,new X(0,1,0)),oe=$.clone().invert(),se=new X,le=new rr,Le=new X,Ne=2*Math.PI;return function(pe=null){const Q=i.object.position;L.copy(Q).sub(i.target),L.applyQuaternion($),o.setFromVector3(L),i.autoRotate&&r===a.NONE&&W(x(pe)),i.enableDamping?(o.theta+=l.theta*i.dampingFactor,o.phi+=l.phi*i.dampingFactor):(o.theta+=l.theta,o.phi+=l.phi);let fe=i.minAzimuthAngle,ve=i.maxAzimuthAngle;isFinite(fe)&&isFinite(ve)&&(fe<-Math.PI?fe+=Ne:fe>Math.PI&&(fe-=Ne),ve<-Math.PI?ve+=Ne:ve>Math.PI&&(ve-=Ne),fe<=ve?o.theta=Math.max(fe,Math.min(ve,o.theta)):o.theta=o.theta>(fe+ve)/2?Math.max(fe,o.theta):Math.min(ve,o.theta)),o.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,o.phi)),o.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.zoomToCursor&&P||i.object.isOrthographicCamera?o.radius=ne(o.radius):o.radius=ne(o.radius*c),L.setFromSpherical(o),L.applyQuaternion(oe),Q.copy(i.target).add(L),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let We=!1;if(i.zoomToCursor&&P){let Ke=null;if(i.object.isPerspectiveCamera){const Ye=L.length();Ke=ne(Ye*c);const mt=Ye-Ke;i.object.position.addScaledVector(w,mt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Ye=new X(R.x,R.y,0);Ye.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),We=!0;const mt=new X(R.x,R.y,0);mt.unproject(i.object),i.object.position.sub(mt).add(Ye),i.object.updateMatrixWorld(),Ke=L.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ke!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ke).add(i.object.position):(Fo.origin.copy(i.object.position),Fo.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Fo.direction))<uT?e.lookAt(i.target):(Qf.setFromNormalAndCoplanarPoint(i.object.up,i.target),Fo.intersectPlane(Qf,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),We=!0);return c=1,P=!1,We||se.distanceToSquared(i.object.position)>s||8*(1-le.dot(i.object.quaternion))>s||Le.distanceToSquared(i.target)>0?(i.dispatchEvent(Jf),se.copy(i.object.position),le.copy(i.object.quaternion),Le.copy(i.target),We=!1,!0):!1}})(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",ue),i.domElement.removeEventListener("pointerdown",ye),i.domElement.removeEventListener("pointercancel",Ge),i.domElement.removeEventListener("wheel",C),i.domElement.removeEventListener("pointermove",we),i.domElement.removeEventListener("pointerup",Ge),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",y),i._domElementKeyEvents=null)};const i=this,a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let r=a.NONE;const s=1e-6,o=new Xf,l=new Xf;let c=1;const u=new X,d=new He,p=new He,g=new He,f=new He,v=new He,h=new He,m=new He,M=new He,b=new He,w=new X,R=new He;let P=!1;const A=[],G={};function x(L){return L!==null?2*Math.PI/60*i.autoRotateSpeed*L:2*Math.PI/60/60*i.autoRotateSpeed}function E(){return Math.pow(.95,i.zoomSpeed)}function W(L){l.theta-=L}function q(L){l.phi-=L}const D=(function(){const L=new X;return function(oe,se){L.setFromMatrixColumn(se,0),L.multiplyScalar(-oe),u.add(L)}})(),I=(function(){const L=new X;return function(oe,se){i.screenSpacePanning===!0?L.setFromMatrixColumn(se,1):(L.setFromMatrixColumn(se,0),L.crossVectors(i.object.up,L)),L.multiplyScalar(oe),u.add(L)}})(),F=(function(){const L=new X;return function(oe,se){const le=i.domElement;if(i.object.isPerspectiveCamera){const Le=i.object.position;L.copy(Le).sub(i.target);let Ne=L.length();Ne*=Math.tan(i.object.fov/2*Math.PI/180),D(2*oe*Ne/le.clientHeight,i.object.matrix),I(2*se*Ne/le.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(D(oe*(i.object.right-i.object.left)/i.object.zoom/le.clientWidth,i.object.matrix),I(se*(i.object.top-i.object.bottom)/i.object.zoom/le.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function J(L){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=L:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function O(L){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=L:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function j(L){if(!i.zoomToCursor)return;P=!0;const $=i.domElement.getBoundingClientRect(),oe=L.clientX-$.left,se=L.clientY-$.top,le=$.width,Le=$.height;R.x=oe/le*2-1,R.y=-(se/Le)*2+1,w.set(R.x,R.y,1).unproject(i.object).sub(i.object.position).normalize()}function ne(L){return Math.max(i.minDistance,Math.min(i.maxDistance,L))}function re(L){d.set(L.clientX,L.clientY)}function B(L){j(L),m.set(L.clientX,L.clientY)}function Z(L){f.set(L.clientX,L.clientY)}function de(L){p.set(L.clientX,L.clientY),g.subVectors(p,d).multiplyScalar(i.rotateSpeed);const $=i.domElement;W(2*Math.PI*g.x/$.clientHeight),q(2*Math.PI*g.y/$.clientHeight),d.copy(p),i.update()}function me(L){M.set(L.clientX,L.clientY),b.subVectors(M,m),b.y>0?J(E()):b.y<0&&O(E()),m.copy(M),i.update()}function be(L){v.set(L.clientX,L.clientY),h.subVectors(v,f).multiplyScalar(i.panSpeed),F(h.x,h.y),f.copy(v),i.update()}function Re(L){j(L),L.deltaY<0?O(E()):L.deltaY>0&&J(E()),i.update()}function Ce(L){let $=!1;switch(L.code){case i.keys.UP:L.ctrlKey||L.metaKey||L.shiftKey?q(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(0,i.keyPanSpeed),$=!0;break;case i.keys.BOTTOM:L.ctrlKey||L.metaKey||L.shiftKey?q(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(0,-i.keyPanSpeed),$=!0;break;case i.keys.LEFT:L.ctrlKey||L.metaKey||L.shiftKey?W(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(i.keyPanSpeed,0),$=!0;break;case i.keys.RIGHT:L.ctrlKey||L.metaKey||L.shiftKey?W(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(-i.keyPanSpeed,0),$=!0;break}$&&(L.preventDefault(),i.update())}function _e(){if(A.length===1)d.set(A[0].pageX,A[0].pageY);else{const L=.5*(A[0].pageX+A[1].pageX),$=.5*(A[0].pageY+A[1].pageY);d.set(L,$)}}function Ie(){if(A.length===1)f.set(A[0].pageX,A[0].pageY);else{const L=.5*(A[0].pageX+A[1].pageX),$=.5*(A[0].pageY+A[1].pageY);f.set(L,$)}}function ct(){const L=A[0].pageX-A[1].pageX,$=A[0].pageY-A[1].pageY,oe=Math.sqrt(L*L+$*$);m.set(0,oe)}function ze(){i.enableZoom&&ct(),i.enablePan&&Ie()}function z(){i.enableZoom&&ct(),i.enableRotate&&_e()}function Be(L){if(A.length==1)p.set(L.pageX,L.pageY);else{const oe=te(L),se=.5*(L.pageX+oe.x),le=.5*(L.pageY+oe.y);p.set(se,le)}g.subVectors(p,d).multiplyScalar(i.rotateSpeed);const $=i.domElement;W(2*Math.PI*g.x/$.clientHeight),q(2*Math.PI*g.y/$.clientHeight),d.copy(p)}function Ee(L){if(A.length===1)v.set(L.pageX,L.pageY);else{const $=te(L),oe=.5*(L.pageX+$.x),se=.5*(L.pageY+$.y);v.set(oe,se)}h.subVectors(v,f).multiplyScalar(i.panSpeed),F(h.x,h.y),f.copy(v)}function Ue(L){const $=te(L),oe=L.pageX-$.x,se=L.pageY-$.y,le=Math.sqrt(oe*oe+se*se);M.set(0,le),b.set(0,Math.pow(M.y/m.y,i.zoomSpeed)),J(b.y),m.copy(M)}function Fe(L){i.enableZoom&&Ue(L),i.enablePan&&Ee(L)}function lt(L){i.enableZoom&&Ue(L),i.enableRotate&&Be(L)}function ye(L){i.enabled!==!1&&(A.length===0&&(i.domElement.setPointerCapture(L.pointerId),i.domElement.addEventListener("pointermove",we),i.domElement.addEventListener("pointerup",Ge)),ge(L),L.pointerType==="touch"?H(L):ut(L))}function we(L){i.enabled!==!1&&(L.pointerType==="touch"?ce(L):Pe(L))}function Ge(L){ke(L),A.length===0&&(i.domElement.releasePointerCapture(L.pointerId),i.domElement.removeEventListener("pointermove",we),i.domElement.removeEventListener("pointerup",Ge)),i.dispatchEvent(Zf),r=a.NONE}function ut(L){let $;switch(L.button){case 0:$=i.mouseButtons.LEFT;break;case 1:$=i.mouseButtons.MIDDLE;break;case 2:$=i.mouseButtons.RIGHT;break;default:$=-1}switch($){case gr.DOLLY:if(i.enableZoom===!1)return;B(L),r=a.DOLLY;break;case gr.ROTATE:if(L.ctrlKey||L.metaKey||L.shiftKey){if(i.enablePan===!1)return;Z(L),r=a.PAN}else{if(i.enableRotate===!1)return;re(L),r=a.ROTATE}break;case gr.PAN:if(L.ctrlKey||L.metaKey||L.shiftKey){if(i.enableRotate===!1)return;re(L),r=a.ROTATE}else{if(i.enablePan===!1)return;Z(L),r=a.PAN}break;default:r=a.NONE}r!==a.NONE&&i.dispatchEvent(Tc)}function Pe(L){switch(r){case a.ROTATE:if(i.enableRotate===!1)return;de(L);break;case a.DOLLY:if(i.enableZoom===!1)return;me(L);break;case a.PAN:if(i.enablePan===!1)return;be(L);break}}function C(L){i.enabled===!1||i.enableZoom===!1||r!==a.NONE||(L.preventDefault(),i.dispatchEvent(Tc),Re(L),i.dispatchEvent(Zf))}function y(L){i.enabled===!1||i.enablePan===!1||Ce(L)}function H(L){switch(xe(L),A.length){case 1:switch(i.touches.ONE){case vr.ROTATE:if(i.enableRotate===!1)return;_e(),r=a.TOUCH_ROTATE;break;case vr.PAN:if(i.enablePan===!1)return;Ie(),r=a.TOUCH_PAN;break;default:r=a.NONE}break;case 2:switch(i.touches.TWO){case vr.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ze(),r=a.TOUCH_DOLLY_PAN;break;case vr.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;z(),r=a.TOUCH_DOLLY_ROTATE;break;default:r=a.NONE}break;default:r=a.NONE}r!==a.NONE&&i.dispatchEvent(Tc)}function ce(L){switch(xe(L),r){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Be(L),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ee(L),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Fe(L),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;lt(L),i.update();break;default:r=a.NONE}}function ue(L){i.enabled!==!1&&L.preventDefault()}function ge(L){A.push(L)}function ke(L){delete G[L.pointerId];for(let $=0;$<A.length;$++)if(A[$].pointerId==L.pointerId){A.splice($,1);return}}function xe(L){let $=G[L.pointerId];$===void 0&&($=new He,G[L.pointerId]=$),$.set(L.pageX,L.pageY)}function te(L){const $=L.pointerId===A[0].pointerId?A[1]:A[0];return G[$.pointerId]}i.domElement.addEventListener("contextmenu",ue),i.domElement.addEventListener("pointerdown",ye),i.domElement.addEventListener("pointercancel",Ge),i.domElement.addEventListener("wheel",C,{passive:!1}),this.update()}}const fT={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Dl{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const hT=new Qp(-1,1,1,-1,0,1),Gu=new ha;Gu.setAttribute("position",new oa([-1,3,0,-1,-1,0,3,-1,0],3));Gu.setAttribute("uv",new oa([0,2,0,0,2,0],2));class pT{constructor(e){this._mesh=new Lt(Gu,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,hT)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class um extends Dl{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof ua?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Yp.clone(e.uniforms),this.material=new ua({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new pT(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class eh extends Dl{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const a=e.getContext(),r=e.state;r.buffers.color.setMask(!1),r.buffers.depth.setMask(!1),r.buffers.color.setLocked(!0),r.buffers.depth.setLocked(!0);let s,o;this.inverse?(s=0,o=1):(s=1,o=0),r.buffers.stencil.setTest(!0),r.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),r.buffers.stencil.setFunc(a.ALWAYS,s,4294967295),r.buffers.stencil.setClear(o),r.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),r.buffers.color.setLocked(!1),r.buffers.depth.setLocked(!1),r.buffers.color.setMask(!0),r.buffers.depth.setMask(!0),r.buffers.stencil.setLocked(!1),r.buffers.stencil.setFunc(a.EQUAL,1,4294967295),r.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),r.buffers.stencil.setLocked(!0)}}class mT extends Dl{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class gT{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const i=e.getSize(new He);this._width=i.width,this._height=i.height,t=new ca(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:ns}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new um(fT),this.copyPass.material.blending=sa,this.clock=new cm}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let a=0,r=this.passes.length;a<r;a++){const s=this.passes[a];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(a),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),s.needsSwap){if(i){const o=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}eh!==void 0&&(s instanceof eh?i=!0:s instanceof mT&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new He);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,a=this._height*this._pixelRatio;this.renderTarget1.setSize(i,a),this.renderTarget2.setSize(i,a);for(let r=0;r<this.passes.length;r++)this.passes[r].setSize(i,a)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class vT extends Dl{constructor(e,t,i=null,a=null,r=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=a,this.clearAlpha=r,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new bt}render(e,t,i){const a=e.autoClear;e.autoClear=!1;let r,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(r=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(r),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=a}}const _T={uniforms:{tDiffuse:{value:null},resolution:{value:new He(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`};class co{constructor(){Object.defineProperty(this,"speed",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"progress",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"currentId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"progress0",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"animationObjects",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}update(e,t){if(this.paused)return;const i=t*this.speed;this.animate(e,i),this.animationObjects.forEach((a,r)=>{const s=this.progress0.get(r);a(e,this.progress-s,r)}),this.progress+=i}addAnimation(e){const t=this.currentId++;return this.progress0.set(t,this.progress),this.animationObjects.set(t,e),t}removeAnimation(e){e!==void 0&&(this.animationObjects.delete(e),this.progress0.delete(e))}}class bT extends co{animate(e){const t=this.progress*2,i=Math.PI*.02;e.skin.leftArm.rotation.z=Math.cos(t)*.03+i,e.skin.rightArm.rotation.z=Math.cos(t+Math.PI)*.03-i;const a=Math.PI*.06;e.cape.rotation.x=Math.sin(t)*.01+a}}class xT extends co{constructor(){super(...arguments),Object.defineProperty(this,"headBobbing",{enumerable:!0,configurable:!0,writable:!0,value:!0})}animate(e){const t=this.progress*8;e.skin.leftLeg.rotation.x=Math.sin(t)*.5,e.skin.rightLeg.rotation.x=Math.sin(t+Math.PI)*.5,e.skin.leftArm.rotation.x=Math.sin(t+Math.PI)*.5,e.skin.rightArm.rotation.x=Math.sin(t)*.5;const i=Math.PI*.02;e.skin.leftArm.rotation.z=Math.cos(t)*.03+i,e.skin.rightArm.rotation.z=Math.cos(t+Math.PI)*.03-i,this.headBobbing?(e.skin.head.rotation.y=Math.sin(t/4)*.2,e.skin.head.rotation.x=Math.sin(t/5)*.1):(e.skin.head.rotation.y=0,e.skin.head.rotation.x=0);const a=Math.PI*.06;e.cape.rotation.x=Math.sin(t/1.5)*.06+a}}class yT extends co{animate(e){const t=this.progress*15+Math.PI*.5;e.skin.leftLeg.rotation.x=Math.cos(t+Math.PI)*1.3,e.skin.rightLeg.rotation.x=Math.cos(t)*1.3,e.skin.leftArm.rotation.x=Math.cos(t)*1.5,e.skin.rightArm.rotation.x=Math.cos(t+Math.PI)*1.5;const i=Math.PI*.1;e.skin.leftArm.rotation.z=Math.cos(t)*.1+i,e.skin.rightArm.rotation.z=Math.cos(t+Math.PI)*.1-i,e.position.y=Math.cos(t*2),e.position.x=Math.cos(t)*.15,e.rotation.z=Math.cos(t+Math.PI)*.01;const a=Math.PI*.3;e.cape.rotation.x=Math.sin(t*2)*.1+a}}function ST(n,e,t){return n<=e?e:n>=t?t:n}class MT extends co{constructor(e="left"){super(),Object.defineProperty(this,"whichArm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.whichArm=e}animate(e){const t=this.progress*Math.PI,i=this.whichArm==="left"?e.skin.leftArm:e.skin.rightArm;i.rotation.x=180,i.rotation.z=Math.sin(t)*.5}}class ET extends co{constructor(){super(...arguments),Object.defineProperty(this,"showProgress",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"runOnce",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isRunningHitAnimation",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"hitAnimationSpeed",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"erp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"isCrouched",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}addHitAnimation(e=this.speed){this.isRunningHitAnimation=!0,this.hitAnimationSpeed=e}animate(e){let t=this.progress*8;t===0&&(this.isCrouched=void 0),this.runOnce&&(t=ST(t,-1,1)),this.showProgress||(t=Math.floor(t));const i=Math.abs(Math.sin(t*Math.PI/2));e.skin.body.rotation.x=.4537860552*i,e.skin.body.position.z=1.3256181*i-3.4500310377*i,e.skin.body.position.y=-6-2.103677462*i,e.cape.position.y=8-1.851236166577372*i,e.cape.rotation.x=10.8*Math.PI/180+.294220265771*i,e.cape.position.z=-2+3.786619432*i-3.4500310377*i,e.elytra.position.x=e.cape.position.x,e.elytra.position.y=e.cape.position.y,e.elytra.position.z=e.cape.position.z,e.elytra.rotation.x=e.cape.rotation.x-10.8*Math.PI/180;const a=this.progress/this.speed;if(i===1?(this.erp=this.isCrouched?this.erp:a,this.isCrouched=!0,e.elytra.leftWing.rotation.z=.26179944+.4582006*Math.abs(Math.sin(Math.min(a-this.erp,1)*Math.PI/2)),e.elytra.updateRightWing()):this.isCrouched!==void 0&&(this.erp=this.isCrouched?a:this.erp,e.elytra.leftWing.rotation.z=.72-.4582006*Math.abs(Math.sin(Math.min(a-this.erp,1)*Math.PI/2)),e.elytra.updateRightWing(),this.isCrouched=!1),e.skin.head.position.y=-3.618325234674*i,e.skin.leftArm.position.z=3.618325234674*i-3.4500310377*i,e.skin.rightArm.position.z=e.skin.leftArm.position.z,e.skin.leftArm.rotation.x=.410367746202*i,e.skin.rightArm.rotation.x=e.skin.leftArm.rotation.x,e.skin.leftArm.rotation.z=.1,e.skin.rightArm.rotation.z=-e.skin.leftArm.rotation.z,e.skin.leftArm.position.y=-2-2.53943318*i,e.skin.rightArm.position.y=e.skin.leftArm.position.y,e.skin.rightLeg.position.z=-3.4500310377*i,e.skin.leftLeg.position.z=e.skin.rightLeg.position.z,this.isRunningHitAnimation){const r=this.progress;let s=this.progress*18*this.hitAnimationSpeed/this.speed;this.speed===0&&(s=0);const o=Math.abs(Math.sin(r*Math.PI/2))===1;e.skin.rightArm.rotation.x=-.4537860552+2*Math.sin(s+Math.PI)*.3-(o?.4537860552:0);const l=.01*Math.PI+.06;e.skin.rightArm.rotation.z=-Math.cos(s)*.403+l,e.skin.body.rotation.y=-Math.cos(s)*.06,e.skin.leftArm.rotation.x=Math.sin(s+Math.PI)*.077+(o?.47:0),e.skin.leftArm.rotation.z=-Math.cos(s)*.015+.13-(o?0:.05),o||(e.skin.leftArm.position.z=Math.cos(s)*.3,e.skin.leftArm.position.x=5-Math.cos(s)*.05)}}}class wT extends $A{constructor(e="",t={}){const i=new sm({transparent:!0,alphaTest:1e-5});super(i),Object.defineProperty(this,"painted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"font",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"backgroundStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textMaterial",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.textMaterial=i,this.text=e,this.font=t.font===void 0?"48px Minecraft":t.font,this.margin=t.margin===void 0?[5,10,5,10]:t.margin,this.textStyle=t.textStyle===void 0?"white":t.textStyle,this.backgroundStyle=t.backgroundStyle===void 0?"rgba(0,0,0,.25)":t.backgroundStyle,this.height=t.height===void 0?4:t.height,(t.repaintAfterLoaded===void 0?!0:t.repaintAfterLoaded)&&!document.fonts.check(this.font,this.text)?(this.paint(),this.painted=this.loadAndPaint()):(this.paint(),this.painted=Promise.resolve())}async loadAndPaint(){await document.fonts.load(this.font,this.text),this.paint()}paint(){const e=document.createElement("canvas");let t=e.getContext("2d");t.font=this.font;const i=t.measureText(this.text);e.width=this.margin[3]+i.actualBoundingBoxLeft+i.actualBoundingBoxRight+this.margin[1],e.height=this.margin[0]+i.actualBoundingBoxAscent+i.actualBoundingBoxDescent+this.margin[2],t=e.getContext("2d"),t.font=this.font,t.fillStyle=this.backgroundStyle,t.fillRect(0,0,e.width,e.height),t.fillStyle=this.textStyle,t.fillText(this.text,this.margin[3]+i.actualBoundingBoxLeft,this.margin[0]+i.actualBoundingBoxAscent);const a=new Yo(e);a.magFilter=zt,a.minFilter=zt,this.textMaterial.map=a,this.textMaterial.needsUpdate=!0,this.scale.x=e.width/e.height*this.height,this.scale.y=this.height}}class AT{constructor(e={}){Object.defineProperty(this,"canvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scene",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"camera",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"controls",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"playerObject",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"playerWrapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"globalLight",{enumerable:!0,configurable:!0,writable:!0,value:new YA(16777215,3)}),Object.defineProperty(this,"cameraLight",{enumerable:!0,configurable:!0,writable:!0,value:new qA(16777215,.6)}),Object.defineProperty(this,"composer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"renderPass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fxaaPass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skinCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"capeCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"earsCanvas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"skinTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"capeTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"earsTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"backgroundTexture",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_renderPaused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_zoom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isUserRotating",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoRotate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoRotateSpeed",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clock",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"animationID",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onContextLost",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onContextRestored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pixelRatio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"devicePixelRatioQuery",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onDevicePixelRatioChange",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_nameTag",{enumerable:!0,configurable:!0,writable:!0,value:null}),this.canvas=e.canvas??document.createElement("canvas"),this.skinCanvas=document.createElement("canvas"),this.capeCanvas=document.createElement("canvas"),this.earsCanvas=document.createElement("canvas"),this.scene=new VA,this.camera=new ti,this.camera.add(this.cameraLight),this.scene.add(this.camera,this.globalLight),li.enabled=!1,this.renderer=new rm({canvas:this.canvas,preserveDrawingBuffer:e.preserveDrawingBuffer===!0}),this.onDevicePixelRatioChange=()=>{this.renderer.setPixelRatio(window.devicePixelRatio),this.updateComposerSize(),this._pixelRatio==="match-device"&&(this.devicePixelRatioQuery=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.devicePixelRatioQuery.addEventListener("change",this.onDevicePixelRatioChange,{once:!0}))},e.pixelRatio===void 0||e.pixelRatio==="match-device"?(this._pixelRatio="match-device",this.devicePixelRatioQuery=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.devicePixelRatioQuery.addEventListener("change",this.onDevicePixelRatioChange,{once:!0}),this.renderer.setPixelRatio(window.devicePixelRatio)):(this._pixelRatio=e.pixelRatio,this.devicePixelRatioQuery=null,this.renderer.setPixelRatio(e.pixelRatio)),this.renderer.setClearColor(0,0);let t;this.renderer.capabilities.isWebGL2&&(t=new ca(0,0,{depthTexture:new am(0,0,na)})),this.composer=new gT(this.renderer,t),this.renderPass=new vT(this.scene,this.camera),this.fxaaPass=new um(_T),this.composer.addPass(this.renderPass),this.composer.addPass(this.fxaaPass),this.playerObject=new eT,this.playerObject.name="player",this.playerObject.skin.visible=!1,this.playerObject.cape.visible=!1,this.playerWrapper=new xn,this.playerWrapper.add(this.playerObject),this.scene.add(this.playerWrapper),this.controls=new dT(this.camera,this.canvas),this.controls.enableRotate=e.enableRotation!==!1,this.controls.enableZoom=e.allowZoom!==!1,e.skin!==void 0&&this.loadSkin(e.skin,{model:e.model,ears:e.ears==="current-skin"}),e.cape!==void 0&&this.loadCape(e.cape),e.ears!==void 0&&e.ears!=="current-skin"&&this.loadEars(e.ears.source,{textureType:e.ears.textureType}),e.width!==void 0&&(this.width=e.width),e.height!==void 0&&(this.height=e.height),e.background!==void 0&&(this.background=e.background),e.panorama!==void 0&&this.loadPanorama(e.panorama),e.nameTag!==void 0&&(this.nameTag=e.nameTag),this.camera.position.z=1,this._zoom=e.zoom??.9,this.fov=e.fov??50,this._animation=e.animation??null,this.clock=new cm,e.renderPaused===!0?(this._renderPaused=!0,this.animationID=null):this.animationID=window.requestAnimationFrame(()=>this.draw()),this.onContextLost=i=>{i.preventDefault(),this.animationID!==null&&(window.cancelAnimationFrame(this.animationID),this.animationID=null)},this.onContextRestored=()=>{this.renderer.setClearColor(0,0),!this._renderPaused&&!this._disposed&&this.animationID===null&&(this.animationID=window.requestAnimationFrame(()=>this.draw()))},this.canvas.addEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.addEventListener("webglcontextrestored",this.onContextRestored,!1),this.canvas.addEventListener("mousedown",()=>{this.isUserRotating=!0},!1),this.canvas.addEventListener("mouseup",()=>{this.isUserRotating=!1},!1),this.canvas.addEventListener("touchmove",i=>{this.isUserRotating=i.touches.length===1},!1),this.canvas.addEventListener("touchend",()=>{this.isUserRotating=!1},!1)}updateComposerSize(){this.composer.setSize(this.width,this.height);const e=this.renderer.getPixelRatio();this.composer.setPixelRatio(e),this.fxaaPass.material.uniforms.resolution.value.x=1/(this.width*e),this.fxaaPass.material.uniforms.resolution.value.y=1/(this.height*e)}recreateSkinTexture(){var e;(e=this.skinTexture)==null||e.dispose(),this.skinTexture=new Yo(this.skinCanvas),this.skinTexture.magFilter=zt,this.skinTexture.minFilter=zt,this.playerObject.skin.map=this.skinTexture}recreateCapeTexture(){var e;(e=this.capeTexture)==null||e.dispose(),this.capeTexture=new Yo(this.capeCanvas),this.capeTexture.magFilter=zt,this.capeTexture.minFilter=zt,this.playerObject.cape.map=this.capeTexture,this.playerObject.elytra.map=this.capeTexture}recreateEarsTexture(){var e;(e=this.earsTexture)==null||e.dispose(),this.earsTexture=new Yo(this.earsCanvas),this.earsTexture.magFilter=zt,this.earsTexture.minFilter=zt,this.playerObject.ears.map=this.earsTexture}loadSkin(e,t={}){if(e===null)this.resetSkin();else if(No(e))nT(this.skinCanvas,e),this.recreateSkinTexture(),this.playerObject.skin.modelType=t.model===void 0||t.model==="auto-detect"?oT(this.skinCanvas):t.model,t.makeVisible!==!1&&(this.playerObject.skin.visible=!0),(t.ears===!0||t.ears==="load-only")&&(Kf(this.earsCanvas,e),this.recreateEarsTexture(),t.ears===!0&&(this.playerObject.ears.visible=!0));else return Oo(e).then(i=>this.loadSkin(i,t))}resetSkin(){var e;this.playerObject.skin.visible=!1,this.playerObject.skin.map=null,(e=this.skinTexture)==null||e.dispose(),this.skinTexture=null}loadCape(e,t={}){if(e===null)this.resetCape();else if(No(e))aT(this.capeCanvas,e),this.recreateCapeTexture(),t.makeVisible!==!1&&(this.playerObject.backEquipment=t.backEquipment??"cape");else return Oo(e).then(i=>this.loadCape(i,t))}resetCape(){var e;this.playerObject.backEquipment=null,this.playerObject.cape.map=null,this.playerObject.elytra.map=null,(e=this.capeTexture)==null||e.dispose(),this.capeTexture=null}loadEars(e,t={}){if(e===null)this.resetEars();else if(No(e))t.textureType==="skin"?Kf(this.earsCanvas,e):cT(this.earsCanvas,e),this.recreateEarsTexture(),t.makeVisible!==!1&&(this.playerObject.ears.visible=!0);else return Oo(e).then(i=>this.loadEars(i,t))}resetEars(){var e;this.playerObject.ears.visible=!1,this.playerObject.ears.map=null,(e=this.earsTexture)==null||e.dispose(),this.earsTexture=null}loadPanorama(e){return this.loadBackground(e,sl)}loadBackground(e,t){var i;if(No(e))(i=this.backgroundTexture)==null||i.dispose(),this.backgroundTexture=new Dn,this.backgroundTexture.image=e,t&&(this.backgroundTexture.mapping=t),this.backgroundTexture.needsUpdate=!0,this.scene.background=this.backgroundTexture;else return Oo(e).then(a=>this.loadBackground(a,t))}draw(){var t;const e=this.clock.getDelta();(t=this._animation)==null||t.update(this.playerObject,e),this.autoRotate&&!(this.controls.enableRotate&&this.isUserRotating)&&(this.playerWrapper.rotation.y+=e*this.autoRotateSpeed),this.controls.update(),this.render(),this.animationID=window.requestAnimationFrame(()=>this.draw())}render(){this.composer.render()}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.updateComposerSize()}dispose(){var e;this._disposed=!0,this.canvas.removeEventListener("webglcontextlost",this.onContextLost,!1),this.canvas.removeEventListener("webglcontextrestored",this.onContextRestored,!1),(e=this.devicePixelRatioQuery)==null||e.removeEventListener("change",this.onDevicePixelRatioChange),this.devicePixelRatioQuery=null,this.animationID!==null&&(window.cancelAnimationFrame(this.animationID),this.animationID=null),this.controls.dispose(),this.renderer.dispose(),this.resetSkin(),this.resetCape(),this.resetEars(),this.background=null,this.fxaaPass.fsQuad.dispose()}get disposed(){return this._disposed}get renderPaused(){return this._renderPaused}set renderPaused(e){this._renderPaused=e,e&&this.animationID!==null?(window.cancelAnimationFrame(this.animationID),this.animationID=null,this.clock.stop(),this.clock.autoStart=!0):!e&&!this._disposed&&!this.renderer.getContext().isContextLost()&&this.animationID==null&&(this.animationID=window.requestAnimationFrame(()=>this.draw()))}get width(){return this.renderer.getSize(new He).width}set width(e){this.setSize(e,this.height)}get height(){return this.renderer.getSize(new He).height}set height(e){this.setSize(this.width,e)}get background(){return this.scene.background}set background(e){e===null||e instanceof bt||e instanceof Dn?this.scene.background=e:this.scene.background=new bt(e),this.backgroundTexture!==null&&e!==this.backgroundTexture&&(this.backgroundTexture.dispose(),this.backgroundTexture=null)}adjustCameraDistance(){let e=4.5+16.5/Math.tan(this.fov/180*Math.PI/2)/this.zoom;e=Math.max(10,Math.min(e,256)),this.camera.position.multiplyScalar(e/this.camera.position.length()),this.camera.updateProjectionMatrix()}resetCameraPose(){this.camera.position.set(0,0,1),this.camera.rotation.set(0,0,0),this.adjustCameraDistance()}get fov(){return this.camera.fov}set fov(e){this.camera.fov=e,this.adjustCameraDistance()}get zoom(){return this._zoom}set zoom(e){this._zoom=e,this.adjustCameraDistance()}get pixelRatio(){return this._pixelRatio}set pixelRatio(e){e==="match-device"?this._pixelRatio!=="match-device"&&(this._pixelRatio=e,this.onDevicePixelRatioChange()):(this._pixelRatio==="match-device"&&this.devicePixelRatioQuery!==null&&(this.devicePixelRatioQuery.removeEventListener("change",this.onDevicePixelRatioChange),this.devicePixelRatioQuery=null),this._pixelRatio=e,this.renderer.setPixelRatio(e),this.updateComposerSize())}get animation(){return this._animation}set animation(e){this._animation!==e&&(this.playerObject.resetJoints(),this.playerObject.position.set(0,0,0),this.playerObject.rotation.set(0,0,0),this.clock.stop(),this.clock.autoStart=!0),e!==null&&(e.progress=0),this._animation=e}get nameTag(){return this._nameTag}set nameTag(e){if(this._nameTag!==null&&this.playerWrapper.remove(this._nameTag),e===null){this._nameTag=null;return}e instanceof kn||(e=new wT(e)),this.playerWrapper.add(e),e.position.y=20,this._nameTag=e}resetModelRotation(){this.playerWrapper.rotation.set(0,0,0),this.controls.reset()}}var TT=Me('<img alt="Minecraft Skin" class="skin-2d-image svelte-1duwfek"/>'),RT=Me('<div class="loading-placeholder svelte-1duwfek">Loading skin...</div>'),CT=Me('<div class="skin-2d-container fade-in-bck svelte-1duwfek"><!></div>'),PT=Me('<canvas class="fade-in-bck svelte-1duwfek"></canvas>'),LT=Me('<button class="view-toggle btn-accent svelte-1duwfek" aria-label="toggle-view"><i class="fa fa-image"></i></button>'),DT=Me('<button class="view-toggle btn-accent svelte-1duwfek" aria-label="toggle-view"><i class="fa fa-cube"></i></button>'),kT=Me('<button class="animation svelte-1duwfek" aria-label="play-animation"><i></i></button>'),UT=Me("<!> <!>",1),IT=Me('<button class="save-skin svelte-1duwfek" aria-label="save-skin"><i></i></button>'),NT=Me('<div class="skin-viewer-container svelte-1duwfek"><!> <div class="skin-viewer-button svelte-1duwfek"><!> <!> <!></div></div>');function OT(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=()=>je(Ml,"$selectedAccountData",t),s=Ve(),o=Ve(),l=Ve(),c=Ve();let u=Ve(),d=Ve(null),p=Ve(),g=Ve(!0),f=Ve(null),v=Ve();const h={idle:new bT,walking:new xT,running:new yT,waving:new MT,crouch:new ET};let m=Ve(!1);yu(()=>{_(d)&&_(d).dispose()});function M(O){Se(v,O.detail.value)}function b(){Se(m,!_(m))}function w(){Se(g,!_(g))}async function R(){var O;if(!_(c)){$t(a()("skinViewer.noSkinAvailable"),"error");return}try{const j=`${((O=_(o))==null?void 0:O.name)||"minecraft"}_skin.png`,ne=await window.electron.downloadSkin(_(c),j);ne.success?$t(a()("skinViewer.skinSavedSuccessfully"),"info"):ne.canceled||$t(a()("skinViewer.failedToSaveSkin",{error:ne.error}),"error")}catch(j){console.error("Error saving skin:",j),$t(a()("skinViewer.failedToSaveSkin"),"error")}}ft(()=>a(),()=>{Se(p,[{value:"idle",label:a()("skinViewer.animations.idle")},{value:"walking",label:a()("skinViewer.animations.walking")},{value:"running",label:a()("skinViewer.animations.running")},{value:"crouch",label:a()("skinViewer.animations.crouch")},{value:"waving",label:a()("skinViewer.animations.waving")}])}),ft(()=>_(p),()=>{var O;Se(v,((O=_(p)[0])==null?void 0:O.value)||"idle")}),ft(()=>_(v),()=>{Se(s,h[_(v)])}),ft(()=>r(),()=>{Se(o,r())}),ft(()=>_(o),()=>{Se(l,js(_(o),"default").full)}),ft(()=>_(o),()=>{Se(c,js(_(o),"skin").default)}),ft(()=>(_(u),_(g),_(c),_(d),_(o),_(s),_(m)),()=>{var O,j,ne,re,B,Z,de,me,be;if(_(u)&&!_(g))if(console.log(_(c)),!_(d))Se(d,new AT({canvas:_(u),width:300,height:350,skin:_(c),cape:((O=_(o))==null?void 0:O.type)==="online"?(B=(re=(ne=(j=_(o))==null?void 0:j.profile)==null?void 0:ne.capes)==null?void 0:re.find(Re=>Re.state==="ACTIVE"))==null?void 0:B.url:void 0})),Rn(d,_(d).controls.enableRotate=!0),Rn(d,_(d).controls.enableZoom=!1),_(s)&&(Rn(d,_(d).animation=_(s)),Rn(d,_(d).animation.speed=.6)),Rn(d,_(d).animation.paused=_(m));else if(_(d).loadSkin(_(c)),((Z=_(o))==null?void 0:Z.type)==="online"){const Re=(be=(me=(de=_(o))==null?void 0:de.profile)==null?void 0:me.capes)==null?void 0:be.find(Ce=>Ce.state==="ACTIVE");Re?_(d).loadCape(Re.url):_(d).loadCape(null)}else _(d).loadCape(null)}),ft(()=>(_(g),_(d),_(l)),()=>{_(g)?(_(d)&&(_(d).dispose(),Se(d,null)),Se(f,_(l))):Se(f,null)}),ft(()=>(_(d),_(s),_(m)),()=>{var O;if(_(d)&&_(s)){const j=((O=_(d).animation)==null?void 0:O.paused)||!1;Rn(d,_(d).animation=_(s)),Rn(d,_(d).animation.speed=.6),j||_(m)?Rn(d,_(d).animation.paused=!0):Rn(d,_(d).animation.paused=!1)}}),ft(()=>(_(d),_(m)),()=>{_(d)&&_(d).animation&&(_(m)?Rn(d,_(d).animation.paused=!0):Rn(d,_(d).animation.paused=!1))}),Ci(),nn();var P=NT(),A=S(P);{var G=O=>{var j=CT(),ne=S(j);{var re=Z=>{var de=TT();De(()=>un(de,"src",_(f))),he(Z,de)},B=Z=>{var de=RT();he(Z,de)};at(ne,Z=>{_(f)?Z(re):Z(B,!1)})}he(O,j)},x=O=>{var j=PT();Za(j,ne=>Se(u,ne),()=>_(u)),he(O,j)};at(A,O=>{_(g)?O(G):O(x,!1)})}var E=N(A,2),W=S(E);{var q=O=>{{let j=Ze(()=>(a(),U(()=>a()("skinViewer.viewModes.2d"))));tn(O,{get text(){return _(j)},direction:"left",children:(ne,re)=>{var B=LT();vt("click",B,w),he(ne,B)},$$slots:{default:!0}})}},D=O=>{{let j=Ze(()=>(a(),U(()=>a()("skinViewer.viewModes.3d"))));tn(O,{get text(){return _(j)},direction:"left",children:(ne,re)=>{var B=DT();vt("click",B,w),he(ne,B)},$$slots:{default:!0}})}};at(W,O=>{_(g)?O(D,!1):O(q)})}var I=N(W,2);{var F=O=>{var j=UT(),ne=jt(j);Al(ne,{get options(){return _(p)},id:"skinviewAnimation",preferredPosition:"down",get value(){return _(v)},$$events:{optionchange:M}});var re=N(ne,2);{let B=Ze(()=>(a(),U(()=>a()("skinViewer.playPause"))));tn(re,{get text(){return _(B)},direction:"left",children:(Z,de)=>{var me=kT(),be=S(me);De(()=>gt(be,1,`fa ${_(m)?"fa-play":"fa-pause"}`,"svelte-1duwfek")),vt("click",me,b),he(Z,me)},$$slots:{default:!0}})}he(O,j)};at(I,O=>{_(g)||O(F)})}var J=N(I,2);{let O=Ze(()=>(a(),U(()=>a()("skinViewer.saveSkin"))));tn(J,{get text(){return _(O)},direction:"left",children:(j,ne)=>{var re=IT(),B=S(re);gt(B,1,"fa fa-save","svelte-1duwfek"),vt("click",re,R),he(j,re)},$$slots:{default:!0}})}he(n,P),Kt(),i()}var FT=Me('<span class="svelte-1mcgtkc"> </span>'),BT=Me('<span class="svelte-1mcgtkc"> </span>'),zT=Me('<button class="remove-btn svelte-1mcgtkc"><i class="fa fa-trash svelte-1mcgtkc"></i></button>'),GT=Me("<button><i></i></button>"),HT=Me('<span class="line svelte-1mcgtkc"></span> <!>',1),VT=Me('<div><div class="account-avatar-name-cont svelte-1mcgtkc" style="z-index:1;"><span class="account-avatar svelte-1mcgtkc"></span> <div class="account-name-spec svelte-1mcgtkc"><span class="account-name svelte-1mcgtkc"><!> <span class="account-type svelte-1mcgtkc"> </span></span></div> <span class="check-mark svelte-1mcgtkc"><i class="fa fa-circle-check svelte-1mcgtkc"></i></span></div>  <div class="account-action-btn-cont hide svelte-1mcgtkc"><!> <!></div></div>'),WT=Me('<div class="m-container user-account-manager-container svelte-1mcgtkc"><div class="container-header svelte-1mcgtkc"><span class="title svelte-1mcgtkc"> </span> <div class="container-info-action svelte-1mcgtkc"><span class="conntainer-description svelte-1mcgtkc"> </span></div></div> <div class="container-content svelte-1mcgtkc"><div class="o-wrapper svelte-1mcgtkc"><div class="account-list-container svelte-1mcgtkc"><div class="i-wrapper svelte-1mcgtkc"></div></div></div> <div class="account-skin-view-container svelte-1mcgtkc"><div class="skin-viewer svelte-1mcgtkc"><!></div></div></div></div>');function $T(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(dr,"$accountsStore",t),r=()=>je(an,"$t",t),s=()=>je(l,"$selectedAccountUuid",t);let o=Ve(a()),{selectedAccountUuid:l}=gp,c=Ve(new Set);const u=wl();u&&Wr(u.uuid);function d(q){Ws({title:r()("accountManager.deleteAccountTitle"),message:r()("accountManager.deleteAccountMessage"),buttons:[{label:r()("accountManager.cancel"),type:"normal",action:()=>{}},{label:r()("accountManager.delete"),type:"danger",action:()=>{_p(q.uuid)}}]})}function p(q){Wr(q.uuid)}async function g(q){const D=q.uuid||q.name;if(!_(c).has(D)){_(c).add(D),Se(c,_(c));try{if(q.type==="online"){const I=await window.electron.invoke("refresh-account",q);if(I.success){const F={...q,access_token:I.mc.access_token,refresh_token:I.extra.msToken.refresh_token,client_id:I.mc.client_id,user_properties:I.mc.user_properties,profile:I.extra.profile};Du(D,F),$t(r()("accountManager.accountRefreshedSuccessfully"),"info")}else $t(r()("accountManager.accountRefreshFailed"),"error"),console.error("Failed to refresh online account:",I.error)}return}catch(I){console.error("Error refreshing account:",I)}finally{_(c).delete(D),Se(c,_(c))}}}ft(()=>a(),()=>{Se(o,a())}),ft(()=>(_(o),Ot),()=>{_(o).length===0&&Ot.activeTab.set("launch")}),Ci(),nn();var f=WT(),v=S(f),h=S(v),m=S(h),M=N(h,2),b=S(M),w=S(b),R=N(v,2),P=S(R),A=S(P),G=S(A);vn(G,5,()=>_(o),Ln,(q,D)=>{var I=VT(),F=S(I),J=S(F),O=N(J,2),j=S(O),ne=S(j);{var re=_e=>{tn(_e,{get text(){return _(D),U(()=>_(D).name)},direction:"top",children:(Ie,ct)=>{var ze=FT(),z=S(ze);il(ze,(Be,Ee)=>Hr==null?void 0:Hr(Be,Ee),()=>({size:20})),De(()=>ae(z,(_(D),U(()=>_(D).name)))),he(Ie,ze)},$$slots:{default:!0}})},B=_e=>{var Ie=BT(),ct=S(Ie);De(()=>ae(ct,(_(D),U(()=>_(D).name)))),he(_e,Ie)};at(ne,_e=>{_(D),U(()=>_(D).name.length>=20)?_e(re):_e(B,!1)})}var Z=N(ne,2),de=S(Z);il(F,(_e,Ie)=>Xl==null?void 0:Xl(_e,Ie),()=>({snapX:_(D).type==="online"?-130:-65,threshold:-30})),gu(()=>vt("click",F,_e=>{_e.currentTarget.wasDragged||p(_(D))}));var me=N(F,2),be=S(me);{let _e=Ze(()=>(r(),U(()=>r()("accountManager.removeAccount"))));tn(be,{get text(){return _(_e)},direction:"bottom",children:(Ie,ct)=>{var ze=zT();De(z=>un(ze,"aria-label",z),[()=>(r(),U(()=>r()("accountManager.removeAccountAriaLabel")))]),vt("click",ze,()=>{d(_(D))}),he(Ie,ze)},$$slots:{default:!0}})}var Re=N(be,2);{var Ce=_e=>{var Ie=HT(),ct=N(jt(Ie),2);{let ze=Ze(()=>(r(),U(()=>r()("accountManager.refreshAccount"))));tn(ct,{get text(){return _(ze)},direction:"bottom",children:(z,Be)=>{var Ee=GT(),Ue=S(Ee);De((Fe,lt,ye,we)=>{gt(Ee,1,`refresh-btn ${Fe??""}`,"svelte-1mcgtkc"),un(Ee,"aria-label",lt),Ee.disabled=ye,gt(Ue,1,`fa fa-rotate ${we??""}`,"svelte-1mcgtkc")},[()=>(_(c),_(D),U(()=>_(c).has(_(D).uuid||_(D).name)?"refreshing":"")),()=>(r(),U(()=>r()("accountManager.refreshAccount"))),()=>(_(c),_(D),U(()=>_(c).has(_(D).uuid||_(D).name))),()=>(_(c),_(D),U(()=>_(c).has(_(D).uuid||_(D).name)?"fa-spin":""))]),vt("click",Ee,()=>{g(_(D))}),he(z,Ee)},$$slots:{default:!0}})}he(_e,Ie)};at(Re,_e=>{_(D),U(()=>_(D).type==="online")&&_e(Ce)})}De((_e,Ie)=>{gt(I,1,`sliding-account-card account-card ${s(),_(D),U(()=>s()===_(D).uuid?"active-card":"")??""}`,"svelte-1mcgtkc"),ni(J,`background: url(${_e??""});background-size: contain`),ae(de,Ie)},[()=>(Gn(js),_(D),U(()=>js(_(D),"pixel").face)),()=>(_(D),r(),U(()=>_(D).type==="online"?r()("accountManager.minecraft"):r()("accountManager.cracked")))]),vt("click",me,Bg(function(_e){zg.call(this,e,_e)})),he(q,I)});var x=N(P,2),E=S(x),W=S(E);OT(W,{}),De((q,D)=>{ae(m,q),ae(w,D)},[()=>(r(),U(()=>r()("accountManager.title"))),()=>(r(),U(()=>r()("accountManager.description")))]),he(n,f),Kt(),i()}var jT=Me("<button> </button>"),XT=Me('<div class="dialog-container svelte-gun57u"><div class="d-wrapper scale-in-center svelte-gun57u"><div class="d-title-description-container svelte-gun57u"><span class="d-title svelte-gun57u"> </span> <p class="d-description"><!></p></div> <div class="d-btn-container svelte-gun57u"></div></div></div>');function qT(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t);let r=_t(e,"title",24,()=>a()("dialog.defaultTitle")),s=_t(e,"message",24,()=>a()("dialog.defaultMessage")),o=_t(e,"buttons",24,()=>[{label:a()("dialog.ok"),action:()=>{},type:"normal"}]),l=_t(e,"open",8,!1),c=_t(e,"onClose",8,()=>{});function u(f){switch(f){case"danger":return"btn-danger";case"confirm":return"btn-accent";default:return"btn-primary"}}nn();var d=ii(),p=jt(d);{var g=f=>{var v=XT(),h=S(v),m=S(h),M=S(m),b=S(M),w=N(M,2),R=S(w);Vs(R,s);var P=N(m,2);vn(P,5,o,Ln,(A,G)=>{var x=jT(),E=S(x);De(W=>{gt(x,1,`dialog-btn btn d-default-btn ${W??""}`,"svelte-gun57u"),ae(E,(_(G),U(()=>_(G).label)))},[()=>(_(G),U(()=>u(_(G).type)))]),vt("click",x,()=>{_(G).action(),c()()}),he(A,x)}),De(()=>ae(b,r())),he(f,v)};at(p,f=>{l()&&f(g)})}he(n,d),Kt(),i()}var YT=Me('<button><img class="svelte-jmndj"/> </button>'),KT=Me("<button> </button>"),JT=Me('<div><button class="instance-variant main-item svelte-jmndj"> </button> <span class="seperator svelte-jmndj">|</span> <div></div></div>'),ZT=Me('<div class="launch-news-container svelte-jmndj"><div class="instance-manager svelte-jmndj"><div class="instance-info-container svelte-jmndj"><div class="instance-type-container hide svelte-jmndj"></div> <div class="version-header-container svelte-jmndj"><div class="header-line svelte-jmndj"><div class="breadcrumb svelte-jmndj"><button class="btn btn-normal back-btn svelte-jmndj"><i class="fa fa-home"></i> <h1 class="svelte-jmndj"> </h1></button> / <h1 class="breadcrumb-title svelte-jmndj"> </h1></div> <!></div> <div class="version-header svelte-jmndj"><h2 class="instance-type-title svelte-jmndj"> </h2> <h3 class="instance-version svelte-jmndj"> </h3></div></div> <p class="instance-summery svelte-jmndj"> </p></div> <div class="version-title-container svelte-jmndj"><h2 class="svelte-jmndj"> </h2> <span class="hr svelte-jmndj"></span></div> <div class="instance-version-container svelte-jmndj"><div class="version-wrapper svelte-jmndj"></div></div></div></div>');function QT(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=()=>je(Vr,"$selectedType",t),s=()=>je(Ru,"$versions",t),o=()=>je(Bi,"$selectedMajor",t),l=()=>je(Sp,"$canLaunch",t),c=()=>je(Si,"$launchStatus",t),u=()=>je(aa,"$selectedVariant",t),d=()=>je(Fi,"$isLaunching",t),p=Ve(),g=Ve();let f=Ve("vanilla"),v=Ve([]),h=Ve(""),m=Ve(null);function M(z){var Ue;const Be=z.detail||((Ue=z.target)==null?void 0:Ue.value)||z;if(!l()){R(c());return}Se(f,Be.value);const Ee=Be.value==="vanilla"?"release":Be.value;rl(o(),u(),Ee)}function b(z){if(console.log(l()),!l()){R(c());return}Se(m,_(m)===z?null:z)}console.log(c());function w(z,Be){if(!l()){R(c());return}const Ee=_(f)==="vanilla"?"release":_(f);rl(z,Be.id,Ee),Se(m,null)}function R(z){if(["preparing","downloading","extracting","verifying"].includes(z)){Ws({title:a()("dialog.titles.gamePreparing"),message:a()("dialog.messages.gamePreparingCancelMessage"),buttons:[{label:a()("dialog.cancel"),type:"normal",action:()=>{}},{label:a()("dialog.confirm"),type:"danger",action:async()=>{d()&&await window.electron.cancelLaunch(),$t(a()("mainContent.launch.launchStatus.cancelled")),Cn.reset(),It.endSession(),Fi.set(!1)}}]});return}Ws({title:a()("dialog.titles.gameRunning"),message:a()("dialog.messages.gameRunningCancelMessage"),buttons:[{label:a()("dialog.cancel"),type:"normal",action:()=>{}},{label:a()("dialog.confirm"),type:"danger",action:async()=>{d()&&await window.electron.cancelLaunch(),$t(a()("mainContent.launch.launchStatus.cancelled")),Cn.reset(),It.endSession(),Fi.set(!1)}}]})}ft(()=>a(),()=>{Se(p,[{id:"vanilla",value:"vanilla",icon:"./images/static/vanilla.png",label:`<img class="instance-icon" src="./images/static/vanilla.png" /> ${a()("instanceManager.version.versionTypes.vanilla.name")}`,description:a()("instanceManager.version.versionTypes.vanilla.description")},{id:"forge",value:"forge",icon:"./images/static/forge.png",label:`<img class="instance-icon" src="./images/static/forge.png" /> ${a()("instanceManager.version.versionTypes.forge.name")}`,description:a()("instanceManager.version.versionTypes.forge.description")},{id:"fabric",value:"fabric",icon:"./images/static/fabric.png",label:`<img class="instance-icon" src="./images/static/fabric.png" /> ${a()("instanceManager.version.versionTypes.fabric.name")}`,description:a()("instanceManager.version.versionTypes.fabric.description")}])}),ft(()=>r(),()=>{r()&&Se(f,r()==="release"?"vanilla":r())}),ft(()=>(s(),_(f)),()=>{Se(v,s().filter(z=>{if(_(f)==="fabric"){const Be=z.name.split("."),Ee=parseInt(Be[0]),Ue=parseInt(Be[1]);return Ee>1||Ee===1&&Ue>=15}return!0}))}),ft(()=>o(),()=>{Se(h,o())}),ft(()=>(_(p),_(f)),()=>{Se(g,_(p).find(z=>z.id===_(f))||_(p)[0])}),Ci(),nn();var P=ZT(),A=S(P),G=S(A),x=S(G);vn(x,5,()=>_(p),Ln,(z,Be)=>{var Ee=YT();let Ue;var Fe=S(Ee),lt=N(Fe);De(ye=>{Ue=gt(Ee,1,"instance-item svelte-jmndj",null,Ue,ye),un(Fe,"src",(_(Be),U(()=>_(Be).icon))),un(Fe,"alt",(_(Be),U(()=>_(Be).name))),ae(lt,`¬†${_(Be),U(()=>_(Be).name)??""}`)},[()=>({"active-instance":_(f)===_(Be).id})]),vt("click",Ee,()=>M(_(Be).id)),he(z,Ee)});var E=N(x,2),W=S(E),q=S(W),D=S(q),I=og(()=>Ot.activeTab.set("launch")),F=N(S(D),2),J=S(F),O=N(D,2),j=S(O),ne=N(q,2);Al(ne,{get options(){return _(p)},id:"instance-type",preferredPosition:"down",get value(){return _(f)},$$events:{optionchange:M}});var re=N(W,2),B=S(re),Z=S(B),de=N(B,2),me=S(de),be=N(E,2),Re=S(be),Ce=N(G,2),_e=S(Ce),Ie=S(_e),ct=N(Ce,2),ze=S(ct);vn(ze,5,()=>_(v),Ln,(z,Be)=>{var Ee=JT();let Ue;var Fe=S(Ee),lt=S(Fe),ye=N(Fe,4);let we;vn(ye,5,()=>(_(Be),U(()=>_(Be).variants)),Ln,(Ge,ut)=>{var Pe=KT();let C;var y=S(Pe);De(H=>{C=gt(Pe,1,"variant-item svelte-jmndj",null,C,H),ae(y,(_(ut),U(()=>_(ut).id)))},[()=>({"selected-instance-version":u()===_(ut).id})]),vt("click",Pe,()=>w(_(Be).name,_(ut))),he(Ge,Pe)}),De((Ge,ut)=>{Ue=gt(Ee,1,"version-item-main  svelte-jmndj",null,Ue,Ge),ae(lt,(_(Be),U(()=>_(Be).name))),we=gt(ye,1,"instance-variant-cont svelte-jmndj",null,we,ut)},[()=>({"active-main":_(m)===_(Be).name}),()=>({expanded:_(m)===_(Be).name})]),vt("click",Fe,()=>b(_(Be).name)),he(z,Ee)}),De((z,Be,Ee,Ue)=>{ae(J,z),ae(j,Be),ae(Z,Ee),ae(me,`${r()==="forge"?"MC":r()==="fabric"?"Stable":"Release"}¬†${u()??""}`),ae(Re,(_(g),U(()=>_(g).description))),ae(Ie,Ue)},[()=>(a(),U(()=>a()("instanceManager.home"))),()=>(a(),U(()=>a()("instanceManager.title"))),()=>(_(f),U(()=>_(f)==="vanilla"?"Vanilla":_(f).charAt(0).toLocaleUpperCase()+_(f).slice(1))),()=>(a(),U(()=>a()("instanceManager.version.label")))]),vt("click",D,function(...z){var Be;(Be=_(I))==null||Be.apply(this,z)}),he(n,P),Kt(),i()}function e1(){Ot.activeTab.set("console")}var t1=Me('<a href="https://https://github.com/cosmic-fi/ori-launcher" class="social-item svelte-1vhnadz"><i class="fa-brands fa-github svelte-1vhnadz"></i></a>'),n1=Me('<a href="https://" class="social-item svelte-1vhnadz"><i class="fa-brands fa-discord svelte-1vhnadz"></i></a>'),i1=Me('<a href="https://" class="social-item svelte-1vhnadz"><i class="fa-brands fa-twitter svelte-1vhnadz"></i></a>'),a1=Me('<button class="svelte-1vhnadz"><i class="fa fa-terminal"></i></button>'),r1=async()=>{await window.electron.minimizeApp()},s1=Me('<button class="window-action-btn minimize-app-btn svelte-1vhnadz"><i class="fa fa-minus"></i></button>'),o1=async()=>{await window.electron.closeApp()},l1=Me('<button class="window-action-btn exit-app-btn svelte-1vhnadz"><i class="fa fa-xmark"></i></button>'),c1=Me('<div class="account-name-holder svelte-1vhnadz"> </div>'),u1=()=>Ot.toggleModel.set("accountadder"),d1=Me('<div class="main-content svelte-1vhnadz"><div class="drag-bar svelte-1vhnadz"></div> <div class="wrapper svelte-1vhnadz"><div class="top-container svelte-1vhnadz"><div class="container-group svelte-1vhnadz"><div class="wrapper-group svelte-1vhnadz"><div class="wrapper-item-group social-group svelte-1vhnadz"><!> <!> <!></div> <div class="wrapper-item-group svelte-1vhnadz"><i class="fa fa-earth-asia text-success svelte-1vhnadz"></i> </div></div> <div class="wrapper-group svelte-1vhnadz"><a aria-label="patreon" href="https://buymeacoffee.com/cosmic_fi" class="patreon-btn svelte-1vhnadz"><i class="fa fa-heart"></i> </a></div> <div class="wrapper-group console-btn-wrapper svelte-1vhnadz"><!> <span></span></div></div> <div class="container-group svelte-1vhnadz"><div class="wrapper-group svelte-1vhnadz"><!></div> <div class="wrapper-group svelte-1vhnadz"><!></div></div></div> <div class="bottom-container svelte-1vhnadz"><div class="wrapper svelte-1vhnadz"><div class="left-wrapper svelte-1vhnadz"><!></div> <div class="right-wrapper svelte-1vhnadz"><div class="account-container svelte-1vhnadz"><div class="wrapper svelte-1vhnadz"><div class="skin-container svelte-1vhnadz"><div class="burst-container svelte-1vhnadz"></div> <!></div> <div class="account-action-btn-container svelte-1vhnadz"><button class="account-action-btn add-account-btn btn-accent svelte-1vhnadz" aria-label="Add account"><i class="fa fa-plus"></i> </button></div></div></div> <div class="m-container ads-box svelte-1vhnadz"><div class="wrapper svelte-1vhnadz" id="ad-container"></div> <span class="ad-credit svelte-1vhnadz"><a href="https://github.com/cosmic-fi/beam-i" class="svelte-1vhnadz"> </a></span></div></div></div></div></div></div>');function f1(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=()=>je(Fi,"$isLaunching",t),s=()=>je(Si,"$launchStatus",t),o=()=>je(u,"$activeTab",t),l=()=>je(X0,"$userBurst",t),c=()=>je(mp,"$selectedAccountUsername",t),{activeTab:u}=Ot,d=bp().urls.dungeons.bust;let p=Ve(0),g=[];cr(async()=>{console.log("[MAIN CONTENT] Component mounting"),f(),await ra.initialize();async function Pe(){try{const y=await lx();Se(p,y.totalOnlinePlayers||0)}catch{console.log(a()("mainContent.failedToLoadPlayers"))}}Pe();const C=setInterval(Pe,7e3);return()=>clearInterval(C)}),yu(()=>{var Pe,C;console.log("[MAIN CONTENT] Component destroying - cleaning up listeners"),console.log(`[MAIN CONTENT] Cleaning up ${g.length} individual listeners`),g.forEach((y,H)=>{typeof y=="function"&&(console.log(`[MAIN CONTENT] Executing cleanup function ${H+1}`),y())}),g=[],console.log("[MAIN CONTENT] Calling removeAllLaunchListeners as backup"),(C=(Pe=window.electron).removeAllLaunchListeners)==null||C.call(Pe)});function f(){var Pe,C;console.log(`[MAIN CONTENT] Cleaning up ${g.length} existing listeners`),g.forEach(y=>{typeof y=="function"&&y()}),g=[],(C=(Pe=window.electron).removeAllLaunchListeners)==null||C.call(Pe),setTimeout(()=>{var pe,Q,fe,ve,We,Ke,Ye,mt,Qe,kt,xt,Sn,Un,hn,rn,Mn;console.log(`${a()("logs.debugger.addingEventListeners")}`);const y=st=>{Cn.setStatus("running"),It.info(`‚ñ† ${st}`),console.log(st)},H=(Q=(pe=window.electron).onLaunchData)==null?void 0:Q.call(pe,y);H&&g.push(H);const ce=st=>{console.log(st),It.warn(`‚ñΩ ${a()("mainContent.launch.launchStatus.downloading")} ${st.element}.... ${(st.progress/st.size*100).toFixed(2)}%`),Cn.setStatus("downloading"),Cn.setLaunching(!0),ra.setDownloadingActivity(st.percentage||0)},ue=(ve=(fe=window.electron).onLaunchProgress)==null?void 0:ve.call(fe,ce);ue&&g.push(ue);const ge=async st=>{It.error(`‚Äª ${st.error}`),console.log(st),!st.recoverable&&r()&&(window.electron.cancelLaunch(),Cn.reset(),await It.endSession())},ke=(Ke=(We=window.electron).onError)==null?void 0:Ke.call(We,ge);ke&&g.push(ke);const xe=async st=>{console.log(st),Cn.setError(st.message),r()&&(window.electron.cancelLaunch(),Cn.reset(),await It.endSession())},te=(mt=(Ye=window.electron).onLaunchError)==null?void 0:mt.call(Ye,xe);te&&g.push(te);const L=st=>{It.warn(`‚Äª ${a()("mainContent.launch.launchStatus.extracting")} ... ${st}`),Cn.setStatus("extracting")},$=(kt=(Qe=window.electron).onLaunchExtract)==null?void 0:kt.call(Qe,L);$&&g.push($);const oe=st=>{It.warn(`‚ÅÇ ${a()("mainContent.launch.launchStatus.verifying")} ... ${st}`),Cn.setStatus("verifying")},se=(Sn=(xt=window.electron).onLaunchCheck)==null?void 0:Sn.call(xt,oe);se&&g.push(se);const le=async st=>{Cn.reset(),await It.endSession(),ra.setIdleActivity()},Le=(hn=(Un=window.electron).onLaunchClose)==null?void 0:hn.call(Un,le);Le&&g.push(Le);const Ne=st=>{It.info(`‡µ† ${st.message}`),Cn.reset()},k=(Mn=(rn=window.electron).onLaunchCancelled)==null?void 0:Mn.call(rn,Ne);k&&g.push(k),console.log(`${a()("logs.debugger.eventSetupComplete")} ${g.length}`)},50)}nn();var v=d1(),h=N(S(v),2),m=S(h),M=S(m),b=S(M),w=S(b),R=S(w);{let Pe=Ze(()=>a()("mainContent.social.github"));tn(R,{get text(){return _(Pe)},direction:"bottom",children:(C,y)=>{var H=t1();De(ce=>un(H,"aria-label",ce),[()=>a()("social.github")]),he(C,H)},$$slots:{default:!0}})}var P=N(R,2);{let Pe=Ze(()=>a()("mainContent.social.discord"));tn(P,{get text(){return _(Pe)},direction:"bottom",children:(C,y)=>{var H=n1();De(ce=>un(H,"aria-label",ce),[()=>a()("social.discord")]),he(C,H)},$$slots:{default:!0}})}var A=N(P,2);{let Pe=Ze(()=>a()("mainContent.social.twitter"));tn(A,{get text(){return _(Pe)},direction:"bottom",children:(C,y)=>{var H=i1();De(ce=>un(H,"aria-label",ce),[()=>a()("social.twitter")]),he(C,H)},$$slots:{default:!0}})}var G=N(w,2),x=N(S(G)),E=N(b,2),W=S(E),q=N(S(W),1,!0),D=N(E,2),I=S(D);{let Pe=Ze(()=>a()("mainContent.console"));tn(I,{get text(){return _(Pe)},direction:"bottom",children:(C,y)=>{var H=a1();H.__click=[e1],De(ce=>un(H,"aria-label",ce),[()=>a()("mainContent.console")]),he(C,H)},$$slots:{default:!0}})}var F=N(I,2);let J;var O=N(M,2),j=S(O),ne=S(j);{let Pe=Ze(()=>a()("mainContent.minimize"));tn(ne,{get text(){return _(Pe)},direction:"bottom",children:(C,y)=>{var H=s1();H.__click=[r1],De(ce=>un(H,"aria-label",ce),[()=>a()("mainContent.minimize")]),he(C,H)},$$slots:{default:!0}})}var re=N(j,2),B=S(re);{let Pe=Ze(()=>a()("mainContent.closeApp"));tn(B,{get text(){return _(Pe)},direction:"bottom",children:(C,y)=>{var H=l1();H.__click=[o1],De(ce=>un(H,"aria-label",ce),[()=>a()("mainContent.closeApp")]),he(C,H)},$$slots:{default:!0}})}var Z=N(m,2),de=S(Z),me=S(de),be=S(me);{var Re=Pe=>{Tx(Pe,{})},Ce=Pe=>{var C=ii(),y=jt(C);{var H=ue=>{QT(ue,{})},ce=ue=>{var ge=ii(),ke=jt(ge);{var xe=L=>{Nx(L,{})},te=L=>{var $=ii(),oe=jt($);{var se=le=>{$T(le,{})};at(oe,le=>{o()==="accountmanager"&&le(se)},!0)}he(L,$)};at(ke,L=>{o()==="console"?L(xe):L(te,!1)},!0)}he(ue,ge)};at(y,ue=>{o()==="instance-manager"?ue(H):ue(ce,!1)},!0)}he(Pe,C)};at(be,Pe=>{o()==="launch"?Pe(Re):Pe(Ce,!1)})}var _e=N(me,2),Ie=S(_e),ct=S(Ie),ze=S(ct),z=S(ze),Be=N(z,2);{var Ee=Pe=>{var C=c1(),y=S(C);De(()=>ae(y,c())),he(Pe,C)};at(Be,Pe=>{c()&&Pe(Ee)})}var Ue=N(ze,2),Fe=S(Ue);Fe.__click=[u1];var lt=N(S(Fe)),ye=N(Ie,2),we=N(S(ye),2),Ge=S(we),ut=S(Ge);De((Pe,C,y,H,ce,ue)=>{ae(x,` ${Pe??""} ${C??""}`),ae(q,y),J=gt(F,1,"isntance-minecraft svelte-1vhnadz",null,J,H),ni(z,`background: url(${(l()||d)??""});`),ae(lt,` ${ce??""}`),ae(ut,ue)},[()=>Z0(_(p)),()=>a()("mainContent.playersOnline"),()=>a()("mainContent.supportProject"),()=>({blink:s()!=="ready",idle:s()!=="running",launching:s()!=="running"&&s()!=="ready",running:s()==="running"}),()=>a()("mainContent.addAccount"),()=>a()("mainContent.adCredit")]),he(n,v),Kt(),i()}gl(["click"]);var h1=Me('<button class="btn-item svelte-ex38um"><!></button>'),p1=Me('<div><div class="active-indicator svelte-ex38um"></div> <!></div>'),m1=()=>Ot.toggleModel.set("settings"),g1=Me('<button class="btn-item svelte-ex38um" aria-label="Settings"><i class="fa fa-gear"></i></button>'),v1=Me('<div class="side-bar svelte-ex38um"><div class="brand svelte-ex38um"><img class="logo-light-primary svelte-ex38um" src="./images/logo/logo-primary.svg" alt="Ori Launcher"/></div> <div class="nav-btn-container svelte-ex38um"><div class="btn-group svelte-ex38um"></div> <div class="btn-group svelte-ex38um"><div class="nav-btn svelte-ex38um" simple-tip="right" tip-text="Settings"><div class="active-indicator svelte-ex38um"></div> <!></div></div></div></div>');function _1(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=()=>je(q0,"$hasAnyAccount",t),s=Ve(),o=Ve();let l=Ve(0);function c(h,m){Ot.activeTab.set(h.tabIndex),Se(l,m)}ft(()=>(a(),r()),()=>{Se(s,[{label:a()("sidebar.buttons.home"),isDisabled:!1,isActive:!0,icon:'<i class="fa fa-home"></i>',tabIndex:"launch"},{label:a()("sidebar.buttons.instanceManager"),isDisabled:!1,isActive:!1,icon:'<i class="fa fa-cube"></i>',tabIndex:"instance-manager"},{label:a()("sidebar.buttons.accountManager"),isDisabled:!r(),isActive:!1,icon:'<i class="fa fa-user"></i>',tabIndex:"accountmanager"}])}),ft(()=>_(s),()=>{Se(o,_(s).map(h=>h.tabIndex))}),ft(()=>_(s),()=>{Ot.activeTab.subscribe(h=>{const m=_(s).findIndex(M=>M.tabIndex===h);m!==-1?Se(l,m):Se(l,-1)})}),Ci(),nn();var u=v1(),d=N(S(u),2),p=S(d);vn(p,5,()=>_(s),Ln,(h,m,M)=>{var b=p1(),w=N(S(b),2);tn(w,{get text(){return _(m),U(()=>_(m).label)},direction:"right",children:(R,P)=>{var A=h1();A.__click=()=>c(_(m),M);var G=S(A);Vs(G,()=>(_(m),U(()=>_(m).icon))),De(()=>{un(A,"aria-label",(_(m),U(()=>_(m).label))),A.disabled=(_(m),U(()=>_(m).isDisabled))}),he(R,A)},$$slots:{default:!0}}),De(()=>gt(b,1,`nav-btn ${M===_(l)?"active":""}`,"svelte-ex38um")),he(h,b)});var g=N(p,2),f=S(g),v=N(S(f),2);{let h=Ze(()=>(a(),U(()=>a()("sidebar.settings"))));tn(v,{get text(){return _(h)},direction:"right",children:(m,M)=>{var b=g1();b.__click=[m1],he(m,b)},$$slots:{default:!0}})}he(n,u),Kt(),i()}gl(["click"]);var b1=Me('<button class="c-close-btn svelte-1wn6ni4"><i class="fa fa-xmark svelte-1wn6ni4"></i></button>'),x1=Me('<i class="fa fa-spinner fa-spin svelte-1wn6ni4"></i>'),y1=Me('<i class="fa-brands fa-microsoft svelte-1wn6ni4"></i>'),S1=Me('<div class="ac-type-container svelte-1wn6ni4"><button class="ac-type-item svelte-1wn6ni4"><span class="ac-type-title svelte-1wn6ni4"><!> </span> <span class="ac-type-description svelte-1wn6ni4"> </span></button> <button class="ac-type-item offline svelte-1wn6ni4"><span class="ac-type-title svelte-1wn6ni4"><i class="fa fa-link-slash svelte-1wn6ni4"></i> </span> <span class="ac-type-description svelte-1wn6ni4"> </span></button></div>'),M1=Me('<div class="form-error text-danger svelte-1wn6ni4"> </div>'),E1=Me('<i class="fa fa-spinner fa-spin svelte-1wn6ni4"></i> ',1),w1=Me('<div class="offline-account-form svelte-1wn6ni4"><form class="input-form svelte-1wn6ni4"><div class="description-input-cont svelte-1wn6ni4"><span class="form-description svelte-1wn6ni4"> </span> <input type="text" name="offline-name-input" id="offline-account-name" maxlength="16"/> <!></div> <div class="button-group svelte-1wn6ni4"><button class="cancel-btn svelte-1wn6ni4" type="button"> </button> <button type="submit" class="svelte-1wn6ni4"><!></button></div></form></div>'),A1=Me('<div class="account-adder-container svelte-1wn6ni4"><div class="wrapper account-type-option-container svelte-1wn6ni4"><div class="container-header svelte-1wn6ni4"><span class="c-title svelte-1wn6ni4"> </span> <!></div> <!></div></div>');function T1(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=()=>je(dr,"$accountsStore",t),s=Ve();ur();let o=Ve(!1),l=Ve(""),c=Ve(""),u=Ve(!1),d=Ve(!1);function p(E){return!E.trim()||E.length<3||E.length>16?!1:/^[a-zA-Z0-9_]+$/.test(E)}function g(E){Se(l,E.target.value),_(l).trim()?_(l).length<3?Se(c,a()("accountAdder.offlineAccountForm.usernameTooShort")):_(l).length>16?Se(c,a()("accountAdder.offlineAccountForm.usernameTooLong")):/^[a-zA-Z0-9_]+$/.test(_(l))?Se(c,""):Se(c,a()("accountAdder.offlineAccountForm.usernameInvalidCharacters")):Se(c,a()("accountAdder.offlineAccountForm.usernameRequired"))}function f(E){E==="offline"?Se(o,!0):(Se(d,!0),Ot.toggleModel.set("invoker"),window.electron.invoke("add-account","hello").then(async W=>{const q=JSON.parse(W),D=q.mc;if(console.log(q.extra),!q.success)Ot.toggleModel.set("none"),Se(d,!1),$t(a()("accountAdder.failedToAddAccount"),"error");else{let I={type:"online",uuid:D.uuid,access_token:D.access_token,refresh_token:q.extra.parent.msToken.refresh_token,client_id:D.client_id,meta:D.meta,name:D.name,user_properties:D.user_properties,profile:q.extra.profile};r().length<=0&&Wr(I.uuid),console.log("before adding",r().length<=0,r(),I.uuid);try{await Gc(I),Wr(I.uuid),console.log("after adding",r().length<=0,r(),I.uuid),$t(a()("accountAdder.accountAdded"),"info")}catch(F){console.error("Error adding account:",F),$t(a()("accountAdder.failedToAddAccount"),"error")}finally{Ot.toggleModel.set("none"),Se(d,!1)}}}).catch(W=>{console.error("Authentication error:",W),Ot.toggleModel.set("none"),Se(d,!1),$t(a()("accountAdder.failedToAddAccount"),"error")}))}function v(){Ot.toggleModel.set("none")}async function h(E){if(E.preventDefault(),!p(_(l)))return;let W=Q0();Se(u,!0);const q={type:"offline",access_token:0,client_id:0,meta:{},name:_(l).trim(),user_properties:{},uuid:W,profile:{}};try{await Gc(q),Wr(W),Se(l,""),Se(o,!1),$t(a()("accountAdder.accountAdded"),"info"),Ot.toggleModel.set("none"),console.log(q)}catch(D){console.error("Error adding offline account:",D),$t(a()("accountAdder.failedToAddAccount"),"error")}finally{Se(u,!1)}}ft(()=>_(l),()=>{Se(s,p(_(l)))}),Ci(),nn();var m=A1(),M=S(m),b=S(M),w=S(b),R=S(w),P=N(w,2);{let E=Ze(()=>(a(),U(()=>a()("accountAdder.close"))));tn(P,{get text(){return _(E)},direction:"bottom",children:(W,q)=>{var D=b1();De(I=>{un(D,"aria-label",I),D.disabled=_(u)||_(d)},[()=>(a(),U(()=>a()("accountAdder.close")))]),vt("click",D,v),he(W,D)},$$slots:{default:!0}})}var A=N(b,2);{var G=E=>{var W=S1(),q=S(W),D=S(q),I=S(D);{var F=be=>{var Re=x1();he(be,Re)},J=be=>{var Re=y1();he(be,Re)};at(I,be=>{_(d)?be(F):be(J,!1)})}var O=N(I),j=N(D,2),ne=S(j),re=N(q,2),B=S(re),Z=N(S(B)),de=N(B,2),me=S(de);De((be,Re,Ce,_e)=>{q.disabled=_(d),ae(O,` ¬†${be??""}`),ae(ne,Re),re.disabled=_(d),ae(Z,`¬†${Ce??""}`),ae(me,_e)},[()=>(_(d),a(),U(()=>_(d)?a()("accountAdder.addingAccount"):a()("accountAdder.addMinecraftAccount"))),()=>(_(d),a(),U(()=>_(d)?a()("accountAdder.addingAccountDescription"):a()("accountAdder.addMinecraftAccountDescription"))),()=>(a(),U(()=>a()("accountAdder.addOfflineAccount"))),()=>(a(),U(()=>a()("accountAdder.addOfflineAccountDescription")))]),vt("click",q,()=>f("online")),vt("click",re,()=>f("offline")),he(E,W)},x=E=>{var W=w1(),q=S(W),D=S(q),I=S(D),F=S(I),J=N(I,2);let O;var j=N(J,2);{var ne=Ce=>{var _e=M1(),Ie=S(_e);De(()=>ae(Ie,_(c))),he(Ce,_e)};at(j,Ce=>{_(c)&&Ce(ne)})}var re=N(D,2),B=S(re),Z=S(B),de=N(B,2),me=S(de);{var be=Ce=>{var _e=E1(),Ie=N(jt(_e));De(ct=>ae(Ie,`¬†${ct??""}`),[()=>(a(),U(()=>a()("accountAdder.offlineAccountForm.saving")))]),he(Ce,_e)},Re=Ce=>{var _e=$a();De(Ie=>ae(_e,Ie),[()=>(a(),U(()=>a()("accountAdder.offlineAccountForm.save")))]),he(Ce,_e)};at(me,Ce=>{_(u)?Ce(be):Ce(Re,!1)})}De((Ce,_e,Ie,ct)=>{ae(F,Ce),un(J,"placeholder",_e),J.disabled=_(u),O=gt(J,1,"svelte-1wn6ni4",null,O,Ie),B.disabled=_(u),ae(Z,ct),de.disabled=_(u)||!_(s)},[()=>(a(),U(()=>a()("accountAdder.offlineAccountForm.enterUsername"))),()=>(a(),U(()=>a()("accountAdder.offlineAccountForm.usernamePlaceholder"))),()=>({error:_(c)}),()=>(a(),U(()=>a()("accountAdder.offlineAccountForm.cancel")))]),Vh(J,()=>_(l),Ce=>Se(l,Ce)),vt("input",J,g),vt("click",B,()=>{Se(o,!1),Se(l,"")}),vt("submit",q,h),he(E,W)};at(A,E=>{_(o)?E(x,!1):E(G)})}De(E=>ae(R,E),[()=>(_(o),a(),U(()=>_(o)?a()("accountAdder.addOfflineAccount"):a()("accountAdder.selectAccountType")))]),he(n,m),Kt(),i()}var R1=Me('<div class="invoker fade-in svelte-103qrt9"><span class="blink svelte-103qrt9"> </span> <p class="description svelte-103qrt9"> <br/>*<span class="svelte-103qrt9"> </span></p></div>');function C1(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t);nn();var r=R1(),s=S(r),o=S(s),l=N(s,2),c=S(l),u=N(c,3),d=S(u);De((p,g,f)=>{ae(o,p),ae(c,`${g??""} `),ae(d,f)},[()=>a()("invoker.loading"),()=>a()("invoker.description"),()=>a()("invoker.closeNote")]),he(n,r),Kt(),i()}var P1=Me('<button type="button" class="svelte-1u9k92t"> </button>'),L1=Me('<div class="folder-picker svelte-1u9k92t"><input type="text" class="svelte-1u9k92t"/> <!></div>');function Bo(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t);let r=_t(e,"value",12,""),s=_t(e,"label",8,""),o=_t(e,"actionType",8,"open"),l=_t(e,"placeholder",24,()=>a()("folderPicker.noFolderSelected")),c=_t(e,"disabled",8,!1),u=_t(e,"readonly",8,!1),d=_t(e,"inputReadOnly",8,!1);const p=ur();async function g(){if(o()==="open")await nx(r());else{const M=await tx();M&&(r(M),p("change",{value:M}))}}function f(M){p("change",{value:M.target.value})}nn();var v=L1(),h=S(v),m=N(h,2);{let M=Ze(()=>(Gn(o()),a(),U(()=>o()==="open"?a()("folderPicker.browse"):a()("folderPicker.pick"))));tn(m,{get text(){return _(M)},direction:"bottom",children:(b,w)=>{var R=P1(),P=S(R);De(()=>{R.disabled=c()||u(),ae(P,`üìÇ ${s()??""}`)}),vt("click",R,g),he(b,R)},$$slots:{default:!0}})}De(()=>{un(h,"placeholder",l()),h.readOnly=d()}),Vh(h,r),vt("input",h,f),he(n,v),Kt(),i()}var D1=Me('<span class="toggle-label"> </span>'),k1=Me('<span class="toggle-description"> </span>'),U1=Me('<div tabindex="0" role="switch"><div class="toggle-slider svelte-1cyuh5x"></div></div> <!> <!>',1);function Ui(n,e){Yt(e,!1);let t=_t(e,"checked",12,!1),i=_t(e,"disabled",8,!1),a=_t(e,"label",8,""),r=_t(e,"description",8,"");function s(){i()||(t(!t()),o("change",{checked:t()}))}const o=ur();nn();var l=U1(),c=jt(l),u=N(c,2);{var d=f=>{var v=D1(),h=S(v);De(()=>ae(h,a())),he(f,v)};at(u,f=>{a()&&f(d)})}var p=N(u,2);{var g=f=>{var v=k1(),h=S(v);De(()=>ae(h,r())),he(f,v)};at(p,f=>{r()&&f(g)})}De(()=>{gt(c,1,`toggle-btn ${t()?"active-toggle":""} ${i()?"disabled":""}`,"svelte-1cyuh5x"),un(c,"aria-checked",t())}),vt("click",c,s),he(n,l),Kt()}const dm=Dt("1.0.0");async function I1(){try{const n=await window.electron.invoke("get-app-version");return dm.set(n.version),n.version}catch(n){return console.error("Failed to fetch app version:",n),"1.0.0"}}var N1=Me('<button><div class="theme-preview svelte-1xmi1yj"><span class="theme-accent-color theme-element svelte-1xmi1yj"></span> <span class="theme-text-color theme-element svelte-1xmi1yj"></span> <span class="theme-name svelte-1xmi1yj"> </span></div></button>');function O1(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(dt,"$settings",t),r=Ve(),s=ur();let o=_t(e,"displayName",8),l=_t(e,"colors",24,()=>[]),c=_t(e,"value",8,null);function u(){s("selecttheme",{value:c()})}ft(()=>(a(),Gn(c())),()=>{var m,M,b;Se(r,((b=(M=(m=a().general)==null?void 0:m.appearance)==null?void 0:M.theme)==null?void 0:b.value)===c())}),Ci(),nn();var d=N1(),p=S(d),g=S(p),f=N(g,2),v=N(f,2),h=S(v);De(()=>{gt(d,1,`theme-card ${_(r)?"selected":""}`,"svelte-1xmi1yj"),ni(d,`background-color: ${Gn(l()),U(()=>l()[0])??""};`),ks(d,c()),ni(g,`background-color: ${Gn(l()),U(()=>l()[1])??""};`),ni(f,`background-color: ${Gn(l()),U(()=>l()[2])??""}`),ni(v,`color: ${Gn(l()),U(()=>l()[2])??""};`),ae(h,o())}),vt("click",d,u),he(n,d),Kt(),i()}var F1=Me('<div class="resolution-picker svelte-11e8iee"><!></div>');function B1(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t),r=Ve(),s=ur();let o=_t(e,"width",8,1920),l=_t(e,"height",8,1080),c=_t(e,"fullscreen",8,!1);const u=[{value:"fullscreen",label:a()("settings.game.display.fullscreen")},{value:"1920x1080",label:"1920x1080 (Full HD)"},{value:"2560x1440",label:"2560x1440 (2K)"},{value:"3840x2160",label:"3840x2160 (4K)"},{value:"1366x768",label:"1366x768 (HD)"},{value:"1280x720",label:"1280x720 (HD)"},{value:"1600x900",label:"1600x900 (HD+)"},{value:"1440x900",label:"1440x900 (WXGA+)"},{value:"1024x768",label:"1024√óx768 (XGA)"}];function d(f){const v=f.detail.value;if(v==="fullscreen"){s("resolutionchange",{width:"fullscreen",height:"fullscreen"});return}const[h,m]=v.split("x").map(Number);s("resolutionchange",{width:h,height:m})}ft(()=>(Gn(c()),a(),Gn(o()),Gn(l())),()=>{Se(r,c()?a()("settings.game.display.fullscreen"):`${o()}x${l()}`)}),Ci(),nn();var p=F1(),g=S(p);Al(g,{get options(){return u},get value(){return _(r)},preferredPosition:"down",id:"resolution",$$events:{optionchange:d}}),he(n,p),Kt(),i()}let Ds=n=>n;an.subscribe(n=>Ds=n);async function fm(){try{const n=await window.electron.invoke("get-app-version"),e=await fetch("https://api.github.com/repos/cosmic-fi/Ori-Launcher/releases/latest",{headers:{Accept:"application/vnd.github.v3+json","User-Agent":"OriLauncher/2.0.0"}});if(!e.ok)return console.log("GitHub API not available, skipping version check"),null;const t=await e.json(),i=t.tag_name.replace(/^v/,"");return console.log(`Current: ${n.version}, Latest: ${i}`),i!==n.version?{available:!0,current:n.version,latest:i,releaseNotes:t.body,downloadUrl:t.html_url,assets:t.assets}:{available:!1,current:n.version,latest:i}}catch(n){return console.log("Version check failed:",n.message),null}}async function hm(n){return new Promise(e=>{Ws({title:Ds("notifications.updateAvailable"),message:`${Ds("notifications.updateAvailableMessage")}

Current: ${n.current}
Latest: ${n.latest}`,buttons:[{label:Ds("notifications.updateNow"),primary:!0,action:()=>{window.electron.openExternal(n.downloadUrl||"https://github.com/cosmic-fi/Ori-Launcher/releases"),e(!0)}},{label:Ds("notifications.later"),primary:!1,action:()=>{console.log("Update reminder skipped"),e(!1)}}]})})}var z1=(n,e)=>e("General"),G1=(n,e)=>e("Launcher"),H1=(n,e)=>e("Game"),V1=(n,e)=>e("Storage"),W1=(n,e)=>e("Developer"),$1=Me("<button> </button>"),j1=(n,e)=>e("About"),X1=Me('<div class="setting-group general-settings svelte-1x217di"><div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group px-0 svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span> <div class="theme-cards-container svelte-1x217di"></div></div></div> <hr class="setting-seperator svelte-1x217di"/> <div class="sub-item-group px-0 svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div> <hr class="setting-seperator svelte-1x217di"/> <div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div></div>'),q1=Me('<div class="usage svelte-1x217di"></div>'),Y1=Me('<div class="slider-tick"></div>'),K1=Me('<div class="slider-label svelte-1x217di"> </div>'),J1=Me(`<div class="setting-group game-settings svelte-1x217di"><div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div></div> <br/> <div class="ram-slider-container svelte-1x217di"><span class="min-ram rsize svelte-1x217di">1%</span> <div class="slider-container svelte-1x217di"><!> <!> <!> <div id="ram-slider-track" style="
                                            background-color: #3233334d;
                                            position: absolute; left: 0%; top: 50%; width: 100%; height: 24px; transform: translateY(-50%); cursor: pointer; z-index: 2;"><div class="ram-slider-thumb"></div> <div class="ram-slider-value"> </div></div></div> <span class="max-ram rsize svelte-1x217di">100%</span></div> <br/></div> <div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div> <hr class="setting-seperator svelte-1x217di"/> <div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <input type="text" class="s-input svelte-1x217di" placeholder="e.g. java -Xmx4G -jar minecraft.jar"/></div> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <input type="text" class="s-input svelte-1x217di" placeholder="e.g. -Xmx4G -XX:+UseG1GC"/></div> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <input type="text" class="s-input svelte-1x217di" placeholder="e.g. JAVA_HOME=/usr/lib/jvm/java-17"/></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div></div>`),Z1=Me('<div class="setting-group network-settings svelte-1x217di"><div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div> <hr class="setting-seperator svelte-1x217di"/> <div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div> <hr class="setting-seperator svelte-1x217di"/> <div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div> <div class="sub-item-group notification-category-container svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <div class="notification-categories svelte-1x217di"><div class="category-item svelte-1x217di"><span class="svelte-1x217di"> </span> <!></div> <div class="category-item svelte-1x217di"><span class="svelte-1x217di"> </span> <!></div></div></div></div></div>'),Q1=Me('<div class="setting-group storage-settings svelte-1x217di"><div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div> <div class="sub-item-group folder-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div></div>'),eR=Me('<div class="setting-group developer-settings svelte-1x217di"><div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"> </span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <!></div></div></div>'),tR=Me('<i class="fa fa-spinner fa-spin"></i> Checking...',1),nR=Me('<div class="setting-group about-settings svelte-1x217di"><div class="setting-item-group svelte-1x217di"><span class="group-sub-label svelte-1x217di"><div class="banner svelte-1x217di"></div></span> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div> <button><!></button></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"><!>.<br/> </span></div></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"><ul><li><a href="https://svelte.dev/" target="_blank" rel="noopener noreferrer">Svelte - Reactive UI Framework</a></li> <li><a href="https://fontawesome.com/" target="_blank" rel="noopener noreferrer">Font Awesome - Icon Library</a></li> <li><a href="https://skin3d.vercel.app/" target="_blank" rel="noopener noreferrer">Skin3d - 3d skin rendering</a></li> <li> </li></ul></span></div></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"><ul><li><a href="https://github.com/cosmic-fi/ori-mcc" target="_blank" rel="noopener noreferrer">Ori MCC - Game launching & version management</a></li> <li><a href="https://www.npmjs.com/package/msmc" target="_blank" rel="noopener noreferrer">MSMC - Authentication & Account refreshing</a></li> <li><a href="https://lunareclipse.studio/creations/starlight-skinapi" target="_blank" rel="noopener noreferrer">Starlight Skins - Skin API</a></li></ul></span></div></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"><a href="https://github.com/cosmic-fi/ori-launcher" target="_blank">Github Repository</a></span></div></div> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"><i class="fa fa-heart"></i> </span> <span class="group-description svelte-1x217di" style="margin-top: 0.5em;"> <a href="https://www.buymeacoffee.com/cosmic_fi" target="_blank" rel="noopener noreferrer"><i class="fa fa-heart"></i> </a></span></div></div> <hr class="setting-seperator svelte-1x217di"/> <div class="sub-item-group svelte-1x217di"><div class="toggle-label-group svelte-1x217di"><span class="toggle-label"> </span> <span class="group-description svelte-1x217di"> </span></div></div></div></div>'),iR=()=>Ot.toggleModel.set("none"),aR=Me('<div class="settings svelte-1x217di"><div class="s-wrapper svelte-1x217di"><div class="sidebar svelte-1x217di"><div class="sb-header svelte-1x217di"><span class="header-title svelte-1x217di"><i class="fa fa-gear"></i> </span></div> <div class="sb-category-container svelte-1x217di"><div class="sb-category-item svelte-1x217di"><button> </button> <button> </button> <button> </button> <button> </button> <!> <button> </button></div></div></div> <div class="right-content svelte-1x217di"><div class="top-content-container setting-content-container svelte-1x217di"><!> <!> <!> <!> <!> <!></div> <div class="save-btn-container svelte-1x217di"><button class="setting-reset-btn settings-rest-btn svelte-1x217di"> </button> <button class="setting-save-btn  ss settings-close-btn svelte-1x217di"> </button></div></div></div></div>');function rR(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(dt,"$settings",t),r=()=>je(an,"$t",t),s=()=>je(dm,"$appVersion",t),o=Ve(),l=Ve(),c=Ve();let u=null,d=Ve();cr(async()=>{u=await ex(),Se(d,u)});let p=Ve("General"),g=0;const f=9;let v=Ve(!1),h=null;function m($){Se(p,$)}function M($){dt.updatePath("general.appearance.theme",$.detail.value),document.body.setAttribute("data-theme",$.detail.value)}function b($){const oe=$.detail.value;Mu.set(oe),dt.updatePath("general.appearance.language",$.detail.value)}function w(){dt.reset()}function R($){$.detail.width==="fullscreen"?dt.updatePath("game.resolution.fullscreen",!0):(dt.updatePath("game.resolution.fullscreen",!1),dt.updatePath("game.resolution.width",$.detail.width),dt.updatePath("game.resolution.height",$.detail.height))}let P=Ve(0),A=!1;function G($){A=!0,W($),window.addEventListener("pointermove",x),window.addEventListener("pointerup",E)}function x($){A&&W($)}function E(){A=!1,window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",E)}function W($){const se=document.getElementById("ram-slider-track").getBoundingClientRect();let Le=(($.touches?$.touches[0].clientX:$.clientX)-se.left)/se.width*99;Le=Math.max(0,Math.min(99,Le)),Se(P,Math.round(Le));const Ne=Math.max(1,Math.round(_(P)/99*(_(d)-1)+1));dt.updatePath("game.performance.ramAllocation.max",Ne),console.log("Selected RAM:",Ne,"GB")}function q(){var oe,se;if((se=(oe=a().developer)==null?void 0:oe.isDeveloper)!=null&&se.value){$t(`${r()("settings.about.alreadyADevMessage")}`,"info",1e3);return}g++,f-g===0&&(dt.updatePath("developer.isDeveloper",!0),$t(r()("settings.about.devUnlockedMessage"),"info",4e3),g=0),setTimeout(()=>{g<f&&(g=0)},1e4)}async function D(){var $,oe,se;if(!_(v)){Se(v,!0),h=null;try{const le=await fm();le!=null&&le.available?(h={type:"success",message:"Update available!",updateInfo:le},(se=(oe=($=a().launcher)==null?void 0:$.notification)==null?void 0:oe.updateNotification)!=null&&se.value&&Mp.showUpdateAvailable(le.latest),await hm(le)):le?(h={type:"info",message:"Your launcher is up to date!"},$t("Your launcher is up to date!","info",3e3)):(h={type:"error",message:"Failed to check for updates (GitHub API unavailable)"},$t("Failed to check for updates","error",3e3))}catch(le){console.error("Error checking for updates:",le),h={type:"error",message:le.message||"An unexpected error occurred"},$t("Error checking for updates","error",3e3)}finally{Se(v,!1)}}}ft(()=>a(),()=>{var $,oe,se,le;Se(o,(le=(se=(oe=($=a())==null?void 0:$.general)==null?void 0:oe.appearance)==null?void 0:se.launcherStyle)==null?void 0:le.value)}),ft(()=>r(),()=>{Se(l,[{value:"light",label:r()("settings.general.appearance.theme.themes.light"),colors:["#f5f6fa","#8A2BE2","#23272a"]},{value:"dark",label:r()("settings.general.appearance.theme.themes.dark"),colors:["#111011","#8A2BE2","#FFFFFF"]},{value:"minimal",label:r()("settings.general.appearance.theme.themes.minimal"),colors:["#ffffff","#8A2BE2","#222222"]},{value:"after-glow",label:r()("settings.general.appearance.theme.themes.after-glow"),colors:["#232136","#8A2BE2","#e0def4"]},{value:"retro-80s",label:r()("settings.general.appearance.theme.themes.retro-80s"),colors:["#1a1a2e","#8A2BE2","#f5f6fa"]},{value:"oceanic",label:r()("settings.general.appearance.theme.themes.oceanic"),colors:["#1b2b34","#8A2BE2","#d8dee9"]},{value:"pastel",label:r()("settings.general.appearance.theme.themes.pastel"),colors:["#fdf6f0","#8A2BE2","#6d6875"]}])}),ft(()=>{},()=>{Se(c,[{value:"en",label:"English"},{value:"id",label:"Bahasa Indonesia"},{value:"tr",label:"T√ºrk√ße"},{value:"fr",label:"Fran√ßais"},{value:"es",label:"Espa√±ol"}])}),ft(()=>(a(),ra),()=>{var $,oe,se,le,Le,Ne,k;if(((le=(se=(oe=($=a())==null?void 0:$.launcher)==null?void 0:oe.integration)==null?void 0:se.discordRichPresence)==null?void 0:le.value)!==void 0){const pe=(k=(Ne=(Le=a().launcher)==null?void 0:Le.integration)==null?void 0:Ne.discordRichPresence)==null?void 0:k.value;ra.updateSettings(pe).then(()=>{pe&&ra.refreshActivity()}).catch(Q=>{console.error("Failed to update Discord RPC settings:",Q)})}}),ft(()=>(_(d),a()),()=>{var $,oe,se,le,Le,Ne,k,pe;if(_(d)&&((le=(se=(oe=($=a().game)==null?void 0:$.performance)==null?void 0:oe.ramAllocation)==null?void 0:se.max)!=null&&le.value)){const Q=Math.max(1,Math.min((pe=(k=(Ne=(Le=a().game)==null?void 0:Le.performance)==null?void 0:Ne.ramAllocation)==null?void 0:k.max)==null?void 0:pe.value,_(d)));Se(P,Math.round((Q-1)/(_(d)-1)*99))}}),Ci(),nn();var I=aR(),F=S(I),J=S(F),O=S(J),j=S(O),ne=N(S(j)),re=N(O,2),B=S(re),Z=S(B);Z.__click=[z1,m];var de=S(Z),me=N(Z,2);me.__click=[G1,m];var be=S(me),Re=N(me,2);Re.__click=[H1,m];var Ce=S(Re),_e=N(Re,2);_e.__click=[V1,m];var Ie=S(_e),ct=N(_e,2);{var ze=$=>{var oe=$1();oe.__click=[W1,m];var se=S(oe);De(le=>{gt(oe,1,`cf-btn ${_(p)==="Developer"?"active-tab":""}`,"svelte-1x217di"),ae(se,le)},[()=>(r(),U(()=>r()("settings.tabs.developer")))]),he($,oe)};at(ct,$=>{a(),U(()=>{var oe,se;return(se=(oe=a().developer)==null?void 0:oe.isDeveloper)==null?void 0:se.value})&&$(ze)})}var z=N(ct,2);z.__click=[j1,m];var Be=S(z),Ee=N(J,2),Ue=S(Ee),Fe=S(Ue);{var lt=$=>{var oe=X1(),se=S(oe),le=S(se),Le=S(le),Ne=N(le,2),k=S(Ne),pe=S(k),Q=S(pe),fe=N(pe,2),ve=S(fe),We=N(fe,2);vn(We,5,()=>_(l),V=>V.label,(V,K)=>{{let Y=Ze(()=>(a(),_(K),U(()=>{var ee,Te,Oe;return((Oe=(Te=(ee=a().general)==null?void 0:ee.appearance)==null?void 0:Te.theme)==null?void 0:Oe.value)===_(K).value})));O1(V,{get value(){return _(K),U(()=>_(K).value)},get displayName(){return _(K),U(()=>_(K).label)},get selected(){return _(Y)},get colors(){return _(K),U(()=>_(K).colors)},$$events:{selecttheme:M}})}});var Ke=N(Ne,4),Ye=S(Ke),mt=S(Ye),Qe=S(mt),kt=N(mt,2),xt=S(kt),Sn=N(Ye,2);{let V=Ze(()=>(a(),U(()=>{var K,Y,ee;return(ee=(Y=(K=a().general)==null?void 0:K.appearance)==null?void 0:Y.language)==null?void 0:ee.value})));Al(Sn,{get options(){return _(c)},id:"langauge",preferredPosition:"up",get value(){return _(V)},$$events:{optionchange:b}})}var Un=N(se,4),hn=S(Un),rn=S(hn),Mn=N(hn,2),st=S(Mn),In=S(st),Yn=S(In),pn=N(In,2),mn=S(pn),T=N(st,2);{let V=Ze(()=>(a(),U(()=>{var K,Y,ee;return(ee=(Y=(K=a().general)==null?void 0:K.startup)==null?void 0:Y.autoStart)==null?void 0:ee.value})));Ui(T,{get checked(){return _(V)},$$events:{change:K=>dt.updatePath("general.startup.autoStart",K.detail.checked)}})}De((V,K,Y,ee,Te,Oe,$e,Xe)=>{ae(Le,V),ae(Q,K),ae(ve,Y),ae(Qe,ee),ae(xt,Te),ae(rn,Oe),ae(Yn,$e),ae(mn,Xe)},[()=>(r(),U(()=>r()("settings.general.appearance.label"))),()=>(r(),U(()=>r()("settings.general.appearance.theme.label"))),()=>(r(),U(()=>r()("settings.general.appearance.theme.description"))),()=>(r(),U(()=>r()("settings.general.appearance.language.label"))),()=>(r(),U(()=>r()("settings.general.appearance.language.description"))),()=>(r(),U(()=>r()("settings.general.startup.label"))),()=>(r(),U(()=>r()("settings.general.startup.autoStart"))),()=>(r(),U(()=>r()("settings.general.startup.autoStartDescription")))]),he($,oe)};at(Fe,$=>{_(p)==="General"&&$(lt)})}var ye=N(Fe,2);{var we=$=>{var oe=J1(),se=S(oe),le=S(se),Le=S(le),Ne=N(le,2),k=S(Ne),pe=S(k),Q=S(pe),fe=N(pe,2),ve=S(fe),We=N(Ne,4),Ke=N(S(We),2),Ye=S(Ke);vn(Ye,1,()=>(_(d),U(()=>Array(_(d)))),Ln,(Ht,Nn,Vt)=>{var At=q1();De(()=>ni(At,`
                                                width: ${100/_(d)}%;
                                                background-color: 
                                                    ${Vt<_(d)*.1?"red":Vt<_(d)*.7?"green":"yellow"};
                                            `)),he(Ht,At)});var mt=N(Ye,2);vn(mt,1,()=>(_(d),U(()=>Array(Math.min(_(d),16)))),Ln,(Ht,Nn,Vt)=>{var At=Y1();De(ln=>ni(At,`
                                                position: absolute;
                                                left: calc(${ln??""}% - 1px);
                                                width: 2px;
                                                height: 23%;
                                                background: #ffffff8d;
                                                pointer-events: none;
                                            `),[()=>(_(d),U(()=>Vt/(Math.min(_(d),16)-1)*100))]),he(Ht,At)});var Qe=N(mt,2);vn(Qe,1,()=>(_(d),U(()=>Array(Math.min(_(d),8)))),Ln,(Ht,Nn,Vt)=>{var At=K1(),ln=S(At);De((Wn,ps)=>{ni(At,`
                                                position: absolute;
                                                left: calc(${Wn??""}% - 12px);
                                                top: 40px;
                                                font-size: 0.8em;
                                                color: #fff1d;
                                                font-weight: 100 !important;
                                                opacity: 0.8;
                                                width: 24px;
                                                text-align: center;
                                                pointer-events: none;
                                            `),ae(ln,`${ps??""}GB`)},[()=>(_(d),U(()=>Vt/(Math.min(_(d),8)-1)*100)),()=>(_(d),U(()=>Math.round(Vt/(Math.min(_(d),8)-1)*_(d))))]),he(Ht,At)});var kt=N(Qe,2);kt.__pointerdown=G;var xt=S(kt),Sn=N(xt,2),Un=S(Sn),hn=N(se,2),rn=S(hn),Mn=S(rn),st=N(rn,2),In=S(st),Yn=S(In),pn=S(Yn),mn=N(Yn,2),T=S(mn),V=N(In,2);{let Ht=Ze(()=>(a(),U(()=>{var At,ln,Wn;return(Wn=(ln=(At=a().game)==null?void 0:At.resolution)==null?void 0:ln.width)==null?void 0:Wn.value}))),Nn=Ze(()=>(a(),U(()=>{var At,ln,Wn;return((Wn=(ln=(At=a().game)==null?void 0:At.resolution)==null?void 0:ln.height)==null?void 0:Wn.value)||1080}))),Vt=Ze(()=>(a(),U(()=>{var At,ln,Wn;return((Wn=(ln=(At=a().game)==null?void 0:At.resolution)==null?void 0:ln.fullscreen)==null?void 0:Wn.value)||!1})));B1(V,{get width(){return _(Ht)},get height(){return _(Nn)},get fullscreen(){return _(Vt)},$$events:{resolutionchange:R}})}var K=N(hn,4),Y=S(K),ee=S(Y),Te=N(Y,2),Oe=S(Te),$e=S(Oe),Xe=S($e),et=N($e,2),qe=S(et),Je=N(Oe,2);{let Ht=Ze(()=>(a(),U(()=>{var Vt,At,ln;return(ln=(At=(Vt=a().game)==null?void 0:Vt.runtime)==null?void 0:At.javaPath)==null?void 0:ln.value}))),Nn=Ze(()=>(r(),U(()=>r()("folderPicker.noFolderSelected"))));Bo(Je,{actionType:"pick",get value(){return _(Ht)},get placeholder(){return _(Nn)},$$events:{change:Vt=>dt.updatePath("game.runtime.javaPath",Vt.detail.value)}})}var yt=N(Te,2),Mt=S(yt),sn=S(Mt),En=S(sn),Pt=N(sn,2),tt=S(Pt),Li=N(Mt,2);Li.__input=Ht=>dt.updatePath("game.runtime.gameArgs",Ht.target.value);var Et=N(yt,2),wn=S(Et),Wi=S(wn),mi=S(Wi),$i=N(Wi,2),wt=S($i),Zt=N(wn,2);Zt.__input=Ht=>dt.updatePath("game.runtime.JVMArgs",Ht.target.value);var Kn=N(Et,2),Qt=S(Kn),Di=S(Qt),Ua=S(Di),ji=N(Di,2),hs=S(ji),hr=N(Qt,2);hr.__input=Ht=>dt.updatePath("game.runtime.environmentVariables",Ht.target.value);var on=N(Kn,2),it=S(on),Rt=S(it),Ut=S(Rt),Xi=N(Rt,2),kl=S(Xi),Ul=N(it,2);{let Ht=Ze(()=>(a(),U(()=>{var Nn,Vt,At;return(At=(Vt=(Nn=a().game)==null?void 0:Nn.runtime)==null?void 0:Vt.runDetached)==null?void 0:At.value})));Ui(Ul,{get checked(){return _(Ht)},$$events:{change:Nn=>dt.updatePath("game.runtime.runDetached",Nn.detail.checked)}})}De((Ht,Nn,Vt,At,ln,Wn,ps,Il,Nl,Ol,mm,gm,vm,_m,bm,xm,ym,Sm,Mm)=>{ae(Le,Ht),ae(Q,Nn),ae(ve,Vt),ni(xt,`
                                                position: absolute;
                                                left: calc(
                                                    ${At??""}% - 4px
                                                );
                                                top: 0;
                                                width: 4px;
                                                height: 15%;
                                                background: black;
                                                border: 2px solid #fff;
                                                box-shadow: 0 2px 6px rgba(0,0,0,0.2);
                                                cursor: grab;
                                                transition: background 0.2s;
                                                z-index: 3;
                                            `),ni(Sn,`
                                                position: absolute;
                                                left: calc(
                                                    ${ln??""}% - 18px
                                                );
                                                top: -28px;
                                                background: #222b;
                                                color: #fff;
                                                padding: 2px 8px;
                                                border-radius: 6px;
                                                font-size: 0.9em;
                                                font-weight: 500;
                                                pointer-events: none;
                                                z-index: 10;
                                                min-width: 32px;
                                                text-align: center;
                                            `),ae(Un,`${a(),U(()=>{var gi,vi,_i,Hu;return(Hu=(_i=(vi=(gi=a().game)==null?void 0:gi.performance)==null?void 0:vi.ramAllocation)==null?void 0:_i.max)==null?void 0:Hu.value})??""}GB`),ae(Mn,Wn),ae(pn,ps),ae(T,Il),ae(ee,Nl),ae(Xe,Ol),ae(qe,mm),ae(En,gm),ae(tt,vm),ks(Li,(a(),U(()=>{var gi,vi,_i;return(_i=(vi=(gi=a().game)==null?void 0:gi.runtime)==null?void 0:vi.gameArgs)==null?void 0:_i.value}))),ae(mi,_m),ae(wt,bm),ks(Zt,(a(),U(()=>{var gi,vi,_i;return(_i=(vi=(gi=a().game)==null?void 0:gi.runtime)==null?void 0:vi.JVMArgs)==null?void 0:_i.value}))),ae(Ua,xm),ae(hs,ym),ks(hr,(a(),U(()=>{var gi,vi,_i;return(_i=(vi=(gi=a().game)==null?void 0:gi.runtime)==null?void 0:vi.environmentVariables)==null?void 0:_i.value}))),ae(Ut,Sm),ae(kl,Mm)},[()=>(r(),U(()=>r()("settings.game.performance.label"))),()=>(r(),U(()=>r()("settings.game.performance.ramAllocation"))),()=>(r(),U(()=>r()("settings.game.performance.ramAllocationDescription"))),()=>(_(P),_(d),U(()=>Math.round(_(P)/99*(Math.min(_(d),16)-1))/(Math.min(_(d),16)-1)*100)),()=>(_(P),_(d),U(()=>Math.round(_(P)/99*(Math.min(_(d),16)-1))/(Math.min(_(d),16)-1)*100)),()=>(r(),U(()=>r()("settings.game.display.label"))),()=>(r(),U(()=>r()("settings.game.display.resolution"))),()=>(r(),U(()=>r()("settings.game.display.resolutionDescription"))),()=>(r(),U(()=>r()("settings.game.runtime.label"))),()=>(r(),U(()=>r()("settings.game.runtime.javaPath"))),()=>(r(),U(()=>r()("settings.game.runtime.javaPathDescription"))),()=>(r(),U(()=>r()("settings.game.runtime.gameArgs"))),()=>(r(),U(()=>r()("settings.game.runtime.gameArgsDescription"))),()=>(r(),U(()=>r()("settings.game.runtime.jvmArguments"))),()=>(r(),U(()=>r()("settings.game.runtime.jvmArgumentsDescription"))),()=>(r(),U(()=>r()("settings.game.runtime.environmentVariables"))),()=>(r(),U(()=>r()("settings.game.runtime.environmentVariablesDescription"))),()=>(r(),U(()=>r()("settings.game.runtime.runDetached"))),()=>(r(),U(()=>r()("settings.game.runtime.runDetached")))]),he($,oe)};at(ye,$=>{_(p)==="Game"&&$(we)})}var Ge=N(ye,2);{var ut=$=>{var oe=Z1(),se=S(oe),le=S(se),Le=S(le),Ne=N(le,2),k=S(Ne),pe=S(k),Q=S(pe),fe=N(pe,2),ve=S(fe),We=N(k,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut;return(Ut=(Rt=(it=a().launcher)==null?void 0:it.updates)==null?void 0:Rt.checkForUpdates)==null?void 0:Ut.value})));Ui(We,{get checked(){return _(on)},$$events:{change:it=>dt.updatePath("launcher.updates.checkForUpdates",it.detail.checked)}})}var Ke=N(se,4),Ye=S(Ke),mt=S(Ye),Qe=N(Ye,2),kt=S(Qe),xt=S(kt),Sn=S(xt),Un=N(xt,2),hn=S(Un),rn=N(kt,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut;return(Ut=(Rt=(it=a().launcher)==null?void 0:it.integration)==null?void 0:Rt.discordRichPresence)==null?void 0:Ut.value})));Ui(rn,{get checked(){return _(on)},$$events:{change:it=>dt.updatePath("launcher.integration.discordRichPresence",it.detail.checked)}})}var Mn=N(Ke,4),st=S(Mn),In=S(st),Yn=N(st,2),pn=S(Yn),mn=S(pn),T=S(mn),V=N(mn,2),K=S(V),Y=N(pn,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut;return(Ut=(Rt=(it=a().launcher)==null?void 0:it.notification)==null?void 0:Rt.systemNotifications)==null?void 0:Ut.value})));Ui(Y,{get checked(){return _(on)},$$events:{change:it=>dt.updatePath("launcher.notification.systemNotifications",it.detail.checked)}})}var ee=N(Yn,2),Te=S(ee),Oe=S(Te),$e=S(Oe),Xe=N(Oe,2),et=S(Xe),qe=N(Te,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut;return(Ut=(Rt=(it=a().launcher)==null?void 0:it.notification)==null?void 0:Rt.updateNotification)==null?void 0:Ut.value})));Ui(qe,{get checked(){return _(on)},$$events:{change:it=>dt.updatePath("launcher.notification.updateNotification",it.detail.checked)}})}var Je=N(ee,2),yt=S(Je),Mt=S(yt),sn=S(Mt),En=N(Mt,2),Pt=S(En),tt=N(yt,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut;return(Ut=(Rt=(it=a().launcher)==null?void 0:it.notification)==null?void 0:Rt.playSound)==null?void 0:Ut.value})));Ui(tt,{get checked(){return _(on)},$$events:{change:it=>{dt.updatePath("launcher.notification.playSound",it.detail.checked)}}})}var Li=N(Je,2),Et=S(Li),wn=S(Et),Wi=S(wn),mi=N(wn,2),$i=S(mi),wt=N(Et,2),Zt=S(wt),Kn=S(Zt),Qt=S(Kn),Di=N(Kn,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut,Xi;return(Xi=(Ut=(Rt=(it=a().launcher)==null?void 0:it.notification)==null?void 0:Rt.categories)==null?void 0:Ut.updates)==null?void 0:Xi.value})));Ui(Di,{get checked(){return _(on)},$$events:{change:it=>dt.updatePath("launcher.notification.categories.updates",it.detail.checked)}})}var Ua=N(Zt,2),ji=S(Ua),hs=S(ji),hr=N(ji,2);{let on=Ze(()=>(a(),U(()=>{var it,Rt,Ut,Xi;return(Xi=(Ut=(Rt=(it=a().launcher)==null?void 0:it.notification)==null?void 0:Rt.categories)==null?void 0:Ut.launches)==null?void 0:Xi.value})));Ui(hr,{get checked(){return _(on)},$$events:{change:it=>dt.updatePath("launcher.notification.categories.launches",it.detail.checked)}})}De((on,it,Rt,Ut,Xi,kl,Ul,Ht,Nn,Vt,At,ln,Wn,ps,Il,Nl,Ol)=>{ae(Le,on),ae(Q,it),ae(ve,Rt),ae(mt,Ut),ae(Sn,Xi),ae(hn,kl),ae(In,Ul),ae(T,Ht),ae(K,Nn),ae($e,Vt),ae(et,At),ae(sn,ln),ae(Pt,Wn),ae(Wi,ps),ae($i,Il),ae(Qt,Nl),ae(hs,Ol)},[()=>(r(),U(()=>r()("settings.launcher.updates"))),()=>(r(),U(()=>r()("settings.launcher.checkForUpdates"))),()=>(r(),U(()=>r()("settings.launcher.checkForUpdatesDescription"))),()=>(r(),U(()=>r()("settings.launcher.integration.label"))),()=>(r(),U(()=>r()("settings.launcher.integration.discordRPC"))),()=>(r(),U(()=>r()("settings.launcher.integration.discordRPCDescription"))),()=>(r(),U(()=>r()("settings.launcher.notification.label"))),()=>(r(),U(()=>r()("settings.launcher.notification.systemNotifications"))),()=>(r(),U(()=>r()("settings.launcher.notification.systemNotificationsDescription"))),()=>(r(),U(()=>r()("settings.launcher.notification.showUpdateNotification"))),()=>(r(),U(()=>r()("settings.launcher.notification.showUpdateNotificationDescription"))),()=>(r(),U(()=>r()("settings.launcher.notification.playSound"))),()=>(r(),U(()=>r()("settings.launcher.notification.playSoundDescription"))),()=>(r(),U(()=>r()("settings.launcher.notification.categories.label"))),()=>(r(),U(()=>r()("settings.launcher.notification.categories.description"))),()=>(r(),U(()=>r()("settings.launcher.notification.categories.updates"))),()=>(r(),U(()=>r()("settings.launcher.notification.categories.launches")))]),he($,oe)};at(Ge,$=>{_(p)==="Launcher"&&$(ut)})}var Pe=N(Ge,2);{var C=$=>{var oe=Q1(),se=S(oe),le=S(se),Le=S(le),Ne=N(le,2),k=S(Ne),pe=S(k),Q=S(pe),fe=N(pe,2),ve=S(fe),We=N(k,2);{let pn=Ze(()=>(a(),U(()=>{var T,V,K;return(K=(V=(T=a().storage)==null?void 0:T.directories)==null?void 0:V.launcherFolder)==null?void 0:K.value}))),mn=Ze(()=>(r(),U(()=>r()("folderPicker.noFolderSelected"))));Bo(We,{actionType:"open",inputReadOnly:!0,get value(){return _(pn)},get placeholder(){return _(mn)},$$events:{change:T=>dt.updatePath("storage.directories.launcherFolder",T.detail.value)}})}var Ke=N(Ne,2),Ye=S(Ke),mt=S(Ye),Qe=S(mt),kt=N(mt,2),xt=S(kt),Sn=N(Ye,2);{let pn=Ze(()=>(a(),U(()=>{var T,V,K;return(K=(V=(T=a().storage)==null?void 0:T.directories)==null?void 0:V.minecraftFolder)==null?void 0:K.value}))),mn=Ze(()=>(r(),U(()=>r()("folderPicker.noFolderSelected"))));Bo(Sn,{actionType:"open",inputReadOnly:!0,get value(){return _(pn)},get placeholder(){return _(mn)},$$events:{change:T=>dt.updatePath("storage.directories.minecraftFolder",T.detail.value)}})}var Un=N(Ke,2),hn=S(Un),rn=S(hn),Mn=S(rn),st=N(rn,2),In=S(st),Yn=N(hn,2);{let pn=Ze(()=>(a(),U(()=>{var T,V,K;return((K=(V=(T=a().storage)==null?void 0:T.directories)==null?void 0:V.minecraftFolder)==null?void 0:K.value)+"/mods"}))),mn=Ze(()=>(r(),U(()=>r()("folderPicker.noFolderSelected"))));Bo(Yn,{actionType:"open",inputReadOnly:!0,get value(){return _(pn)},get placeholder(){return _(mn)},$$events:{change:T=>dt.updatePath("storage.directories.minecraftFolder",T.detail.value)}})}De((pn,mn,T,V,K,Y,ee)=>{ae(Le,pn),ae(Q,mn),ae(ve,T),ae(Qe,V),ae(xt,K),ae(Mn,Y),ae(In,ee)},[()=>(r(),U(()=>r()("settings.storage.folders"))),()=>(r(),U(()=>r()("settings.storage.launcherFolder"))),()=>(r(),U(()=>r()("settings.storage.launcherFolderDescription"))),()=>(r(),U(()=>r()("settings.storage.minecraftFolder"))),()=>(r(),U(()=>r()("settings.storage.minecraftFolderDescription"))),()=>(r(),U(()=>r()("settings.storage.modFolder"))),()=>(r(),U(()=>r()("settings.storage.modFolderDescription")))]),he($,oe)};at(Pe,$=>{_(p)==="Storage"&&$(C)})}var y=N(Pe,2);{var H=$=>{var oe=eR(),se=S(oe),le=S(se),Le=S(le),Ne=N(le,2),k=S(Ne),pe=S(k),Q=S(pe),fe=N(pe,2),ve=S(fe),We=N(k,2);{let Ke=Ze(()=>(a(),U(()=>{var Ye,mt,Qe;return(Qe=(mt=(Ye=a().developer)==null?void 0:Ye.experimental)==null?void 0:mt.allowBetaFeatures)==null?void 0:Qe.value})));Ui(We,{get checked(){return _(Ke)},$$events:{change:Ye=>dt.updatePath("developer.experimental.allowBetaFeatures",Ye.detail.checked)}})}De((Ke,Ye,mt)=>{ae(Le,Ke),ae(Q,Ye),ae(ve,mt)},[()=>(r(),U(()=>r()("settings.developer.experimental"))),()=>(r(),U(()=>r()("settings.developer.allowBetaFeatures"))),()=>(r(),U(()=>r()("settings.developer.allowBetaFeaturesDescription")))]),he($,oe)};at(y,$=>{_(p)==="Developer"&&$(H)})}var ce=N(y,2);{var ue=$=>{var oe=nR(),se=S(oe),le=S(se),Le=S(le);Le.__click=q;var Ne=N(le,2),k=S(Ne),pe=S(k),Q=S(pe),fe=N(pe,2),ve=S(fe),We=N(k,2);We.__click=D;var Ke=S(We);{var Ye=wt=>{var Zt=tR();he(wt,Zt)},mt=wt=>{var Zt=$a();De(Kn=>ae(Zt,Kn),[()=>(r(),U(()=>r()("settings.about.checkForUpdates")))]),he(wt,Zt)};at(Ke,wt=>{_(v)?wt(Ye):wt(mt,!1)})}var Qe=N(Ne,2),kt=S(Qe),xt=S(kt),Sn=S(xt),Un=N(xt,2),hn=S(Un);Vs(hn,()=>(r(),U(()=>r()("settings.about.developedBy"))));var rn=N(hn,3),Mn=N(Qe,2),st=S(Mn),In=S(st),Yn=S(In),pn=N(In,2),mn=S(pn),T=N(S(mn),6),V=S(T),K=N(Mn,2),Y=S(K),ee=S(Y),Te=S(ee),Oe=N(K,2),$e=S(Oe),Xe=S($e),et=S(Xe),qe=N(Oe,2),Je=S(qe),yt=S(Je),Mt=N(S(yt)),sn=N(yt,2),En=S(sn),Pt=N(En),tt=N(S(Pt)),Li=N(qe,4),Et=S(Li),wn=S(Et),Wi=S(wn),mi=N(wn,2),$i=S(mi);De((wt,Zt,Kn,Qt,Di,Ua,ji,hs,hr,on,it,Rt)=>{ae(Q,wt),ae(ve,`v${s()??""}`),gt(We,1,`check-update-btn ${_(v)?"loading":""}`,"svelte-1x217di"),We.disabled=_(v),ae(Sn,Zt),ae(rn,` ${Kn??""}`),ae(Yn,Qt),ae(V,Di),ae(Te,Ua),ae(et,ji),ae(Mt,`¬†¬†¬†${hs??""}`),ae(En,`${hr??""} `),ae(tt,`¬†${on??""}`),ae(Wi,it),ae($i,Rt)},[()=>(r(),U(()=>r()("settings.about.version"))),()=>(r(),U(()=>r()("settings.about.credits"))),()=>(r(),U(()=>r()("settings.about.specialThanks"))),()=>(r(),U(()=>r()("settings.about.openSourceLibraries"))),()=>(r(),U(()=>r()("settings.about.extraOpenSourceLibrariesDescription"))),()=>(r(),U(()=>r()("settings.about.apisUsed"))),()=>(r(),U(()=>r()("settings.about.sourceCode"))),()=>(r(),U(()=>r()("settings.about.donate"))),()=>(r(),U(()=>r()("settings.about.donateDescription"))),()=>(r(),U(()=>r()("settings.about.donateButton"))),()=>(r(),U(()=>r()("settings.about.disclaimer"))),()=>(r(),U(()=>r()("settings.about.disclaimerDescription")))]),he($,oe)};at(ce,$=>{_(p)==="About"&&$(ue)})}var ge=N(Ue,2),ke=S(ge);ke.__click=w;var xe=S(ke),te=N(ke,2);te.__click=[iR];var L=S(te);De(($,oe,se,le,Le,Ne,k,pe)=>{ae(ne,` ${$??""}`),gt(Z,1,`cf-btn ${_(p)==="General"?"active-tab":""}`,"svelte-1x217di"),ae(de,oe),gt(me,1,`cf-btn ${_(p)==="Launcher"?"active-tab":""}`,"svelte-1x217di"),ae(be,se),gt(Re,1,`cf-btn ${_(p)==="Game"?"active-tab":""}`,"svelte-1x217di"),ae(Ce,le),gt(_e,1,`cf-btn ${_(p)==="Storage"?"active-tab":""}`,"svelte-1x217di"),ae(Ie,Le),gt(z,1,`cf-btn ${_(p)==="About"?"active-tab":""}`,"svelte-1x217di"),ae(Be,Ne),ae(xe,k),ae(L,pe)},[()=>(r(),U(()=>r()("settings.title"))),()=>(r(),U(()=>r()("settings.tabs.general"))),()=>(r(),U(()=>r()("settings.tabs.launcher"))),()=>(r(),U(()=>r()("settings.tabs.game"))),()=>(r(),U(()=>r()("settings.tabs.storage"))),()=>(r(),U(()=>r()("settings.tabs.about"))),()=>(r(),U(()=>r()("settings.buttons.resetToDefault"))),()=>(r(),U(()=>r()("settings.buttons.close")))]),he(n,I),Kt(),i()}gl(["click","pointerdown","input"]);var sR=Me("<button> </button>"),oR=Me("<button> </button>"),lR=Me('<div class="version-selector"><div class="wrapper"><div class="version-overview-container"><div class="version-info-container"><span class="version-name"> </span> <span class="version-tag"><!></span> <span class="version-summary"> </span></div> <button class="version-selector-save-btn" aria-label="Close Button"><i class="fa fa-xmark"></i></button></div> <div class="version-wrapper-container"><div class="release-wrapper"><div class="release-item-list-container"><div class="item-list-wrapper"></div></div></div> <div class="release-variant-wrapper"><div class="release-variant-item-list"><div class="rvil-wrapper"></div></div></div></div></div></div>');function cR(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(Ru,"$versions",t),r=()=>je(Bi,"$selectedMajor",t),s=()=>je(aa,"$selectedVariant",t),o=()=>je(an,"$t",t),l=ur();function c(I){const F=I.variants.find(J=>J.id===I.name)||I.variants[0];rl(I.name,F.id,F.type)}function u(I){var J;const F=(J=a().find(O=>O.name===r()))==null?void 0:J.variants.find(O=>O.id===I);rl(r(),I,(F==null?void 0:F.type)||""),l("change",{version:r(),variant:I})}nn();var d=lR(),p=S(d),g=S(p),f=S(g),v=S(f),h=S(v),m=N(v,2),M=S(m);{var b=I=>{var F=ii(),J=jt(F);vn(J,1,()=>{var O;return(O=a().find(j=>j.name===r()))==null?void 0:O.variants},Ln,(O,j)=>{var ne=ii(),re=jt(ne);{var B=Z=>{var de=$a();De(me=>ae(de,`${_(j).id??""} - ${me??""}`),[()=>_(j).type.charAt(0).toUpperCase()+_(j).type.slice(1)]),he(Z,de)};at(re,Z=>{_(j).id===s()&&Z(B)})}he(O,ne)}),he(I,F)};at(M,I=>{a().length&&I(b)})}var w=N(m,2),R=S(w),P=N(f,2),A=N(g,2),G=S(A),x=S(G),E=S(x);vn(E,5,a,Ln,(I,F)=>{var J=sR(),O=S(J);De(()=>{gt(J,1,`release-item ${_(F).name===r()?"selected":""}`),ae(O,_(F).name)}),vt("click",J,()=>c(_(F))),he(I,J)});var W=N(G,2),q=S(W),D=S(q);vn(D,5,()=>{var I;return(I=a().find(F=>F.name===r()))==null?void 0:I.variants},Ln,(I,F)=>{var J=oR(),O=S(J);De(()=>{gt(J,1,`release-variant-item ${_(F).id===s()?"selected":""}`),ae(O,_(F).id)}),vt("click",J,()=>u(_(F).id)),he(I,J)}),De(I=>{ae(h,`Minecraft ${r()??""}`),ae(R,I)},[()=>o()("versionSelector.versionSummary")]),vt("click",P,()=>{Ot.toggleModel.set("none")}),he(n,d),Kt(),i()}var uR=Me('<div class="main"><!> <!></div> <!>',1);function dR(n){const[e,t]=Jt(),i=()=>je(a,"$toggleModel",e),{toggleModel:a}=Ot;console.log("home");var r=uR(),s=jt(r),o=S(s);_1(o,{});var l=N(o,2);f1(l,{});var c=N(s,2);{var u=p=>{T1(p,{})},d=p=>{var g=ii(),f=jt(g);{var v=m=>{rR(m,{})},h=m=>{var M=ii(),b=jt(M);{var w=P=>{C1(P,{})},R=P=>{var A=ii(),G=jt(A);{var x=E=>{cR(E,{})};at(G,E=>{i()==="versionselector"&&E(x)},!0)}he(P,A)};at(b,P=>{i()==="invoker"?P(w):P(R,!1)},!0)}he(m,M)};at(f,m=>{i()==="settings"?m(v):m(h,!1)},!0)}he(p,g)};at(c,p=>{i()==="accountadder"?p(u):p(d,!1)})}he(n,r),t()}let Tt=n=>n;an.subscribe(n=>Tt=n);let Wa=0;const yn=Dt({step:0,message:`${Tt("logs.loading")}`,progress:0});async function fR(){yn.set({step:1,message:Tt("logs.loadingSettings"),progress:10}),await new Promise(n=>setTimeout(n,300)),await yp(),await dt.init(),await Ep()}async function hR(){var e,t,i;if((i=(t=(e=ei(dt).launcher)==null?void 0:e.updates)==null?void 0:t.checkForUpdates)!=null&&i.value){yn.set({step:2,message:Tt("logs.checkingForUpdates"),progress:25});const a=await fm();a!=null&&a.available?(console.log(`Update available: ${a.latest} (current: ${a.current})`),await hm(a)):a&&console.log("Launcher is up to date")}else yn.set({step:2,message:Tt("logs.skippingUpdateCheck"),progress:25});await new Promise(a=>setTimeout(a,500))}async function pR(){yn.set({step:3,message:Tt("logs.buildingVersions"),progress:40}),sx()}async function mR(){yn.set({step:3,message:Tt("logs.initializingServices"),progress:55}),await new Promise(n=>setTimeout(n,400))}async function gR(){yn.set({step:4,message:Tt("logs.validatingAccounts"),progress:60});const n=Lu();console.log(n);const e=n.filter(a=>a.type==="online");if(e.length===0){await new Promise(a=>setTimeout(a,200));return}console.log(e),yn.set({step:4,message:Tt("logs.refreshingAccounts"),progress:65});let t=0,i=0;for(const a of e){try{await window.electron.invoke("refresh-account",a).then(async s=>{if(s.success){console.log(s);let o={...a,access_token:s.mc.access_token,refresh_token:s.extra.msToken.refresh_token,client_id:s.mc.client_id,user_properties:s.mc.user_properties,profile:s.extra.profile};Du(a.uuid||a.name,o),t++}else console.warn(`‚ö† Failed to refresh account: ${a.name} - ${refreshResult.error||"Unknown error"}`),i++})}catch(s){console.error(`‚úó Error refreshing account: ${a.name}`,s),i++}const r=65+(t+i)/e.length*10;yn.set({step:4,message:`${Tt("logs.refreshingAccounts")} (${t+i}/${e.length})`,progress:r})}i>0?console.log(`Account refresh completed: ${t} successful, ${i} failed`):console.log(`All ${t} accounts refreshed successfully`),yn.set({step:4,message:Tt("logs.accountsValidated"),progress:75}),await new Promise(a=>setTimeout(a,300))}async function vR(){yn.set({step:5,message:Tt("logs.fetchingServerList"),progress:75}),await new Promise(n=>setTimeout(n,600))}async function _R(){yn.set({step:6,message:Tt("logs.preparingLauncher"),progress:90}),await new Promise(n=>setTimeout(n,300))}async function pm(){const n=[Tt("logs.apiFetch.wakingUpServer"),Tt("logs.apiFetch.wakeup1"),Tt("logs.apiFetch.wakeup2"),Tt("logs.apiFetch.wakeup3"),Tt("logs.apiFetch.wakeup4"),Tt("logs.apiFetch.wakeup5"),Tt("logs.apiFetch.wakeup6"),Tt("logs.apiFetch.wakeup7")];yn.set({step:2,message:Tt("logs.checkingAPIStatus"),progress:20});const e=6e4,t=5e3,i=Date.now();async function a(){const r=new AbortController,s=setTimeout(()=>r.abort(),3e3);try{const o=await fetch(`${Cu}/ping`,{method:"GET",cache:"no-store",signal:r.signal,headers:{"User-Agent":"OriLauncher/2.0.0 (Electron)",Accept:"application/json","Cache-Control":"no-cache"},mode:"cors"});if(clearTimeout(s),!o.ok)throw new Error("API not OK");if((await o.json()).status!=="ok")throw new Error("Bad ping response");return!0}catch{return clearTimeout(s),!1}}if(!await a()){for(;Date.now()-i<e;)if(yn.set({step:2,message:n[Math.floor(Math.random()*n.length)],progress:20,error:!1}),await new Promise(r=>setTimeout(r,t)),await a())return;throw yn.set({step:2,message:Tt("logs.apiUnreachable"),progress:20,error:!0}),Ws({title:Tt("dialog.titles.apiUnreachable"),message:Tt("dialog.messages.apiUnreachable"),buttons:[{label:Tt("dialog.continue"),primary:!1,action:()=>{yn.update(r=>({...r,error:!1})),tu(Wa+1)}},{label:Tt("dialog.retry"),primary:!0,type:"danger",action:async()=>{try{await pm(),tu(Wa+1)}catch{location.reload()}}}]}),new Error("API unreachable")}}const zo=[fR,hR,pm,pR,mR,gR,vR,_R];async function tu(n=0){for(Ot.isBootReady.set(!1),Wa=n;Wa<zo.length;Wa++){const e=zo[Wa];try{await e()}catch(t){console.error("Step failed:",t);break}}Wa>=zo.length&&(yn.set({step:zo.length,message:Tt("logs.ready"),progress:100}),Ot.isBootReady.set(!0))}var bR=async()=>{await window.electron.minimizeApp()},xR=Me('<button aria-label="minimize-app" class="win-action-btn splash-minimize-btn svelte-1aa74rg"><i class="fa fa-minus svelte-1aa74rg"></i></button>'),yR=async()=>{await window.electron.closeApp()},SR=Me('<button aria-label="minimize-app" class="win-action-btn splash-close-btn svelte-1aa74rg"><i class="fa fa-xmark svelte-1aa74rg"></i></button>'),MR=Me('<div class="updater splash-screen svelte-1aa74rg"><div class="win-bar svelte-1aa74rg"><div class="win-title svelte-1aa74rg"></div> <div class="drag-bar"></div> <div class="win-action-bar-cont svelte-1aa74rg"><!> <!></div></div> <div class="u-wrapper svelte-1aa74rg"><img src="./images/static/foxy-walking.gif" alt="" class="u-brand svelte-1aa74rg"/> <span class="horizontal-seperator"></span> <div class="u-progress-bar-cont svelte-1aa74rg"><div class="progress-bar loading svelte-1aa74rg"></div></div> <span class="progress-status svelte-1aa74rg"> </span></div></div>');function ER(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(an,"$t",t);let r=Ve({message:a()("splash.loading"),progress:0});const s=yn.subscribe(m=>Se(r,m));cr(()=>(tu(),s)),nn();var o=MR(),l=S(o),c=N(S(l),4),u=S(c);{let m=Ze(()=>a()("mainContent.minimize"));tn(u,{get text(){return _(m)},direction:"bottom",children:(M,b)=>{var w=xR();w.__click=[bR],he(M,w)},$$slots:{default:!0}})}var d=N(u,2);{let m=Ze(()=>a()("mainContent.closeApp"));tn(d,{get text(){return _(m)},direction:"bottom",children:(M,b)=>{var w=SR();w.__click=[yR],he(M,w)},$$slots:{default:!0}})}var p=N(l,2),g=N(S(p),4),f=S(g),v=N(g,2),h=S(v);De(()=>{ni(f,`width: ${_(r).progress??""}%`),ae(h,_(r).message)}),he(n,o),Kt(),i()}gl(["click"]);var wR=Me("<!> <!> <!>",1);function AR(n,e){Yt(e,!1);const[t,i]=Jt(),a=()=>je(s,"$isBootReady",t),r=()=>je(Su,"$dialogStore",t),{isBootReady:s}=Ot;Ot.isBootReady.set(!1),nn();var o=wR(),l=jt(o);{var c=g=>{dR(g)},u=g=>{ER(g,{})};at(l,g=>{a()?g(c):g(u,!1)})}var d=N(l,2);pb(d);var p=N(d,2);qT(p,{get open(){return r().open},get title(){return r().title},get message(){return r().message},get buttons(){return r().buttons},get onClose(){return qg}}),he(n,o),Kt(),i()}I1();Rg(AR,{target:document.getElementById("app")});var nh;(nh=window.electron)!=null&&nh.openExternal&&document.addEventListener("click",n=>{const e=n.target.closest("a");e&&e.href&&!e.href.startsWith("javascript:")&&!e.href.startsWith("#")&&e.target!=="_self"&&(n.preventDefault(),window.electron.openExternal(e.href))});
